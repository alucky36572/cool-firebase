/*! For license information please see main.a7e21a64.js.LICENSE.txt */
(()=>{var e={540:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.isForwardRef=function(e){return _(e)===d}},904:(e,t,n)=>{"use strict";e.exports=n(540)},172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(396);n(554);var i=n(43);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){s(this,e),l(this,"handlers",void 0),this.handlers=t.slice(0)}return c(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===t.indexOf(o)&&n.push(o)}return new e(n)}}]),e}();function m(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function g(e){return Array.isArray(e)?e:[e]}function v(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===o(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,n){s(this,e),l(this,"handlerSets",void 0),l(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return c(e,[{key:"addHandlers",value:function(t,n){var r=m(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=m(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();l(y,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new y(e,r)}));var w=function(){function e(t){var n=this;s(this,e),l(this,"handlers",new Map),l(this,"pools",new Map),l(this,"target",void 0),l(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return c(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,y.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),b=new(function(){function e(){var t=this;s(this,e),l(this,"targets",new Map),l(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=v(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new w(r);return t.targets.set(r,i),i})),l(this,"removeTarget",(function(e){t.targets.delete(v(e))}))}return c(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,o=void 0===i?document:i,s=n.pool,a=void 0===s?"default":s;this.getTarget(o).addHandlers(a,e,g(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,o=void 0===i?document:i,s=n.pool,a=void 0===s?"default":s,c=this.getTarget(o,!1);c&&(c.removeHandlers(a,e,g(t)),c.hasHandlers()||this.removeTarget(o))}}}]),e}()),_=function(){function e(){return s(this,e),f(this,h(e).apply(this,arguments))}return u(e,i.PureComponent),c(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;b.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;b.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}();l(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={},t.instance=b,t.default=_},173:(e,t,n)=>{"use strict";var r;r=n(172),e.exports=r.default,e.exports.instance=r.instance},396:(e,t,n)=>{var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},90:e=>{"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var o=i+65;n[o]=[String.fromCharCode(o+32),String.fromCharCode(o)]}var s={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};s.Spacebar=s[" "],s.Digit0=s[0],s.Digit1=s[1],s.Digit2=s[2],s.Digit3=s[3],s.Digit4=s[4],s.Digit5=s[5],s.Digit6=s[6],s.Digit7=s[7],s.Digit8=s[8],s.Digit9=s[9],s.Tilde=s["~"],s.GraveAccent=s["`"],s.ExclamationPoint=s["!"],s.AtSign=s["@"],s.PoundSign=s["#"],s.PercentSign=s["%"],s.Caret=s["^"],s.Ampersand=s["&"],s.PlusSign=s["+"],s.MinusSign=s["-"],s.EqualsSign=s["="],s.DivisionSign=s["/"],s.MultiplicationSign=s["*"],s.Comma=s[","],s.Decimal=s["."],s.Colon=s[":"],s.Semicolon=s[";"],s.Pipe=s["|"],s.BackSlash=s["\\"],s.QuestionMark=s["?"],s.SingleQuote=s["'"],s.DoubleQuote=s['"'],s.LeftCurlyBrace=s["{"],s.RightCurlyBrace=s["}"],s.LeftParenthesis=s["("],s.RightParenthesis=s[")"],s.LeftAngleBracket=s["<"],s.RightAngleBracket=s[">"],s.LeftSquareBracket=s["["],s.RightSquareBracket=s["]"],e.exports=s},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},554:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function oe(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Se=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Se)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,o,s,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ke(i),e;if(s===r)return Ke(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,St,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=o}}function Ht(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=o}}function Wt(e,t,n,r){if(Kt){var i=Jt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Mt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=wi(i);if(null!==o&&_t(o),null===(o=Jt(e,t,n,r))&&Kr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),hn=F({},ln,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),vn=on(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(yn),bn=on(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(kn),xn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=on(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Jn(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Gn(t,Wn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function or(e,t){if("click"===e)return Jn(t)}function sr(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),c(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Fr(i,a,l),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Fr(i,a,l),o=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=_e(n),s=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=vn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==c&&Qr(s,a,c,u,!1),null!==l&&null!==h&&Qr(s,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yn;else if(Kn(a))if($n)g=sr;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),s.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Re(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Re(n,o))&&s.unshift(Gr(n,c,a)):i||null!=(c=Re(n,o))&&s.push(Gr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Si(e){return{current:e}}function Ti(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Si(Ci),Ni=Si(!1),Ai=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(o(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Ji=null,Yi=1,$i="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Ji,Ji=e;var r=Yi;e=$i;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,$i=o+e}else Yi=1<<o|n<<i|r,$i=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Ji;)Ji=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(co(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=li(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&wo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case E:return(t=Ul(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),io&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return io&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),io&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return io&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),u}return function e(r,o,s,c){if("object"===typeof s&&null!==s&&s.type===I&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var l=s.key,u=o;null!==u;){if(u.key===l){if((l=s.type)===I){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&wo(l)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=vo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===I?((o=Ll(s.props.children,r.mode,c,s.key)).return=r,r=o):((c=Ol(s.type,s.key,s.props,null,r.mode,c)).ref=vo(r,o,s),c.return=r,r=c)}return a(r);case E:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Ul(s,r.mode,c)).return=r,r=o}return a(r);case R:return e(r,o,(u=s._init)(s._payload),c)}if(te(s))return m(r,o,s,c);if(L(s))return g(r,o,s,c);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fl(s,r.mode,c)).return=r,r=o),a(r)):n(r,o)}}var _o=bo(!0),Eo=bo(!1),Io=Si(null),So=null,To=null,ko=null;function Co(){ko=To=So=null}function xo(e){var t=Io.current;Ti(Io),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){So=e,ko=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===So)throw Error(o(308));To=e,So.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Ro=null;function Do(e){null===Ro?Ro=[e]:Ro.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Do(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Do(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function zo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==o){var h=i.baseState;for(s=0,u=l=c=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Mc|=s,e.lanes=s,e.memoizedState=h}}function Ko(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Ho=Si(Go),Wo=Si(Go),Qo=Si(Go);function Jo(e){if(e===Go)throw Error(o(174));return e}function Yo(e,t){switch(ki(Qo,t),ki(Wo,e),ki(Ho,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ho),ki(Ho,t)}function $o(){Ti(Ho),Ti(Wo),Ti(Qo)}function Xo(e){Jo(Qo.current);var t=Jo(Ho.current),n=ce(t,e.type);t!==n&&(ki(Wo,e),ki(Ho,n))}function Zo(e){Wo.current===e&&(Ti(Ho),Ti(Wo))}var es=Si(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,cs=null,ls=null,us=!1,hs=!1,ds=0,fs=0;function ps(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),hs){s=0;do{if(hs=!1,ds=0,25<=s)throw Error(o(301));s+=1,ls=cs=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(hs)}if(is.current=Xs,t=null!==cs&&null!==cs.next,ss=0,ls=cs=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==ds;return ds=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?as.memoizedState=ls=e:ls=ls.next=e,ls}function ws(){if(null===cs){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===ls?as.memoizedState:ls.next;if(null!==t)ls=t,cs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===ls?as.memoizedState=ls=e:ls=ls.next=e}return ls}function bs(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=cs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var c=a=null,l=null,u=s;do{var h=u.lane;if((ss&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,as.lanes|=h,Mc|=h}u=u.next}while(null!==u&&u!==s);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Mc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Es(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Ss(e,t){var n=as,r=ws(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Ms(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ps(9,ks.bind(null,n,r,i,t),void 0,null),null===Nc)throw Error(o(349));0!==(30&ss)||Ts(n,t,i)}return i}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ks(e,t,n,r){t.value=n,t.getSnapshot=r,xs(t)&&Ns(e)}function Cs(e,t,n){return n((function(){xs(t)&&Ns(e)}))}function xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ns(e){var t=Lo(e,1);null!==t&&nl(t,e,1,-1)}function As(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return ws().memoizedState}function Ds(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=ws();r=void 0===r?null:r;var o=void 0;if(null!==cs){var s=cs.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Ls(e,t){return Ds(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Fs(e,t){return Os(4,2,e,t)}function Us(e,t){return Os(4,4,e,t)}function js(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,js.bind(null,t,e),n)}function zs(){}function Bs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qs(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ks(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Mc|=n,e.baseState=!0),t)}function Gs(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{wt=n,os.transition=r}}function Hs(){return ws().memoizedState}function Ws(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Js(e))Ys(t,n);else if(null!==(n=Oo(e,t,n,r))){nl(n,e,r,el()),$s(n,t,r)}}function Qs(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Js(e))Ys(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var c=t.interleaved;return null===c?(i.next=i,Do(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Oo(e,t,i,r))&&(nl(n,e,r,i=el()),$s(n,t,r))}}function Js(e){var t=e.alternate;return e===as||null!==t&&t===as}function Ys(e,t){hs=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $s(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xs={readContext:Po,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ls,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ds(4194308,4,js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ds(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:As,useDebugValue:zs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=As(!1),t=e[0];return e=Gs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nc)throw Error(o(349));0!==(30&ss)||Ts(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ls(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,ks.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Nc.identifierPrefix;if(io){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:Vs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:qs,useReducer:_s,useRef:Rs,useState:function(){return _s(bs)},useDebugValue:zs,useDeferredValue:function(e){return Ks(ws(),cs.memoizedState,e)},useTransition:function(){return[_s(bs)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ss,useId:Hs,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:Bs,useContext:Po,useEffect:Ms,useImperativeHandle:Vs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:qs,useReducer:Es,useRef:Rs,useState:function(){return Es(bs)},useDebugValue:zs,useDeferredValue:function(e){var t=ws();return null===cs?t.memoizedState=e:Ks(t,cs.memoizedState,e)},useTransition:function(){return[Es(bs)[0],ws().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ss,useId:Hs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=jo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Vo(e,o,i))&&(nl(t,e,i,r),zo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=jo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Vo(e,o,i))&&(nl(t,e,i,r),zo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=jo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vo(e,i,r))&&(nl(t,e,r,n),zo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function sa(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ri(t)?Ai:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ri(t)?Ai:xi.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),qo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,Gc=r),ha(0,t)},n}function pa(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,Vo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?Eo(t,null,n,r):_o(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||wa?(io&&n&&eo(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(s,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dl(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Rc),Rc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(Dc,Rc),Rc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Rc),Rc|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var o=Ri(n)?Ai:xi.current;return o=Pi(t,o),Ao(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||wa?(io&&r&&eo(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var o=!0;Mi(t)}else o=!1;if(Ao(t,i),null===t.stateNode)qa(e,t),sa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=Po(l):l=Pi(t,l=Ri(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==l)&&aa(t,s,r,l),Mo=!1;var d=t.memoizedState;s.state=d,qo(t,r,s,i),c=t.memoizedState,a!==r||d!==c||Ni.current||Mo?("function"===typeof u&&(ra(t,n,u,r),c=t.memoizedState),(a=Mo||oa(t,n,a,r,d,c,l))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),s.props=l,h=t.pendingProps,d=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=Po(c):c=Pi(t,c=Ri(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==c)&&aa(t,s,r,c),Mo=!1,d=t.memoizedState,s.state=d,qo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Mo?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(l=Mo||oa(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,o,i)}function xa(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Ka(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):ba(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Yo(e,t.containerInfo)}function Aa(e,t,n,r,i){return po(),mo(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Ra,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(es,1&s),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ml(c,i,0,null),e=Ll(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,c));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(s=Ll(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,ja(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(c=0!==(a&e.childLanes),wa||c){if(null!==(r=Nc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),nl(r,e,i,-1))}return ml(),ja(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Ji,Yi=e.id,$i=e.overflow,Ji=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,s,n);if(a){a=i.fallback,c=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Dl(r,a):(a=Ll(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Ma(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&mo(r),_o(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function za(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ha(t),null;case 3:return r=t.stateNode,$o(),Ti(Ni),Ti(xi),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Ra(e,t),Ha(t),null;case 5:Zo(t);var i=Jo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ha(t),null}if(e=Jo(Ho.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":ie(r,s),jr("invalid",r)}for(var c in ye(n,s),i=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,s,!0);break;case"textarea":H(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(s in ye(n,i),l=i)if(l.hasOwnProperty(s)){var u=l[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&jr("scroll",e):null!=u&&w(e,s,u,c))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Qo.current),Jo(Ho.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else null!==oo&&(sl(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Oc&&(Oc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return $o(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return xo(t.type._context),Ha(t),null;case 19:if(Ti(es),null===(s=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=s.rendering))if(r)Ga(s,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ts(e))){for(t.flags|=128,Ga(s,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>Bc&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!io)return Ha(t),null}else 2*$e()-s.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=es.current,ki(es,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $o(),Ti(Ni),Ti(xi),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ti(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(es),null;case 4:return $o(),null;case 10:return xo(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(Ho.current);var o,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),s||c===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Ya=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ec(t,n,o)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,hc=!1;function dc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=uc,i=hc;uc=null,dc(e,t,n),hc=i,null!==(uc=r)&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(uc,n.stateNode));break;case 4:r=uc,i=hc,uc=n.stateNode.containerInfo,hc=!0,dc(e,t,n),uc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ec(n,t,s),i=i.next}while(i!==r)}dc(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sl(n,t,a)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dc(e,t,n),Ya=r):dc(e,t,n);break;default:dc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(o(160));fc(s,a,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Sl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(g){Sl(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Sl(e,e.return,g)}}break;case 1:mc(t,e),vc(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(mc(t,e),vc(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&$(i,s),we(c,a);var u=we(c,s);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Sl(e,e.return,g)}}break;case 6:if(mc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Sl(e,e.return,g)}}break;case 3:if(mc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sl(e,e.return,g)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=$e())),4&r&&pc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||h,mc(t,e),Ya=u):mc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sl(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_c(d);continue}}null!==p?(p.return=f,Xa=p):_c(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Sl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(t,e),vc(e),4&r&&pc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lc(e,ac(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cc(e,ac(e),s);break;default:throw Error(o(161))}}catch(a){Sl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xa=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ja;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ya;a=Ja;var l=Ya;if(Ja=s,(Ya=c)&&!l)for(Xa=i;null!==Xa;)c=(s=Xa).child,22===s.tag&&null!==s.memoizedState?Ec(i):null!==c?(c.return=s,Xa=c):Ec(i);for(;null!==o;)Xa=o,wc(o,t,n),o=o.sibling;Xa=i,Ja=a,Ya=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xa=o):bc(e)}}function bc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ko(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ko(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(o(163))}Ya||512&t.flags&&ic(t)}catch(f){Sl(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _c(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Ec(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Sl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Sl(t,i,c)}}var o=t.return;try{ic(t)}catch(c){Sl(t,o,c)}break;case 5:var s=t.return;try{ic(t)}catch(c){Sl(t,s,c)}}}catch(c){Sl(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Ic,Sc=Math.ceil,Tc=b.ReactCurrentDispatcher,kc=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,xc=0,Nc=null,Ac=null,Pc=0,Rc=0,Dc=Si(0),Oc=0,Lc=null,Mc=0,Fc=0,Uc=0,jc=null,Vc=null,zc=0,Bc=1/0,qc=null,Kc=!1,Gc=null,Hc=null,Wc=!1,Qc=null,Jc=0,Yc=0,$c=null,Xc=-1,Zc=0;function el(){return 0!==(6&xc)?$e():-1!==Xc?Xc:Xc=$e()}function tl(e){return 0===(1&e.mode)?1:0!==(2&xc)&&0!==Pc?Pc&-Pc:null!==go.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yc)throw Yc=0,$c=null,Error(o(185));vt(e,n,r),0!==(2&xc)&&e===Nc||(e===Nc&&(0===(2&xc)&&(Fc|=n),4===Oc&&al(e,Pc)),rl(e,r),1===n&&0===xc&&0===(1&t.mode)&&(Bc=$e()+500,ji&&Bi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=i[s];-1===c?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Nc?Pc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cl.bind(null,e)):zi(cl.bind(null,e)),si((function(){0===(6&xc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Xc=-1,Zc=0,0!==(6&xc))throw Error(o(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=dt(e,e===Nc?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=xc;xc|=2;var s=pl();for(Nc===e&&Pc===t||(qc=null,Bc=$e()+500,dl(e,t));;)try{yl();break}catch(c){fl(e,c)}Co(),Tc.current=s,xc=i,null!==Ac?t=0:(Nc=null,Pc=0,t=Oc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Lc,dl(e,0),al(e,r),rl(e,$e()),n;if(6===t)al(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(s=pt(e))&&(r=s,t=ol(e,s))),1===t))throw n=Lc,dl(e,0),al(e,r),rl(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_l(e,Vc,qc);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=zc+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_l.bind(null,e,Vc,qc),t);break}_l(e,Vc,qc);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sc(r/1960))-r)){e.timeoutHandle=ri(_l.bind(null,e,Vc,qc),r);break}_l(e,Vc,qc);break;default:throw Error(o(329))}}}return rl(e,$e()),e.callbackNode===n?il.bind(null,e):null}function ol(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Vc,Vc=n,null!==t&&sl(t)),e}function sl(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function al(e,t){for(t&=~Uc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&xc))throw Error(o(327));El();var t=dt(e,0);if(0===(1&t))return rl(e,$e()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Lc,dl(e,0),al(e,t),rl(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Vc,qc),rl(e,$e()),null}function ll(e,t){var n=xc;xc|=1;try{return e(t)}finally{0===(xc=n)&&(Bc=$e()+500,ji&&Bi())}}function ul(e){null!==Qc&&0===Qc.tag&&0===(6&xc)&&El();var t=xc;xc|=1;var n=Cc.transition,r=wt;try{if(Cc.transition=null,wt=1,e)return e()}finally{wt=r,Cc.transition=n,0===(6&(xc=t))&&Bi()}}function hl(){Rc=Dc.current,Ti(Dc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ac)for(n=Ac.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:$o(),Ti(Ni),Ti(xi),rs();break;case 5:Zo(r);break;case 4:$o();break;case 13:case 19:Ti(es);break;case 10:xo(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Nc=e,Ac=e=Dl(e.current,null),Pc=Rc=t,Oc=0,Lc=null,Uc=Fc=Mc=0,Vc=jc=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ro=null}return e}function fl(e,t){for(;;){var n=Ac;try{if(Co(),is.current=Xs,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,ls=cs=as=null,hs=!1,ds=0,kc.current=null,null===n||null===n.return){Oc=1,Lc=t,Ac=null;break}e:{var s=e,a=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ma(s,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ma(s,u,t),ml();break e}l=Error(o(426))}else if(io&&1&c.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,c,0,t),mo(la(l,c));break e}}s=l=la(l,c),4!==Oc&&(Oc=2),null===jc?jc=[s]:jc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,fa(0,l,t));break e;case 1:c=l;var y=s.type,w=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,pa(s,c,t));break e}}s=s.return}while(null!==s)}bl(n)}catch(b){t=b,Ac===n&&null!==n&&(Ac=n=n.return);continue}break}}function pl(){var e=Tc.current;return Tc.current=Xs,null===e?Xs:e}function ml(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Nc||0===(268435455&Mc)&&0===(268435455&Fc)||al(Nc,Pc)}function gl(e,t){var n=xc;xc|=2;var r=pl();for(Nc===e&&Pc===t||(qc=null,dl(e,t));;)try{vl();break}catch(i){fl(e,i)}if(Co(),xc=n,Tc.current=r,null!==Ac)throw Error(o(261));return Nc=null,Pc=0,Oc}function vl(){for(;null!==Ac;)wl(Ac)}function yl(){for(;null!==Ac&&!Je();)wl(Ac)}function wl(e){var t=Ic(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?bl(e):Ac=t,kc.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Rc)))return void(Ac=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Ac=n);if(null===e)return Oc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Oc&&(Oc=5)}function _l(e,t,n){var r=wt,i=Cc.transition;try{Cc.transition=null,wt=1,function(e,t,n,r){do{El()}while(null!==Qc);if(0!==(6&xc))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Nc&&(Ac=Nc=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wc||(Wc=!0,Nl(tt,(function(){return El(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cc.transition,Cc.transition=null;var a=wt;wt=1;var c=xc;xc|=4,kc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==s||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===s&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(_){Sl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tc,tc=!1}(e,n),gc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Ye(),xc=c,wt=a,Cc.transition=s}else e.current=n;if(Wc&&(Wc=!1,Qc=e,Jc=i),s=e.pendingLanes,0===s&&(Hc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,e=Gc,Gc=null,e;0!==(1&Jc)&&0!==e.tag&&El(),s=e.pendingLanes,0!==(1&s)?e===$c?Yc++:(Yc=0,$c=e):Yc=0,Bi()}(e,t,n,r)}finally{Cc.transition=i,wt=r}return null}function El(){if(null!==Qc){var e=bt(Jc),t=Cc.transition,n=wt;try{if(Cc.transition=null,wt=16>e?16:e,null===Qc)var r=!1;else{if(e=Qc,Qc=null,Jc=0,0!==(6&xc))throw Error(o(331));var i=xc;for(xc|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nc(8,h,s)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(oc(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xa=y;break e}Xa=s.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(E){Sl(c,c.return,E)}if(c===a){Xa=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Xa=_;break e}Xa=c.return}}if(xc=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cc.transition=t}}return!1}function Il(e,t,n){e=Vo(e,t=fa(0,t=la(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Vo(t,e=pa(t,e=la(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Nc===e&&(Pc&n)===n&&(4===Oc||3===Oc&&(130023424&Pc)===Pc&&500>$e()-zc?dl(e,0):Uc|=n),rl(e,t)}function kl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Lo(e,t))&&(vt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kl(e,n)}function xl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),kl(e,n)}function Nl(e,t){return We(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Al(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Rl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Ll(n.children,i,s,t);case S:a=8,i|=8;break;case T:return(e=Pl(12,n,t,2|i)).elementType=T,e.lanes=s,e;case N:return(e=Pl(13,n,t,i)).elementType=N,e.lanes=s,e;case A:return(e=Pl(19,n,t,i)).elementType=A,e.lanes=s,e;case D:return Ml(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ll(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,o,s,a,c){return e=new jl(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function zl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bl(e,t,n,r,i,o,s,a,c){return(e=Vl(n,r,!0,e,0,o,0,a,c)).context=zl(null),n=e.current,(o=jo(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Vo(n,o,i),e.current.lanes=i,vt(e,i,r),rl(e,r),e}function ql(e,t,n,r){var i=t.current,o=el(),s=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vo(i,t,s))&&(nl(e,i,s,o),zo(e,i,s)),s}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),po();break;case 5:Xo(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Io,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(es,1&es.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Ao(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=xa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),qo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,r,n,i=la(Error(o(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=la(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&lo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Fa(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,ki(Io,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=jo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),No(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),No(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=Po(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ao(t,n),sa(t,r,i),ca(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Sa(e,t,n)}throw Error(o(156,t.tag))};var Wl="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Kl(s);a.call(e)}}ql(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kl(s);o.call(e)}}var s=Bl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),ul(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kl(c);a.call(e)}}var c=Vl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),ul((function(){ql(t,c,n,r)})),c}(n,t,e,i,r);return Kl(s)}Jl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ql(e,t,null,null)},Jl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){ql(null,e,null,null)})),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,$e()),0===(6&xc)&&(Bc=$e()+500,Bi()))}break;case 13:ul((function(){var t=Lo(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Hl(e,1)}},Et=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)nl(t,e,134217728,el());Hl(e,134217728)}},It=function(e){if(13===e.tag){var t=tl(e),n=Lo(e,t);if(null!==n)nl(n,e,t,el());Hl(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));W(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ll,Ne=ul;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ll]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yl(e))throw Error(o(299));var n=!1,r="",i=Wl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!$l(t))throw Error(o(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yl(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Wl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!$l(t))throw Error(o(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(o(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},82:(e,t)=>{"use strict";var n=60103,r=60106,i=60107,o=60108,s=60114,a=60109,c=60110,l=60112,u=60113,h=60120,d=60115,f=60116,p=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w("react.element"),r=w("react.portal"),i=w("react.fragment"),o=w("react.strict_mode"),s=w("react.profiler"),a=w("react.provider"),c=w("react.context"),l=w("react.forward_ref"),u=w("react.suspense"),h=w("react.suspense_list"),d=w("react.memo"),f=w("react.lazy"),p=w("react.block"),m=w("react.server.block"),g=w("react.fundamental"),v=w("react.debug_trace_mode"),y=w("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case f:case d:case a:return e;default:return t}}case r:return t}}}t.isForwardRef=function(e){return b(e)===l}},86:(e,t,n)=>{"use strict";e.exports=n(82)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+x(c,0):o,_(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",_(e))for(var l=0;l<e.length;l++){var u=o+x(a=e[l],l);c+=N(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=o+x(a,l++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=I.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>o(c,n))l<i&&0>o(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>o(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,D(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var o=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,I=function(){R.postMessage(null)}}else I=function(){v(A,0)};function D(e){T=e,S||(S=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,o-s))):(e.sortIndex=a,n(l,e),m||p||(m=!0,D(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var l=o[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>El,SDK_VERSION:()=>eh,_DEFAULT_ENTRY_NAME:()=>Uu,_addComponent:()=>qu,_addOrOverwriteComponent:()=>Ku,_apps:()=>Vu,_clearComponents:()=>Yu,_components:()=>Bu,_getProvider:()=>Hu,_isFirebaseApp:()=>Qu,_isFirebaseServerApp:()=>Ju,_registerComponent:()=>Gu,_removeServiceInstance:()=>Wu,_serverApps:()=>zu,deleteApp:()=>oh,getApp:()=>rh,getApps:()=>ih,initializeApp:()=>th,initializeServerApp:()=>nh,onLog:()=>ah,registerVersion:()=>sh,setLogLevel:()=>ch});var t=n(43),r=n.t(t,2),i=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}const c=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};const l=function(){this.__data__=[],this.size=0};const u=function(e,t){return e===t||e!==e&&t!==t};const h=function(e,t){for(var n=e.length;n--;)if(u(e[n][0],t))return n;return-1};var d=Array.prototype.splice;const f=function(e){var t=this.__data__,n=h(t,e);return!(n<0)&&(n==t.length-1?t.pop():d.call(t,n,1),--this.size,!0)};const p=function(e){var t=this.__data__,n=h(t,e);return n<0?void 0:t[n][1]};const m=function(e){return h(this.__data__,e)>-1};const g=function(e,t){var n=this.__data__,r=h(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function v(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}v.prototype.clear=l,v.prototype.delete=f,v.prototype.get=p,v.prototype.has=m,v.prototype.set=g;const y=v;const w=function(){this.__data__=new y,this.size=0};const b=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const _=function(e){return this.__data__.get(e)};const E=function(e){return this.__data__.has(e)};const I="object"==typeof global&&global&&global.Object===Object&&global;var S="object"==typeof self&&self&&self.Object===Object&&self;const T=I||S||Function("return this")();const k=T.Symbol;var C=Object.prototype,x=C.hasOwnProperty,N=C.toString,A=k?k.toStringTag:void 0;const P=function(e){var t=x.call(e,A),n=e[A];try{e[A]=void 0;var r=!0}catch(o){}var i=N.call(e);return r&&(t?e[A]=n:delete e[A]),i};var R=Object.prototype.toString;const D=function(e){return R.call(e)};var O=k?k.toStringTag:void 0;const L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?P(e):D(e)};const M=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const F=function(e){if(!M(e))return!1;var t=L(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const U=T["__core-js_shared__"];var j=function(){var e=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const V=function(e){return!!j&&j in e};var z=Function.prototype.toString;const B=function(e){if(null!=e){try{return z.call(e)}catch(t){}try{return e+""}catch(t){}}return""};var q=/^\[object .+?Constructor\]$/,K=Function.prototype,G=Object.prototype,H=K.toString,W=G.hasOwnProperty,Q=RegExp("^"+H.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const J=function(e){return!(!M(e)||V(e))&&(F(e)?Q:q).test(B(e))};const Y=function(e,t){return null==e?void 0:e[t]};const $=function(e,t){var n=Y(e,t);return J(n)?n:void 0};const X=$(T,"Map");const Z=$(Object,"create");const ee=function(){this.__data__=Z?Z(null):{},this.size=0};const te=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var ne=Object.prototype.hasOwnProperty;const re=function(e){var t=this.__data__;if(Z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(t,e)?t[e]:void 0};var ie=Object.prototype.hasOwnProperty;const oe=function(e){var t=this.__data__;return Z?void 0!==t[e]:ie.call(t,e)};const se=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Z&&void 0===t?"__lodash_hash_undefined__":t,this};function ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ae.prototype.clear=ee,ae.prototype.delete=te,ae.prototype.get=re,ae.prototype.has=oe,ae.prototype.set=se;const ce=ae;const le=function(){this.size=0,this.__data__={hash:new ce,map:new(X||y),string:new ce}};const ue=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const he=function(e,t){var n=e.__data__;return ue(t)?n["string"==typeof t?"string":"hash"]:n.map};const de=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t};const fe=function(e){return he(this,e).get(e)};const pe=function(e){return he(this,e).has(e)};const me=function(e,t){var n=he(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ge.prototype.clear=le,ge.prototype.delete=de,ge.prototype.get=fe,ge.prototype.has=pe,ge.prototype.set=me;const ve=ge;const ye=function(e,t){var n=this.__data__;if(n instanceof y){var r=n.__data__;if(!X||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(r)}return n.set(e,t),this.size=n.size,this};function we(e){var t=this.__data__=new y(e);this.size=t.size}we.prototype.clear=w,we.prototype.delete=b,we.prototype.get=_,we.prototype.has=E,we.prototype.set=ye;const be=we;const _e=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const Ee=function(e){return this.__data__.has(e)};function Ie(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ve;++t<n;)this.add(e[t])}Ie.prototype.add=Ie.prototype.push=_e,Ie.prototype.has=Ee;const Se=Ie;const Te=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const ke=function(e,t){return e.has(t)};const Ce=function(e,t,n,r,i,o){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var h=-1,d=!0,f=2&n?new Se:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var p=e[h],m=t[h];if(r)var g=s?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Te(t,(function(e,t){if(!ke(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d};const xe=T.Uint8Array;const Ne=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const Ae=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var Pe=k?k.prototype:void 0,Re=Pe?Pe.valueOf:void 0;const De=function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new xe(e),new xe(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return u(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Ne;case"[object Set]":var c=1&r;if(a||(a=Ae),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;r|=2,s.set(e,t);var h=Ce(a(e),a(t),r,i,o,s);return s.delete(e),h;case"[object Symbol]":if(Re)return Re.call(e)==Re.call(t)}return!1};const Oe=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};const Le=Array.isArray;const Me=function(e,t,n){var r=t(e);return Le(e)?r:Oe(r,n(e))};const Fe=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o};const Ue=function(){return[]};var je=Object.prototype.propertyIsEnumerable,Ve=Object.getOwnPropertySymbols;const ze=Ve?function(e){return null==e?[]:(e=Object(e),Fe(Ve(e),(function(t){return je.call(e,t)})))}:Ue;const Be=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const qe=function(e){return null!=e&&"object"==typeof e};const Ke=function(e){return qe(e)&&"[object Arguments]"==L(e)};var Ge=Object.prototype,He=Ge.hasOwnProperty,We=Ge.propertyIsEnumerable;const Qe=Ke(function(){return arguments}())?Ke:function(e){return qe(e)&&He.call(e,"callee")&&!We.call(e,"callee")};const Je=function(){return!1};var Ye="object"==typeof exports&&exports&&!exports.nodeType&&exports,$e=Ye&&"object"==typeof module&&module&&!module.nodeType&&module,Xe=$e&&$e.exports===Ye?T.Buffer:void 0;const Ze=(Xe?Xe.isBuffer:void 0)||Je;var et=/^(?:0|[1-9]\d*)$/;const tt=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&et.test(e))&&e>-1&&e%1==0&&e<t};const nt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var rt={};rt["[object Float32Array]"]=rt["[object Float64Array]"]=rt["[object Int8Array]"]=rt["[object Int16Array]"]=rt["[object Int32Array]"]=rt["[object Uint8Array]"]=rt["[object Uint8ClampedArray]"]=rt["[object Uint16Array]"]=rt["[object Uint32Array]"]=!0,rt["[object Arguments]"]=rt["[object Array]"]=rt["[object ArrayBuffer]"]=rt["[object Boolean]"]=rt["[object DataView]"]=rt["[object Date]"]=rt["[object Error]"]=rt["[object Function]"]=rt["[object Map]"]=rt["[object Number]"]=rt["[object Object]"]=rt["[object RegExp]"]=rt["[object Set]"]=rt["[object String]"]=rt["[object WeakMap]"]=!1;const it=function(e){return qe(e)&&nt(e.length)&&!!rt[L(e)]};const ot=function(e){return function(t){return e(t)}};var st="object"==typeof exports&&exports&&!exports.nodeType&&exports,at=st&&"object"==typeof module&&module&&!module.nodeType&&module,ct=at&&at.exports===st&&I.process,lt=function(){try{var e=at&&at.require&&at.require("util").types;return e||ct&&ct.binding&&ct.binding("util")}catch(t){}}();var ut=lt&&lt.isTypedArray;const ht=ut?ot(ut):it;var dt=Object.prototype.hasOwnProperty;const ft=function(e,t){var n=Le(e),r=!n&&Qe(e),i=!n&&!r&&Ze(e),o=!n&&!r&&!i&&ht(e),s=n||r||i||o,a=s?Be(e.length,String):[],c=a.length;for(var l in e)!t&&!dt.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||tt(l,c))||a.push(l);return a};var pt=Object.prototype;const mt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pt)};const gt=function(e,t){return function(n){return e(t(n))}};const vt=gt(Object.keys,Object);var yt=Object.prototype.hasOwnProperty;const wt=function(e){if(!mt(e))return vt(e);var t=[];for(var n in Object(e))yt.call(e,n)&&"constructor"!=n&&t.push(n);return t};const bt=function(e){return null!=e&&nt(e.length)&&!F(e)};const _t=function(e){return bt(e)?ft(e):wt(e)};const Et=function(e){return Me(e,_t,ze)};var It=Object.prototype.hasOwnProperty;const St=function(e,t,n,r,i,o){var s=1&n,a=Et(e),c=a.length;if(c!=Et(t).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in t:It.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=s;++l<c;){var m=e[u=a[l]],g=t[u];if(r)var v=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(e),o.delete(t),f};const Tt=$(T,"DataView");const kt=$(T,"Promise");const Ct=$(T,"Set");const xt=$(T,"WeakMap");var Nt="[object Map]",At="[object Promise]",Pt="[object Set]",Rt="[object WeakMap]",Dt="[object DataView]",Ot=B(Tt),Lt=B(X),Mt=B(kt),Ft=B(Ct),Ut=B(xt),jt=L;(Tt&&jt(new Tt(new ArrayBuffer(1)))!=Dt||X&&jt(new X)!=Nt||kt&&jt(kt.resolve())!=At||Ct&&jt(new Ct)!=Pt||xt&&jt(new xt)!=Rt)&&(jt=function(e){var t=L(e),n="[object Object]"==t?e.constructor:void 0,r=n?B(n):"";if(r)switch(r){case Ot:return Dt;case Lt:return Nt;case Mt:return At;case Ft:return Pt;case Ut:return Rt}return t});const Vt=jt;var zt="[object Arguments]",Bt="[object Array]",qt="[object Object]",Kt=Object.prototype.hasOwnProperty;const Gt=function(e,t,n,r,i,o){var s=Le(e),a=Le(t),c=s?Bt:Vt(e),l=a?Bt:Vt(t),u=(c=c==zt?qt:c)==qt,h=(l=l==zt?qt:l)==qt,d=c==l;if(d&&Ze(e)){if(!Ze(t))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new be),s||ht(e)?Ce(e,t,n,r,i,o):De(e,t,c,n,r,i,o);if(!(1&n)){var f=u&&Kt.call(e,"__wrapped__"),p=h&&Kt.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return o||(o=new be),i(m,g,n,r,o)}}return!!d&&(o||(o=new be),St(e,t,n,r,i,o))};const Ht=function e(t,n,r,i,o){return t===n||(null==t||null==n||!qe(t)&&!qe(n)?t!==t&&n!==n:Gt(t,n,r,i,e,o))};const Wt=function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var c=(a=n[i])[0],l=e[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in e))return!1}else{var h=new be;if(r)var d=r(l,u,c,e,t,h);if(!(void 0===d?Ht(u,l,3,r,h):d))return!1}}return!0};const Qt=function(e){return e===e&&!M(e)};const Jt=function(e){for(var t=_t(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Qt(i)]}return t};const Yt=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const $t=function(e){var t=Jt(e);return 1==t.length&&t[0][2]?Yt(t[0][0],t[0][1]):function(n){return n===e||Wt(n,e,t)}};const Xt=function(e){return"symbol"==typeof e||qe(e)&&"[object Symbol]"==L(e)};var Zt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;const tn=function(e,t){if(Le(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xt(e))||(en.test(e)||!Zt.test(e)||null!=t&&e in Object(t))};function nn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(nn.Cache||ve),n}nn.Cache=ve;const rn=nn;var on=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sn=/\\(\\)?/g;const an=function(e){var t=rn(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(on,(function(e,n,r,i){t.push(r?i.replace(sn,"$1"):n||e)})),t}));var cn=k?k.prototype:void 0,ln=cn?cn.toString:void 0;const un=function e(t){if("string"==typeof t)return t;if(Le(t))return c(t,e)+"";if(Xt(t))return ln?ln.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const hn=function(e){return null==e?"":un(e)};const dn=function(e,t){return Le(e)?e:tn(e,t)?[e]:an(hn(e))};const fn=function(e){if("string"==typeof e||Xt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};const pn=function(e,t){for(var n=0,r=(t=dn(t,e)).length;null!=e&&n<r;)e=e[fn(t[n++])];return n&&n==r?e:void 0};const mn=function(e,t,n){var r=null==e?void 0:pn(e,t);return void 0===r?n:r};const gn=function(e,t){return null!=e&&t in Object(e)};const vn=function(e,t,n){for(var r=-1,i=(t=dn(t,e)).length,o=!1;++r<i;){var s=fn(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&nt(i)&&tt(s,i)&&(Le(e)||Qe(e))};const yn=function(e,t){return null!=e&&vn(e,t,gn)};const wn=function(e,t){return tn(e)&&Qt(t)?Yt(fn(e),t):function(n){var r=mn(n,e);return void 0===r&&r===t?yn(n,e):Ht(t,r,3)}};const bn=function(e){return e};const _n=function(e){return function(t){return null==t?void 0:t[e]}};const En=function(e){return function(t){return pn(t,e)}};const In=function(e){return tn(e)?_n(fn(e)):En(e)};const Sn=function(e){return"function"==typeof e?e:null==e?bn:"object"==typeof e?Le(e)?wn(e[0],e[1]):$t(e):In(e)};const Tn=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}();const kn=function(e,t){return function(n,r){if(null==n)return n;if(!bt(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}};const Cn=kn((function(e,t){return e&&Tn(e,t,_t)}));const xn=function(e,t){var n=-1,r=bt(e)?Array(e.length):[];return Cn(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};const Nn=function(e,t){return(Le(e)?c:xn)(e,Sn(t,3))};const An=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};const Pn=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const Rn=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};const Dn=function(e,t){return t.length<2?e:pn(e,Rn(t,0,-1))};const On=function(e,t,n){t=dn(t,e);var r=null==(e=Dn(e,t))?e:e[fn(Pn(t))];return null==r?void 0:An(r,e,n)};var Ln=Math.max;const Mn=function(e,t,n){return t=Ln(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Ln(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),An(e,this,a)}};const Fn=function(e){return function(){return e}};const Un=function(){try{var e=$(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const jn=Un?function(e,t){return Un(e,"toString",{configurable:!0,enumerable:!1,value:Fn(t),writable:!0})}:bn;var Vn=Date.now;const zn=function(e){var t=0,n=0;return function(){var r=Vn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const Bn=zn(jn);const qn=function(e,t){return Bn(Mn(e,t,bn),e+"")};const Kn=qn(On);function Gn(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Gn(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Hn=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Gn(e))&&(r&&(r+=" "),r+=t);return r};var Wn={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function Qn(e){var t=typeof e;return"string"===t||"number"===t?Wn[e]||e:""}var Jn=function(e,t){return e&&t},Yn=function(e,t){return e&&!0!==e&&e+" "+t},$n=function(e,t){return e&&(!0===e?t:e+" "+t)},Xn=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},Zn=function(e){return"justified"===e?"justified":Yn(e,"aligned")},er=function(e){return Yn(e,"aligned")},tr=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?Qn(e):Qn(e)+" "+t};const nr=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};const rr=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var o=n();if(o)return o}return t.href?"a":i.as||"div"};const ir=function(e,t){var n;return Cn(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};const or=function(e,t,n){if(!M(n))return!1;var r=typeof t;return!!("number"==r?bt(n)&&tt(t,n.length):"string"==r&&t in n)&&u(n[t],e)};const sr=function(e,t,n){var r=Le(e)?Te:ir;return n&&or(e,t,n)&&(t=void 0),r(e,Sn(t,3))};var ar=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};const cr=function(e){return void 0===e};var lr=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=(t=e.call.apply(e,[this].concat(r))||this).constructor,a=s.autoControlledProps,c=s.getAutoControlledStateFromProps,l=Kn(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),"getInitialAutoControlledState",t.props)||{},u=a.reduce((function(e,n){return e[n]=function(e,t,n,r){void 0===r&&(r=!1);var i,o=t[e];if(void 0!==o)return o;if(r){var s=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==s)return s;if(n){var a=n[e];if(void 0!==a)return a}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(n,t.props,l,!0),e}),{});return t.state=o({},l,u,{autoControlledProps:a,getAutoControlledStateFromProps:c}),t}return a(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!cr(e[n])&&(t[n]=e[n]),t}),{});if(r){var s=r(e,o({},t,i),t);return o({},i,s)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(t.Component);const ur=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};const hr=function(e){return e!==e};const dr=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};const fr=function(e,t,n){return t===t?dr(e,t,n):ur(e,hr,n)};const pr=function(e,t){return!!(null==e?0:e.length)&&fr(e,t,0)>-1};const mr=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};const gr=function(){};var vr=Ct&&1/Ae(new Ct([,-0]))[1]==1/0?function(e){return new Ct(e)}:gr;const yr=vr;const wr=function(e,t,n){var r=-1,i=pr,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=mr;else if(o>=200){var l=t?null:yr(e);if(l)return Ae(l);s=!1,i=ke,c=new Se}else c=t?[]:a;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,s&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(u)}else i(c,h,n)||(c!==a&&c.push(h),a.push(u))}return a};const br=function(e){return e&&e.length?wr(e):[]};const _r=gt(Object.getPrototypeOf,Object);var Er=Function.prototype,Ir=Object.prototype,Sr=Er.toString,Tr=Ir.hasOwnProperty,kr=Sr.call(Object);const Cr=function(e){if(!qe(e)||"[object Object]"!=L(e))return!1;var t=_r(e);if(null===t)return!0;var n=Tr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Sr.call(n)==kr};const xr=function(e){return"number"==typeof e||qe(e)&&"[object Number]"==L(e)};const Nr=function(e){return"string"==typeof e||!Le(e)&&qe(e)&&"[object String]"==L(e)};const Ar=function(e){return!0===e||!1===e||qe(e)&&"[object Boolean]"==L(e)};const Pr=function(e){return null==e};function Rr(e,n,r,i){if(void 0===i&&(i={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(Pr(r)||Ar(r))return null;var s=Nr(r),a=xr(r),c=F(r),l=t.isValidElement(r),u=Cr(r),h=s||a||Le(r);if(!c&&!l&&!u&&!h)return null;var d=i.defaultProps,f=void 0===d?{}:d,p=l&&r.props||u&&r||h&&n(r),m=i.overrideProps,g=void 0===m?{}:m;g=F(g)?g(o({},f,p)):g;var v=o({},f,p,g);if(f.className||g.className||p.className){var y=Hn(f.className,g.className,p.className);v.className=br(y.split(" ")).join(" ")}if((f.style||g.style||p.style)&&(v.style=o({},f.style,p.style,g.style)),Pr(v.key)){var w=v.childKey,b=i.autoGenerateKey,_=void 0===b||b;Pr(w)?_&&(s||a)&&(v.key=r):(v.key="function"===typeof w?w(v):w,delete v.childKey)}return l?t.cloneElement(r,v):"function"===typeof v.children?v.children(e,o({},v,{children:void 0})):h||u?t.createElement(e,v):c?r(e,v,v.children):void 0}function Dr(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return Rr(e,t,n,r)}}var Or=Dr("img",(function(e){return{src:e}})),Lr=Dr("input",(function(e){return{type:e}})),Mr=Dr("label",(function(e){return{children:e}})),Fr=Dr("p",(function(e){return{children:e}}));function Ur(e){var n=e.children,r=e.className,i=e.content,s=Hn("header",r),a=nr(Ur,e),c=rr(Ur,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}Ur.handledProps=["as","children","className","content"],Ur.propTypes={};const jr=Ur;const Vr=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n};const zr=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});var Br=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qr=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const Kr=function(e){return(e=hn(e))&&e.replace(Br,zr).replace(qr,"")};var Gr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const Hr=function(e){return e.match(Gr)||[]};var Wr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const Qr=function(e){return Wr.test(e)};var Jr="\\ud800-\\udfff",Yr="\\u2700-\\u27bf",$r="a-z\\xdf-\\xf6\\xf8-\\xff",Xr="A-Z\\xc0-\\xd6\\xd8-\\xde",Zr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ei="["+Zr+"]",ti="\\d+",ni="["+Yr+"]",ri="["+$r+"]",ii="[^"+Jr+Zr+ti+Yr+$r+Xr+"]",oi="(?:\\ud83c[\\udde6-\\uddff]){2}",si="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="["+Xr+"]",ci="(?:"+ri+"|"+ii+")",li="(?:"+ai+"|"+ii+")",ui="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",hi="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",di="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fi="[\\ufe0e\\ufe0f]?",pi=fi+di+("(?:\\u200d(?:"+["[^"+Jr+"]",oi,si].join("|")+")"+fi+di+")*"),mi="(?:"+[ni,oi,si].join("|")+")"+pi,gi=RegExp([ai+"?"+ri+"+"+ui+"(?="+[ei,ai,"$"].join("|")+")",li+"+"+hi+"(?="+[ei,ai+ci,"$"].join("|")+")",ai+"?"+ci+"+"+ui,ai+"+"+hi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ti,mi].join("|"),"g");const vi=function(e){return e.match(gi)||[]};const yi=function(e,t,n){return e=hn(e),void 0===(t=n?void 0:t)?Qr(e)?vi(e):Hr(e):e.match(t)||[]};var wi=RegExp("['\u2019]","g");const bi=function(e){return function(t){return Vr(yi(Kr(t).replace(wi,"")),e,"")}};const _i=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Rn(e,t,n)};var Ei=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Ii=function(e){return Ei.test(e)};const Si=function(e){return e.split("")};var Ti="\\ud800-\\udfff",ki="["+Ti+"]",Ci="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",xi="\\ud83c[\\udffb-\\udfff]",Ni="[^"+Ti+"]",Ai="(?:\\ud83c[\\udde6-\\uddff]){2}",Pi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ri="(?:"+Ci+"|"+xi+")"+"?",Di="[\\ufe0e\\ufe0f]?",Oi=Di+Ri+("(?:\\u200d(?:"+[Ni,Ai,Pi].join("|")+")"+Di+Ri+")*"),Li="(?:"+[Ni+Ci+"?",Ci,Ai,Pi,ki].join("|")+")",Mi=RegExp(xi+"(?="+xi+")|"+Li+Oi,"g");const Fi=function(e){return e.match(Mi)||[]};const Ui=function(e){return Ii(e)?Fi(e):Si(e)};const ji=function(e){return function(t){t=hn(t);var n=Ii(t)?Ui(t):void 0,r=n?n[0]:t.charAt(0),i=n?_i(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase");const Vi=bi((function(e,t,n){return e+(n?" ":"")+ji(t)}));function zi(e){var n=e.children,r=e.className,i=e.content,s=e.size,a=Hn(s,"icons",r),c=nr(zi,e),l=rr(zi,e);return t.createElement(l,o({},c,{className:a}),ar(n)?i:n)}zi.handledProps=["as","children","className","content","size"],zi.propTypes={},zi.defaultProps={as:"i"};const Bi=zi;var qi=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():Kn(t.props,"onClick",e,t.props)},t}a(n,e);var r=n.prototype;return r.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return Pr(n)?e["aria-hidden"]="true":e["aria-label"]=n,Pr(r)||(e["aria-hidden"]=r),e},r.render=function(){var e=this.props,r=e.bordered,i=e.circular,s=e.className,a=e.color,c=e.corner,l=e.disabled,u=e.fitted,h=e.flipped,d=e.inverted,f=e.link,p=e.loading,m=e.name,g=e.rotated,v=e.size,y=Hn(a,m,v,Jn(r,"bordered"),Jn(i,"circular"),Jn(l,"disabled"),Jn(u,"fitted"),Jn(d,"inverted"),Jn(f,"link"),Jn(p,"loading"),$n(c,"corner"),Yn(h,"flipped"),Yn(g,"rotated"),"icon",s),w=nr(n,this.props),b=rr(n,this.props),_=this.getIconAriaOptions();return t.createElement(b,o({},w,_,{className:y,onClick:this.handleClick}))},n}(t.PureComponent);qi.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],qi.propTypes={},qi.defaultProps={as:"i"},qi.Group=Bi,qi.create=Dr(qi,(function(e){return{name:e}}));const Ki=qi;var Gi=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Kn(t.props,"onClick",e,t.props)},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.children,s=e.className,a=e.color,c=e.content,l=e.disabled,u=e.fitted,h=e.header,d=e.icon,f=e.link,p=e.name,m=e.onClick,g=e.position,v=Hn(a,g,Jn(r,"active"),Jn(l,"disabled"),Jn(!0===d||d&&!(p||c),"icon"),Jn(h,"header"),Jn(f,"link"),$n(u,"fitted"),"item",s),y=rr(n,this.props,(function(){if(m)return"a"})),w=nr(n,this.props);return ar(i)?t.createElement(y,o({},w,{className:v,onClick:this.handleClick}),Ki.create(d,{autoGenerateKey:!1}),ar(c)?Vi(p):c):t.createElement(y,o({},w,{className:v,onClick:this.handleClick}),i)},n}(t.Component);function Hi(e){var n=e.children,r=e.className,i=e.content,s=e.position,a=Hn(s,"menu",r),c=nr(Hi,e),l=rr(Hi,e);return t.createElement(l,o({},c,{className:a}),ar(n)?i:n)}Gi.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],Gi.propTypes={},Gi.create=Dr(Gi,(function(e){return{content:e,name:e}})),Hi.handledProps=["as","children","className","content","position"],Hi.propTypes={};const Wi=Hi;var Qi=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),Kn(e,"onClick",n,r),Kn(t.props,"onItemClick",n,r)}}},t}a(n,e);var r=n.prototype;return r.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return Nn(t,(function(t,r){return Gi.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},r.render=function(){var e=this.props,r=e.attached,i=e.borderless,s=e.children,a=e.className,c=e.color,l=e.compact,u=e.fixed,h=e.floated,d=e.fluid,f=e.icon,p=e.inverted,m=e.pagination,g=e.pointing,v=e.secondary,y=e.size,w=e.stackable,b=e.tabular,_=e.text,E=e.vertical,I=e.widths,S=Hn("ui",c,y,Jn(i,"borderless"),Jn(l,"compact"),Jn(d,"fluid"),Jn(p,"inverted"),Jn(m,"pagination"),Jn(g,"pointing"),Jn(v,"secondary"),Jn(w,"stackable"),Jn(_,"text"),Jn(E,"vertical"),$n(r,"attached"),$n(h,"floated"),$n(f,"icon"),$n(b,"tabular"),Yn(u,"fixed"),tr(I,"item"),a,"menu"),T=nr(n,this.props),k=rr(n,this.props);return t.createElement(k,o({},T,{className:S}),ar(s)?this.renderItems():s)},n}(lr);Qi.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],Qi.propTypes={},Qi.autoControlledProps=["activeIndex"],Qi.Header=jr,Qi.Item=Gi,Qi.Menu=Wi,Qi.create=Dr(Qi,(function(e){return{items:e}}));const Ji=Qi;function Yi(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var $i=Object.prototype.hasOwnProperty;const Xi=function(e){if(null==e)return!0;if(bt(e)&&(Le(e)||"string"==typeof e||"function"==typeof e.splice||Ze(e)||ht(e)||Qe(e)))return!e.length;var t=Vt(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(mt(e))return!wt(e).length;for(var n in e)if($i.call(e,n))return!1;return!0};const Zi=xt&&new xt;const eo=Zi?function(e,t){return Zi.set(e,t),e}:bn;var to=Object.create;const no=function(){function e(){}return function(t){if(!M(t))return{};if(to)return to(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const ro=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=no(e.prototype),r=e.apply(n,t);return M(r)?r:n}};const io=function(e,t,n){var r=1&t,i=ro(e);return function t(){return(this&&this!==T&&this instanceof t?i:e).apply(r?n:this,arguments)}};var oo=Math.max;const so=function(e,t,n,r){for(var i=-1,o=e.length,s=n.length,a=-1,c=t.length,l=oo(o-s,0),u=Array(c+l),h=!r;++a<c;)u[a]=t[a];for(;++i<s;)(h||i<o)&&(u[n[i]]=e[i]);for(;l--;)u[a++]=e[i++];return u};var ao=Math.max;const co=function(e,t,n,r){for(var i=-1,o=e.length,s=-1,a=n.length,c=-1,l=t.length,u=ao(o-a,0),h=Array(u+l),d=!r;++i<u;)h[i]=e[i];for(var f=i;++c<l;)h[f+c]=t[c];for(;++s<a;)(d||i<o)&&(h[f+n[s]]=e[i++]);return h};const lo=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};const uo=function(){};function ho(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}ho.prototype=no(uo.prototype),ho.prototype.constructor=ho;const fo=ho;const po=Zi?function(e){return Zi.get(e)}:gr;const mo={};var go=Object.prototype.hasOwnProperty;const vo=function(e){for(var t=e.name+"",n=mo[t],r=go.call(mo,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t};function yo(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}yo.prototype=no(uo.prototype),yo.prototype.constructor=yo;const wo=yo;const bo=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const _o=function(e){if(e instanceof fo)return e.clone();var t=new wo(e.__wrapped__,e.__chain__);return t.__actions__=bo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t};var Eo=Object.prototype.hasOwnProperty;function Io(e){if(qe(e)&&!Le(e)&&!(e instanceof fo)){if(e instanceof wo)return e;if(Eo.call(e,"__wrapped__"))return _o(e)}return new wo(e)}Io.prototype=uo.prototype,Io.prototype.constructor=Io;const So=Io;const To=function(e){var t=vo(e),n=So[t];if("function"!=typeof n||!(t in fo.prototype))return!1;if(e===n)return!0;var r=po(n);return!!r&&e===r[0]};const ko=zn(eo);var Co=/\{\n\/\* \[wrapped with (.+)\] \*/,xo=/,? & /;const No=function(e){var t=e.match(Co);return t?t[1].split(xo):[]};var Ao=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;const Po=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ao,"{\n/* [wrapped with "+t+"] */\n")};const Ro=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var Do=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const Oo=function(e,t){return Ro(Do,(function(n){var r="_."+n[0];t&n[1]&&!pr(e,r)&&e.push(r)})),e.sort()};const Lo=function(e,t,n){var r=t+"";return Bn(e,Po(r,Oo(No(r),n)))};const Mo=function(e,t,n,r,i,o,s,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,i,u?o:void 0,u?s:void 0,u?void 0:o,u?void 0:s,a,c,l],d=n.apply(void 0,h);return To(e)&&ko(d,h),d.placeholder=r,Lo(d,e,t)};const Fo=function(e){return e.placeholder};var Uo=Math.min;const jo=function(e,t){for(var n=e.length,r=Uo(t.length,n),i=bo(e);r--;){var o=t[r];e[r]=tt(o,n)?i[o]:void 0}return e};var Vo="__lodash_placeholder__";const zo=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==Vo||(e[n]=Vo,o[i++]=n)}return o};const Bo=function e(t,n,r,i,o,s,a,c,l,u){var h=128&n,d=1&n,f=2&n,p=24&n,m=512&n,g=f?void 0:ro(t);return function v(){for(var y=arguments.length,w=Array(y),b=y;b--;)w[b]=arguments[b];if(p)var _=Fo(v),E=lo(w,_);if(i&&(w=so(w,i,o,p)),s&&(w=co(w,s,a,p)),y-=E,p&&y<u){var I=zo(w,_);return Mo(t,n,e,v.placeholder,r,w,I,c,l,u-y)}var S=d?r:this,k=f?S[t]:t;return y=w.length,c?w=jo(w,c):m&&y>1&&w.reverse(),h&&l<y&&(w.length=l),this&&this!==T&&this instanceof v&&(k=g||ro(k)),k.apply(S,w)}};const qo=function(e,t,n){var r=ro(e);return function i(){for(var o=arguments.length,s=Array(o),a=o,c=Fo(i);a--;)s[a]=arguments[a];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:zo(s,c);return(o-=l.length)<n?Mo(e,t,Bo,i.placeholder,void 0,s,l,void 0,void 0,n-o):An(this&&this!==T&&this instanceof i?r:e,this,s)}};const Ko=function(e,t,n,r){var i=1&t,o=ro(e);return function t(){for(var s=-1,a=arguments.length,c=-1,l=r.length,u=Array(l+a),h=this&&this!==T&&this instanceof t?o:e;++c<l;)u[c]=r[c];for(;a--;)u[c++]=arguments[++s];return An(h,i?n:this,u)}};var Go="__lodash_placeholder__",Ho=128,Wo=Math.min;const Qo=function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==Ho&&8==n||r==Ho&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var c=e[3];e[3]=c?so(c,a,t[4]):a,e[4]=c?zo(e[3],Go):t[4]}return(a=t[5])&&(c=e[5],e[5]=c?co(c,a,t[6]):a,e[6]=c?zo(e[5],Go):t[6]),(a=t[7])&&(e[7]=a),r&Ho&&(e[8]=null==e[8]?t[8]:Wo(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e};var Jo=/\s/;const Yo=function(e){for(var t=e.length;t--&&Jo.test(e.charAt(t)););return t};var $o=/^\s+/;const Xo=function(e){return e?e.slice(0,Yo(e)+1).replace($o,""):e};var Zo=/^[-+]0x[0-9a-f]+$/i,es=/^0b[01]+$/i,ts=/^0o[0-7]+$/i,ns=parseInt;const rs=function(e){if("number"==typeof e)return e;if(Xt(e))return NaN;if(M(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=M(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xo(e);var n=es.test(e);return n||ts.test(e)?ns(e.slice(2),n?2:8):Zo.test(e)?NaN:+e};var is=1/0;const os=function(e){return e?(e=rs(e))===is||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};const ss=function(e){var t=os(e),n=t%1;return t===t?n?t-n:t:0};var as=Math.max;const cs=function(e,t,n,r,i,o,s,a){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var l=r?r.length:0;if(l||(t&=-97,r=i=void 0),s=void 0===s?s:as(ss(s),0),a=void 0===a?a:ss(a),l-=i?i.length:0,64&t){var u=r,h=i;r=i=void 0}var d=c?void 0:po(e),f=[e,t,n,r,i,u,h,o,s,a];if(d&&Qo(f,d),e=f[0],t=f[1],n=f[2],r=f[3],i=f[4],!(a=f[9]=void 0===f[9]?c?0:e.length:as(f[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?qo(e,t,a):32!=t&&33!=t||i.length?Bo.apply(void 0,f):Ko(e,t,n,r);else var p=io(e,t,n);return Lo((d?eo:ko)(p,f),e,t)};var ls=qn((function(e,t){var n=zo(t,Fo(ls));return cs(e,64,void 0,t,n)}));ls.placeholder={};const us=ls;var hs=Math.max,ds=Math.min;const fs=function(e,t,n){return e>=ds(t,n)&&e<hs(t,n)};const ps=function(e,t,n){return t=os(t),void 0===n?(n=t,t=0):n=os(n),e=rs(e),fs(e,t,n)};const ms=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n};const gs=function(e,t,n){var r=Le(e)?Vr:ms,i=arguments.length<3;return r(e,Sn(t,4),n,i,Cn)};var vs=n(90),ys=n.n(vs),ws=n(324),bs=n.n(ws),_s=n(173),Es=n.n(_s);const Is=_s.instance;var Ss="object"===typeof document&&null!==document,Ts="object"===typeof window&&null!==window&&window.self===window;const ks=function e(){return Pr(e.override)?Ss&&Ts:e.override};const Cs=function(e,t){return c(t,(function(t){return e[t]}))};const xs=function(e){return null==e?[]:Cs(e,_t(e))};var Ns=Math.max;const As=function(e,t,n,r){e=bt(e)?e:xs(e),n=n&&!r?ss(n):0;var i=e.length;return n<0&&(n=Ns(i+n,0)),Nr(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&fr(e,t,n)>-1};const Ps=function(e){return"function"==typeof e?e:bn};const Rs=function(e,t){return(Le(e)?Ro:Cn)(e,Ps(t))};var Ds=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],Os=[].concat(Ds,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),Ls=["alt","height","src","srcSet","width","loading"],Ms=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?Os:r,o=n.includeAria,s=void 0===o||o,a={},c={};return Rs(e,(function(e,t){var n=s&&(/^aria-.*$/.test(t)||"role"===t);(As(i,t)||n?a:c)[t]=e})),[a,c]},Fs=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)},Us=function(e){return null!==e&&"object"===typeof e&&e.hasOwnProperty("current")},js=n(904),Vs=n(950),zs=n.t(Vs,2);var Bs=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}a(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=Vs.findDOMNode(this);this.prevNode=e,Fs(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=Vs.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,Fs(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&Fs(this.props.innerRef,t)},n.componentWillUnmount=function(){Fs(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(t.Component),qs=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;Fs(r.ref,e),Fs(i,e),t.currentNode=e},t}a(n,e);var r=n.prototype;return r.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&Fs(this.props.innerRef,this.currentNode)},r.componentWillUnmount=function(){delete this.currentNode},r.render=function(){var e=this.props.children;return t.cloneElement(e,{ref:this.handleRefOverride})},n}(t.Component),Ks=["children","innerRef"],Gs=function(e){var n=e.children,r=e.innerRef,i=Yi(e,Ks),o=t.Children.only(n),s=js.isForwardRef(o)?qs:Bs,a=o&&i&&Object.keys(i).length>0?t.cloneElement(o,i):o;return t.createElement(s,{innerRef:r},a)};const Hs=function(e){return e&&e.length?e[0]:void 0};const Ws=function(e,t){if(sr([t,e],Pr))return!1;if(t.target&&(Kn(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return Kn(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(sr([n,r],Pr))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var o=Hs(i),s=o.top,a=o.bottom,c=o.left,l=o.right;return!sr([s,a,c,l],Pr)&&(ps(r,s,a+.001)&&ps(n,c,l+.001))};var Qs=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){Fs(t.props.innerRef,e)},t}a(n,e);var r=n.prototype;return r.componentDidMount=function(){Kn(this.props,"onMount",null,this.props)},r.componentWillUnmount=function(){Kn(this.props,"onUnmount",null,this.props)},r.render=function(){if(!ks())return null;var e=this.props,n=e.children,r=e.mountNode,i=void 0===r?document.body:r;return(0,Vs.createPortal)(t.createElement(Gs,{innerRef:this.handleRef},n),i)},n}(t.Component);Qs.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],Qs.propTypes={};const Js=Qs;var Ys=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).contentRef=t.createRef(),n.triggerRef=t.createRef(),n.latestDocumentMouseDownEvent=null,n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDocumentClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!n.contentRef.current||Ws(n.triggerRef.current,e)||r&&Ws(n.contentRef.current,r)||Ws(n.contentRef.current,e)||t&&n.close(e)},n.handleEscape=function(e){n.props.closeOnEscape&&ys().getCode(e)===ys().Escape&&n.close(e)},n.handlePortalMouseLeave=function(e){var t=n.props,r=t.closeOnPortalMouseLeave,i=t.mouseLeaveDelay;r&&e.target===n.contentRef.current&&(n.mouseLeaveTimer=n.closeWithTimeout(e,i))},n.handlePortalMouseEnter=function(){n.props.closeOnPortalMouseLeave&&clearTimeout(n.mouseLeaveTimer)},n.handleTriggerBlur=function(e){for(var t=n.props,r=t.trigger,i=t.closeOnTriggerBlur,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];Kn.apply(void 0,[r,"props.onBlur",e].concat(s));var c=e.relatedTarget||document.activeElement,l=Kn(n.contentRef.current,"contains",c);i&&!l&&n.close(e)},n.handleTriggerClick=function(e){for(var t=n.props,r=t.trigger,i=t.closeOnTriggerClick,o=t.openOnTriggerClick,s=n.state.open,a=arguments.length,c=new Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];Kn.apply(void 0,[r,"props.onClick",e].concat(c)),s&&i?n.close(e):!s&&o&&n.open(e)},n.handleTriggerFocus=function(e){for(var t=n.props,r=t.trigger,i=t.openOnTriggerFocus,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];Kn.apply(void 0,[r,"props.onFocus",e].concat(s)),i&&n.open(e)},n.handleTriggerMouseLeave=function(e){clearTimeout(n.mouseEnterTimer);for(var t=n.props,r=t.trigger,i=t.closeOnTriggerMouseLeave,o=t.mouseLeaveDelay,s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];Kn.apply(void 0,[r,"props.onMouseLeave",e].concat(a)),i&&(n.mouseLeaveTimer=n.closeWithTimeout(e,o))},n.handleTriggerMouseEnter=function(e){clearTimeout(n.mouseLeaveTimer);for(var t=n.props,r=t.trigger,i=t.mouseEnterDelay,o=t.openOnTriggerMouseEnter,s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];Kn.apply(void 0,[r,"props.onMouseEnter",e].concat(a)),o&&(n.mouseEnterTimer=n.openWithTimeout(e,i))},n.open=function(e){Kn(n.props,"onOpen",e,o({},n.props,{open:!0})),n.setState({open:!0})},n.openWithTimeout=function(e,t){var r=o({},e);return setTimeout((function(){return n.open(r)}),t||0)},n.close=function(e){n.setState({open:!1}),Kn(n.props,"onClose",e,o({},n.props,{open:!1}))},n.closeWithTimeout=function(e,t){var r=o({},e);return setTimeout((function(){return n.close(r)}),t||0)},n.handleMount=function(){Kn(n.props,"onMount",null,n.props)},n.handleUnmount=function(){Kn(n.props,"onUnmount",null,n.props)},n.handleTriggerRef=function(e){n.triggerRef.current=e,Fs(n.props.triggerRef,e)},n}a(n,e);var r=n.prototype;return r.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},r.render=function(){var e=this.props,n=e.children,r=e.eventPool,i=e.mountNode,o=e.trigger,s=this.state.open;return t.createElement(t.Fragment,null,s&&t.createElement(t.Fragment,null,t.createElement(Js,{innerRef:this.contentRef,mountNode:i,onMount:this.handleMount,onUnmount:this.handleUnmount},n),t.createElement(Es(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:r,target:this.contentRef}),t.createElement(Es(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:r,target:this.contentRef}),t.createElement(Es(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:r}),t.createElement(Es(),{name:"click",on:this.handleDocumentClick,pool:r}),t.createElement(Es(),{name:"keydown",on:this.handleEscape,pool:r})),o&&t.createElement(Gs,{innerRef:this.handleTriggerRef},t.cloneElement(o,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},n}(lr);Ys.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],Ys.propTypes={},Ys.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},Ys.autoControlledProps=["open"],Ys.Inner=Js;const $s=Ys;function Xs(e){var n=e.blurring,r=e.className,i=e.children,s=e.content,a=e.dimmed,c=Hn(Jn(n,"blurring"),Jn(a,"dimmed"),"dimmable",r),l=nr(Xs,e),u=rr(Xs,e);return t.createElement(u,o({},l,{className:c}),ar(i)?s:i)}Xs.handledProps=["as","blurring","children","className","content","dimmed"],Xs.propTypes={};const Zs=Xs;var ea=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).containerRef=(0,t.createRef)(),n.contentRef=(0,t.createRef)(),n.handleClick=function(e){var t=n.contentRef.current;Kn(n.props,"onClick",e,n.props),t&&t!==e.target&&Ws(t,e)||Kn(n.props,"onClickOutside",e,n.props)},n}a(n,e);var r=n.prototype;return r.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},r.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},r.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},r.render=function(){var e=this.props,r=e.active,i=e.children,s=e.className,a=e.content,c=e.disabled,l=e.inverted,u=e.page,h=e.simple,d=e.verticalAlign,f=Hn("ui",Jn(r,"active transition visible"),Jn(c,"disabled"),Jn(l,"inverted"),Jn(u,"page"),Jn(h,"simple"),er(d),"dimmer",s),p=nr(n,this.props),m=rr(n,this.props),g=ar(i)?a:i;return t.createElement(Gs,{innerRef:this.containerRef},t.createElement(m,o({},p,{className:f,onClick:this.handleClick}),g&&t.createElement("div",{className:"content",ref:this.contentRef},g)))},n}(t.Component);ea.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],ea.propTypes={};var ta=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){ks()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){ks()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.page,s=nr(n,this.props);return i?t.createElement($s,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:r,openOnTriggerClick:!1},t.createElement(ea,o({},s,{active:r,page:i}))):t.createElement(ea,o({},s,{active:r,page:i}))},n}(t.Component);function na(e){var n=e.children,r=e.className,i=e.content,s=e.size,a=Hn("ui",s,r,"images"),c=nr(na,e),l=rr(na,e);return t.createElement(l,o({},c,{className:a}),ar(n)?i:n)}ta.handledProps=["active","page"],ta.propTypes={},ta.Dimmable=Zs,ta.Inner=ea,ta.create=Dr(ta,(function(e){return{content:e}})),na.handledProps=["as","children","className","content","size"],na.propTypes={};const ra=na;function ia(e){var n=e.avatar,r=e.bordered,i=e.centered,s=e.children,a=e.circular,c=e.className,l=e.content,u=e.dimmer,h=e.disabled,d=e.floated,f=e.fluid,p=e.hidden,m=e.href,g=e.inline,v=e.label,y=e.rounded,w=e.size,b=e.spaced,_=e.verticalAlign,E=e.wrapped,I=e.ui,S=Hn(Jn(I,"ui"),w,Jn(n,"avatar"),Jn(r,"bordered"),Jn(a,"circular"),Jn(i,"centered"),Jn(h,"disabled"),Jn(f,"fluid"),Jn(p,"hidden"),Jn(g,"inline"),Jn(y,"rounded"),$n(b,"spaced"),Yn(d,"floated"),er(_),"image",c),T=nr(ia,e),k=Ms(T,{htmlProps:Ls}),C=k[0],x=k[1],N=rr(ia,e,(function(){if(!Pr(u)||!Pr(v)||!Pr(E)||!ar(s))return"div"}));return ar(s)?ar(l)?"img"===N?t.createElement(N,o({},x,C,{className:S})):t.createElement(N,o({},x,{className:S,href:m}),ta.create(u,{autoGenerateKey:!1}),ua.create(v,{autoGenerateKey:!1}),t.createElement("img",C)):t.createElement(N,o({},T,{className:S}),l):t.createElement(N,o({},T,{className:S}),s)}ia.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],ia.Group=ra,ia.propTypes={},ia.defaultProps={as:"img",ui:!0},ia.create=Dr(ia,(function(e){return{src:e}}));const oa=ia;function sa(e){var n=e.children,r=e.className,i=e.content,s=Hn("detail",r),a=nr(sa,e),c=rr(sa,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}sa.handledProps=["as","children","className","content"],sa.propTypes={},sa.create=Dr(sa,(function(e){return{content:e}}));const aa=sa;function ca(e){var n=e.children,r=e.circular,i=e.className,s=e.color,a=e.content,c=e.size,l=e.tag,u=Hn("ui",s,c,Jn(r,"circular"),Jn(l,"tag"),"labels",i),h=nr(ca,e),d=rr(ca,e);return t.createElement(d,o({},h,{className:u}),ar(n)?a:n)}ca.handledProps=["as","children","circular","className","color","content","size","tag"],ca.propTypes={};const la=ca;var ua=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){Kn(e,"onClick",n),Kn(t.props,"onRemove",n,t.props)}}},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.attached,s=e.basic,a=e.children,c=e.circular,l=e.className,u=e.color,h=e.content,d=e.corner,f=e.detail,p=e.empty,m=e.floating,g=e.horizontal,v=e.icon,y=e.image,w=e.onRemove,b=e.pointing,_=e.prompt,E=e.removeIcon,I=e.ribbon,S=e.size,T=e.tag,k=Hn("ui",u,(!0===b?"pointing":("left"===b||"right"===b)&&b+" pointing")||("above"===b||"below"===b)&&"pointing "+b,S,Jn(r,"active"),Jn(s,"basic"),Jn(c,"circular"),Jn(p,"empty"),Jn(m,"floating"),Jn(g,"horizontal"),Jn(!0===y,"image"),Jn(_,"prompt"),Jn(T,"tag"),$n(d,"corner"),$n(I,"ribbon"),Yn(i,"attached"),"label",l),C=nr(n,this.props),x=rr(n,this.props);if(!ar(a))return t.createElement(x,o({},C,{className:k,onClick:this.handleClick}),a);var N=cr(E)?"delete":E;return t.createElement(x,o({className:k,onClick:this.handleClick},C),Ki.create(v,{autoGenerateKey:!1}),"boolean"!==typeof y&&oa.create(y,{autoGenerateKey:!1}),h,aa.create(f,{autoGenerateKey:!1}),w&&Ki.create(N,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},n}(t.Component);function ha(e){var n=e.children,r=e.className,i=e.content,s=e.hidden,a=e.visible,c=Hn(Jn(a,"visible"),Jn(s,"hidden"),"content",r),l=nr(ha,e),u=rr(ha,e);return t.createElement(u,o({},l,{className:c}),ar(n)?i:n)}ua.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],ua.propTypes={},ua.Detail=aa,ua.Group=la,ua.create=Dr(ua,(function(e){return{content:e}})),ha.handledProps=["as","children","className","content","hidden","visible"],ha.propTypes={};const da=ha;function fa(e){var n=e.attached,r=e.basic,i=e.buttons,s=e.children,a=e.className,c=e.color,l=e.compact,u=e.content,h=e.floated,d=e.fluid,f=e.icon,p=e.inverted,m=e.labeled,g=e.negative,v=e.positive,y=e.primary,w=e.secondary,b=e.size,_=e.toggle,E=e.vertical,I=e.widths,S=Hn("ui",c,b,Jn(r,"basic"),Jn(l,"compact"),Jn(d,"fluid"),Jn(f,"icon"),Jn(p,"inverted"),Jn(m,"labeled"),Jn(g,"negative"),Jn(v,"positive"),Jn(y,"primary"),Jn(w,"secondary"),Jn(_,"toggle"),Jn(E,"vertical"),$n(n,"attached"),Yn(h,"floated"),tr(I),"buttons",a),T=nr(fa,e),k=rr(fa,e);return Pr(i)?t.createElement(k,o({},T,{className:S}),ar(s)?u:s):t.createElement(k,o({},T,{className:S}),Nn(i,(function(e){return ya.create(e)})))}fa.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],fa.propTypes={};const pa=fa;function ma(e){var n=e.className,r=e.text,i=Hn("or",n),s=nr(ma,e),a=rr(ma,e);return t.createElement(a,o({},s,{className:i,"data-text":r}))}ma.handledProps=["as","className","text"],ma.propTypes={};const ga=ma;var va=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).ref=(0,t.createRef)(),n.computeElementType=function(){var e=n.props,t=e.attached,r=e.label;if(!Pr(t)||!Pr(r))return"div"},n.computeTabIndex=function(e){var t=n.props,r=t.disabled,i=t.tabIndex;return Pr(i)?r?-1:"div"===e?0:void 0:i},n.focus=function(e){return Kn(n.ref.current,"focus",e)},n.handleClick=function(e){n.props.disabled?e.preventDefault():Kn(n.props,"onClick",e,n.props)},n.hasIconClass=function(){var e=n.props,t=e.labelPosition,r=e.children,i=e.content,o=e.icon;return!0===o||o&&(t||ar(r)&&Pr(i))},n}a(n,e);var r=n.prototype;return r.computeButtonAriaRole=function(e){var t=this.props.role;return Pr(t)?"button"!==e?"button":void 0:t},r.render=function(){var e=this.props,r=e.active,i=e.animated,s=e.attached,a=e.basic,c=e.children,l=e.circular,u=e.className,h=e.color,d=e.compact,f=e.content,p=e.disabled,m=e.floated,g=e.fluid,v=e.icon,y=e.inverted,w=e.label,b=e.labelPosition,_=e.loading,E=e.negative,I=e.positive,S=e.primary,T=e.secondary,k=e.size,C=e.toggle,x=e.type,N=Hn(h,k,Jn(r,"active"),Jn(a,"basic"),Jn(l,"circular"),Jn(d,"compact"),Jn(g,"fluid"),Jn(this.hasIconClass(),"icon"),Jn(y,"inverted"),Jn(_,"loading"),Jn(E,"negative"),Jn(I,"positive"),Jn(S,"primary"),Jn(T,"secondary"),Jn(C,"toggle"),$n(i,"animated"),$n(s,"attached")),A=Hn($n(b||!!w,"labeled")),P=Hn(Jn(p,"disabled"),Yn(m,"floated")),R=nr(n,this.props),D=rr(n,this.props,this.computeElementType),O=this.computeTabIndex(D);if(!Pr(w)){var L=Hn("ui",N,"button",u),M=Hn("ui",A,"button",u,P),F=ua.create(w,{defaultProps:{basic:!0,pointing:"left"===b?"right":"left"},autoGenerateKey:!1});return t.createElement(D,o({},R,{className:M,onClick:this.handleClick}),"left"===b&&F,t.createElement(Gs,{innerRef:this.ref},t.createElement("button",{className:L,"aria-pressed":C?!!r:void 0,disabled:p,type:x,tabIndex:O},Ki.create(v,{autoGenerateKey:!1})," ",f)),("right"===b||!b)&&F)}var U=Hn("ui",N,P,A,"button",u),j=!ar(c),V=this.computeButtonAriaRole(D);return t.createElement(Gs,{innerRef:this.ref},t.createElement(D,o({},R,{className:U,"aria-pressed":C?!!r:void 0,disabled:p&&"button"===D||void 0,onClick:this.handleClick,role:V,type:x,tabIndex:O}),j&&c,!j&&Ki.create(v,{autoGenerateKey:!1}),!j&&f))},n}(t.Component);va.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],va.propTypes={},va.defaultProps={as:"button"},va.Content=da,va.Group=pa,va.Or=ga,va.create=Dr(va,(function(e){return{content:e}}));const ya=va;var wa=function(e){function n(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(r=e.call.apply(e,[this].concat(s))||this).inputRef=(0,t.createRef)(),r.computeIcon=function(){var e=r.props,t=e.loading,n=e.icon;return Pr(n)?t?"spinner":void 0:n},r.computeTabIndex=function(){var e=r.props,t=e.disabled,n=e.tabIndex;return Pr(n)?t?-1:void 0:n},r.focus=function(e){return r.inputRef.current.focus(e)},r.select=function(){return r.inputRef.current.select()},r.handleChange=function(e){var t=mn(e,"target.value");Kn(r.props,"onChange",e,o({},r.props,{value:t}))},r.handleChildOverrides=function(e,t){return o({},t,e.props,{ref:function(t){Fs(e.ref,t),r.inputRef.current=t}})},r.partitionProps=function(){var e=r.props,t=e.disabled,i=e.type,s=r.computeTabIndex(),a=nr(n,r.props),c=Ms(a),l=c[0],u=c[1];return[o({},l,{disabled:t,type:i,tabIndex:s,onChange:r.handleChange,ref:r.inputRef}),u]},r}return a(n,e),n.prototype.render=function(){var e=this,r=this.props,i=r.action,s=r.actionPosition,a=r.children,c=r.className,l=r.disabled,u=r.error,h=r.fluid,d=r.focus,f=r.icon,p=r.iconPosition,m=r.input,g=r.inverted,v=r.label,y=r.labelPosition,w=r.loading,b=r.size,_=r.transparent,E=r.type,I=Hn("ui",b,Jn(l,"disabled"),Jn(u,"error"),Jn(h,"fluid"),Jn(d,"focus"),Jn(g,"inverted"),Jn(w,"loading"),Jn(_,"transparent"),Yn(s,"action")||Jn(i,"action"),Yn(p,"icon")||Jn(f||w,"icon"),Yn(y,"labeled")||Jn(v,"labeled"),"input",c),S=rr(n,this.props),T=this.partitionProps(),k=T[0],C=T[1];if(!ar(a)){var x=Nn(t.Children.toArray(a),(function(n){return"input"!==n.type?n:(0,t.cloneElement)(n,e.handleChildOverrides(n,k))}));return t.createElement(S,o({},C,{className:I}),x)}var N=ya.create(i,{autoGenerateKey:!1}),A=ua.create(v,{defaultProps:{className:Hn("label",As(y,"corner")&&y)},autoGenerateKey:!1});return t.createElement(S,o({},C,{className:I}),"left"===s&&N,"right"!==y&&A,Lr(m||E,{defaultProps:k,autoGenerateKey:!1}),Ki.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==s&&N,"right"===y&&A)},n}(t.Component);wa.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],wa.propTypes={},wa.defaultProps={type:"text"},wa.create=Dr(wa,(function(e){return{type:e}}));const ba=wa;function _a(e){var n=e.categoryContent,r=e.resultsContent;return t.createElement(t.Fragment,null,t.createElement("div",{className:"name"},n),t.createElement("div",{className:"results"},r))}_a.handledProps=["categoryContent","resultsContent"],_a.propTypes={};const Ea=_a;function Ia(e){var n=e.active,r=e.children,i=e.className,s=e.content,a=e.layoutRenderer,c=e.renderer,l=Hn(Jn(n,"active"),"category",i),u=nr(Ia,e),h=rr(Ia,e),d=c(e),f=ar(r)?s:r;return t.createElement(h,o({},u,{className:l}),a({categoryContent:d,resultsContent:f}))}Ia.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],Ia.defaultProps={layoutRenderer:Ea,renderer:function(e){return e.name}},Ia.propTypes={};const Sa=Ia;var Ta=function(e){var n=e.image,r=e.price,i=e.title,o=e.description;return[n&&t.createElement("div",{key:"image",className:"image"},Or(n,{autoGenerateKey:!1})),t.createElement("div",{key:"content",className:"content"},r&&t.createElement("div",{className:"price"},r),i&&t.createElement("div",{className:"title"},i),o&&t.createElement("div",{className:"description"},o))]};Ta.handledProps=[];var ka=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.className,s=e.renderer,a=Hn(Jn(r,"active"),"result",i),c=nr(n,this.props),l=rr(n,this.props);return t.createElement(l,o({},c,{className:a,onClick:this.handleClick}),s(this.props))},n}(t.Component);function Ca(e){var n=e.children,r=e.className,i=e.content,s=Hn("results transition",r),a=nr(Ca,e),c=rr(Ca,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}ka.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],ka.propTypes={},ka.defaultProps={renderer:Ta},Ca.handledProps=["as","children","className","content"],Ca.propTypes={};const xa=Ca;var Na,Aa=function(e){var t=e.input;return cr(t)?o({},e,{input:{className:"prompt"}}):Cr(t)?o({},e,{input:o({},t,{className:Hn(t.className,"prompt")})}):e},Pa=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).handleResultSelect=function(e,t){Kn(n.props,"onResultSelect",e,o({},n.props,{result:t}))},n.handleSelectionChange=function(e){var t=n.getSelectedResult();Kn(n.props,"onSelectionChange",e,o({},n.props,{result:t}))},n.closeOnEscape=function(e){ys().getCode(e)===ys().Escape&&(e.preventDefault(),n.close())},n.moveSelectionOnKeyDown=function(e){switch(ys().getCode(e)){case ys().ArrowDown:e.preventDefault(),n.moveSelectionBy(e,1);break;case ys().ArrowUp:e.preventDefault(),n.moveSelectionBy(e,-1)}},n.selectItemOnEnter=function(e){if(ys().getCode(e)===ys().Enter){var t=n.getSelectedResult();t&&(e.preventDefault(),n.setValue(t.title),n.handleResultSelect(e,t),n.close())}},n.closeOnDocumentClick=function(e){n.close()},n.handleMouseDown=function(e){n.isMouseDown=!0,Kn(n.props,"onMouseDown",e,n.props),Is.sub("mouseup",n.handleDocumentMouseUp)},n.handleDocumentMouseUp=function(){n.isMouseDown=!1,Is.unsub("mouseup",n.handleDocumentMouseUp)},n.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),n.tryOpen()},n.handleItemClick=function(e,t){var r=t.id,i=n.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),n.setValue(i.title),n.handleResultSelect(e,i),n.close()},n.handleItemMouseDown=function(e){e.preventDefault()},n.handleFocus=function(e){Kn(n.props,"onFocus",e,n.props),n.setState({focus:!0})},n.handleBlur=function(e){Kn(n.props,"onBlur",e,n.props),n.setState({focus:!1})},n.handleSearchChange=function(e){e.stopPropagation();var t=n.props.minCharacters,r=n.state.open,i=e.target.value;Kn(n.props,"onSearchChange",e,o({},n.props,{value:i})),i.length<t?n.close():r||n.tryOpen(i),n.setValue(i)},n.getFlattenedResults=function(){var e=n.props,t=e.category,r=e.results;return t?gs(r,(function(e,t){return e.concat(t.results)}),[]):r},n.getSelectedResult=function(e){void 0===e&&(e=n.state.selectedIndex);var t=n.getFlattenedResults();return mn(t,e)},n.setValue=function(e){var t=n.props.selectFirstResult;n.setState({value:e,selectedIndex:t?0:-1})},n.moveSelectionBy=function(e,t){var r=n.state.selectedIndex,i=n.getFlattenedResults().length-1,o=r+t;o>i?o=0:o<0&&(o=i),n.setState({selectedIndex:o}),n.scrollSelectedItemIntoView(),n.handleSelectionChange(e)},n.scrollSelectedItemIntoView=function(){if(ks()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},n.tryOpen=function(e){void 0===e&&(e=n.state.value);var t=n.props.minCharacters;e.length<t||n.open()},n.open=function(){n.setState({open:!0})},n.close=function(){n.setState({open:!1})},n.renderSearchInput=function(e){var t=n.props,r=t.icon,i=t.input,s=t.placeholder,a=n.state.value;return ba.create(i,{autoGenerateKey:!1,defaultProps:o({},e,{autoComplete:"off",icon:r,onChange:n.handleSearchChange,onClick:n.handleInputClick,tabIndex:"0",value:a,placeholder:s}),overrideProps:Aa})},n.renderNoResults=function(){var e=n.props,r=e.noResultsDescription,i=e.noResultsMessage;return t.createElement("div",{className:"message empty"},t.createElement("div",{className:"header"},i),r&&t.createElement("div",{className:"description"},r))},n.renderResult=function(e,r,i,s){var a=e.childKey,c=Yi(e,["childKey"]);void 0===s&&(s=0);var l=n.props.resultRenderer,u=n.state.selectedIndex,h=r+s;return t.createElement(ka,o({key:null!=a?a:c.id||c.title,active:u===h,onClick:n.handleItemClick,onMouseDown:n.handleItemMouseDown,renderer:l},c,{id:h}))},n.renderResults=function(){var e=n.props.results;return Nn(e,n.renderResult)},n.renderCategories=function(){var e=n.props,r=e.categoryLayoutRenderer,i=e.categoryRenderer,s=e.results,a=n.state.selectedIndex,c=0;return Nn(s,(function(e){var s=e.childKey,l=Yi(e,["childKey"]),u=o({key:null!=s?s:l.name,active:ps(a,c,c+l.results.length),layoutRenderer:r,renderer:i},l),h=us(n.renderResult,c);return c+=l.results.length,t.createElement(Sa,u,l.results.map(h))}))},n.renderMenuContent=function(){var e=n.props,t=e.category,r=e.showNoResults,i=e.results;return Xi(i)?r?n.renderNoResults():null:t?n.renderCategories():n.renderResults()},n.renderResultsMenu=function(){var e=n.state.open?"visible":"",r=n.renderMenuContent();if(r)return t.createElement(xa,{className:e},r)},n}a(n,e),n.getAutoControlledStateFromProps=function(e,t){if("undefined"!==typeof t.prevValue&&bs()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var r=n.prototype;return r.shouldComponentUpdate=function(e,t){return!bs()(e,this.props)||!bs()(t,this.state)},r.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&Is.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),Is.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),Is.sub("click",this.closeOnDocumentClick),Is.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),Is.unsub("click",this.closeOnDocumentClick),Is.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},r.componentWillUnmount=function(){Is.unsub("click",this.closeOnDocumentClick),Is.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},r.render=function(){var e=this.state,r=e.searchClasses,i=e.focus,s=e.open,a=this.props,c=a.aligned,l=a.category,u=a.className,h=a.fluid,d=a.loading,f=a.size,p=Hn("ui",s&&"active visible",f,r,Jn(l,"category"),Jn(i,"focus"),Jn(h,"fluid"),Jn(d,"loading"),Yn(c,"aligned"),"search",u),m=nr(n,this.props),g=rr(n,this.props),v=Ms(m,{htmlProps:Ds}),y=v[0],w=v[1];return t.createElement(g,o({},w,{className:p,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(y),this.renderResultsMenu())},n}(lr);function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(this,arguments)}Pa.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","placeholder","resultRenderer","results","selectFirstResult","showNoResults","size","value"],Pa.propTypes={},Pa.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},Pa.autoControlledProps=["open","value"],Pa.Category=Sa,Pa.Result=ka,Pa.Results=xa,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Na||(Na={}));const Da="popstate";function Oa(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function La(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Ma(e,t){return{usr:e.state,key:e.key,idx:t}}function Fa(e,t,n,r){return void 0===n&&(n=null),Ra({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ja(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Ua(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function ja(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Va(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Na.Pop,c=null,l=u();function u(){return(s.state||{idx:null}).idx}function h(){a=Na.Pop;let e=u(),t=null==e?null:e-l;l=e,c&&c({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:Ua(e);return n=n.replace(/ $/,"%20"),Oa(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==l&&(l=0,s.replaceState(Ra({},s.state,{idx:l}),""));let f={get action(){return a},get location(){return e(i,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Da,h),c=e,()=>{i.removeEventListener(Da,h),c=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Na.Push;let r=Fa(f.location,e,t);n&&n(r,e),l=u()+1;let h=Ma(r,l),d=f.createHref(r);try{s.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}o&&c&&c({action:a,location:f.location,delta:1})},replace:function(e,t){a=Na.Replace;let r=Fa(f.location,e,t);n&&n(r,e),l=u();let i=Ma(r,l),h=f.createHref(r);s.replaceState(i,"",h),o&&c&&c({action:a,location:f.location,delta:0})},go:e=>s.go(e)};return f}var za;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(za||(za={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Ba(e,t,n){return void 0===n&&(n="/"),qa(e,t,n,!1)}function qa(e,t,n,r){let i=rc(("string"===typeof t?ja(t):t).pathname||"/",n);if(null==i)return null;let o=Ka(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=nc(i);s=ec(o[a],e,r)}return s}function Ka(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(Oa(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=cc([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(Oa(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Ka(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:Za(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Ga(e.path))i(e,t,r);else i(e,t)})),t}function Ga(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=Ga(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const Ha=/^:[\w-]+$/,Wa=3,Qa=2,Ja=1,Ya=10,$a=-2,Xa=e=>"*"===e;function Za(e,t){let n=e.split("/"),r=n.length;return n.some(Xa)&&(r+=$a),t&&(r+=Qa),n.filter((e=>!Xa(e))).reduce(((e,t)=>e+(Ha.test(t)?Wa:""===t?Ja:Ya)),r)}function ec(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],c=a===r.length-1,l="/"===o?t:t.slice(o.length)||"/",u=tc({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),h=e.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=tc({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:cc([o,u.pathname]),pathnameBase:lc(cc([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=cc([o,u.pathnameBase]))}return s}function tc(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);La("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function nc(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return La(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function rc(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ic(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function oc(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function sc(e,t){let n=oc(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function ac(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=ja(e):(i=Ra({},e),Oa(!i.pathname||!i.pathname.includes("?"),ic("?","pathname","search",i)),Oa(!i.pathname||!i.pathname.includes("#"),ic("#","pathname","hash",i)),Oa(!i.search||!i.search.includes("#"),ic("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?ja(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:uc(r),hash:hc(i)}}(i,o),l=a&&"/"!==a&&a.endsWith("/"),u=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!l&&!u||(c.pathname+="/"),c}const cc=e=>e.join("/").replace(/\/\/+/g,"/"),lc=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uc=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",hc=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function dc(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const fc=["post","put","patch","delete"],pc=(new Set(fc),["get",...fc]);new Set(pc),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mc.apply(this,arguments)}const gc=t.createContext(null);const vc=t.createContext(null);const yc=t.createContext(null);const wc=t.createContext(null);const bc=t.createContext({outlet:null,matches:[],isDataRoute:!1});const _c=t.createContext(null);function Ec(){return null!=t.useContext(wc)}function Ic(){return Ec()||Oa(!1),t.useContext(wc).location}function Sc(e){t.useContext(yc).static||t.useLayoutEffect(e)}function Tc(){let{isDataRoute:e}=t.useContext(bc);return e?function(){let{router:e}=Mc(Oc.UseNavigateStable),n=Uc(Lc.UseNavigateStable),r=t.useRef(!1);return Sc((()=>{r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,mc({fromRouteId:n},i)))}),[e,n])}():function(){Ec()||Oa(!1);let e=t.useContext(gc),{basename:n,future:r,navigator:i}=t.useContext(yc),{matches:o}=t.useContext(bc),{pathname:s}=Ic(),a=JSON.stringify(sc(o,r.v7_relativeSplatPath)),c=t.useRef(!1);return Sc((()=>{c.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let o=ac(t,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:cc([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[n,i,a,s,e])}()}const kc=t.createContext(null);function Cc(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(yc),{matches:o}=t.useContext(bc),{pathname:s}=Ic(),a=JSON.stringify(sc(o,i.v7_relativeSplatPath));return t.useMemo((()=>ac(e,JSON.parse(a),s,"path"===r)),[e,a,s,r])}function xc(e,n,r,i){Ec()||Oa(!1);let{navigator:o}=t.useContext(yc),{matches:s}=t.useContext(bc),a=s[s.length-1],c=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,h=Ic();if(n){var d;let e="string"===typeof n?ja(n):n;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||Oa(!1),u=e}else u=h;let f=u.pathname||"/",p=f;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Ba(e,{pathname:p});let g=Dc(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:cc([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:cc([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r,i);return n&&g?t.createElement(wc.Provider,{value:{location:mc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Na.Pop}},g):g}function Nc(){let e=function(){var e;let n=t.useContext(_c),r=Fc(Lc.UseRouteError),i=Uc(Lc.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=dc(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const Ac=t.createElement(Nc,null);class Pc extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(bc.Provider,{value:this.props.routeContext},t.createElement(_c.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rc(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(gc);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(bc.Provider,{value:n},i)}function Dc(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let a=e,c=null==(o=r)?void 0:o.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||Oa(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,h=!1,d=null,f=null;var p;r&&(s=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||Ac,l&&(u<0&&0===o?(p="route-fallback",!1||jc[p]||(jc[p]=!0),h=!0,f=null):u===o&&(h=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,o+1)),g=()=>{let n;return n=s?d:h?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Rc,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(Pc,{location:r.location,revalidation:r.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var Oc=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Oc||{}),Lc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Lc||{});function Mc(e){let n=t.useContext(gc);return n||Oa(!1),n}function Fc(e){let n=t.useContext(vc);return n||Oa(!1),n}function Uc(e){let n=function(){let e=t.useContext(bc);return e||Oa(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||Oa(!1),r.route.id}const jc={};r.startTransition;function Vc(e){let{to:n,replace:r,state:i,relative:o}=e;Ec()||Oa(!1);let{future:s,static:a}=t.useContext(yc),{matches:c}=t.useContext(bc),{pathname:l}=Ic(),u=Tc(),h=ac(n,sc(c,s.v7_relativeSplatPath),l,"path"===o),d=JSON.stringify(h);return t.useEffect((()=>u(JSON.parse(d),{replace:r,state:i,relative:o})),[u,d,o,r,i]),null}function zc(e){return function(e){let n=t.useContext(bc).outlet;return n?t.createElement(kc.Provider,{value:e},n):n}(e.context)}function Bc(e){Oa(!1)}function qc(e){let{basename:n="/",children:r=null,location:i,navigationType:o=Na.Pop,navigator:s,static:a=!1,future:c}=e;Ec()&&Oa(!1);let l=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:l,navigator:s,static:a,future:mc({v7_relativeSplatPath:!1},c)})),[l,c,s,a]);"string"===typeof i&&(i=ja(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=t.useMemo((()=>{let e=rc(h,l);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:o}}),[l,h,d,f,p,m,o]);return null==g?null:t.createElement(yc.Provider,{value:u},t.createElement(wc.Provider,{children:r,value:g}))}function Kc(e){let{children:t,location:n}=e;return xc(Gc(t),n)}new Promise((()=>{}));t.Component;function Gc(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,Gc(e.props.children,o));e.type!==Bc&&Oa(!1),e.props.index&&e.props.children&&Oa(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Gc(e.props.children,o)),r.push(s)})),r}function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hc.apply(this,arguments)}function Wc(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Qc=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(yL){}new Map;const Jc=r.startTransition;zs.flushSync,r.useId;function Yc(e){let{basename:n,children:r,future:i,window:o}=e,s=t.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),Va((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Fa("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Ua(t)}),null,a)));let c=s.current,[l,u]=t.useState({action:c.action,location:c.location}),{v7_startTransition:h}=i||{},d=t.useCallback((e=>{h&&Jc?Jc((()=>u(e))):u(e)}),[u,h]);return t.useLayoutEffect((()=>c.listen(d)),[c,d]),t.createElement(qc,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:c,future:i})}const $c="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Xc=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zc=t.forwardRef((function(e,n){let r,{onClick:i,relative:o,reloadDocument:s,replace:a,state:c,target:l,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Wc(e,Qc),{basename:p}=t.useContext(yc),m=!1;if("string"===typeof u&&Xc.test(u)&&(r=u,$c))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=rc(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(yL){}let g=function(e,n){let{relative:r}=void 0===n?{}:n;Ec()||Oa(!1);let{basename:i,navigator:o}=t.useContext(yc),{hash:s,pathname:a,search:c}=Cc(e,{relative:r}),l=a;return"/"!==i&&(l="/"===a?i:cc([i,a])),o.createHref({pathname:l,search:c,hash:s})}(u,{relative:o}),v=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c}=void 0===n?{}:n,l=Tc(),u=Ic(),h=Cc(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:Ua(u)===Ua(h);l(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:c})}}),[u,l,h,i,o,r,e,s,a,c])}(u,{replace:a,state:c,target:l,preventScrollReset:h,relative:o,unstable_viewTransition:d});return t.createElement("a",Hc({},f,{href:r||g,onClick:m||s?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:n,target:l}))}));var el,tl;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(el||(el={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(tl||(tl={}));const nl=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},rl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nl(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new il;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class il extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ol=function(e){return function(e){const t=nl(e);return rl.encodeByteArray(t,!0)}(e).replace(/\./g,"")},sl=function(e){try{return rl.decodeString(e,!0)}catch(yL){console.error("base64Decode failed: ",yL)}return null};function al(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=al(e[n],t[n]));return e}const cl=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ll=()=>{try{return cl()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(yL){return}const t=e&&sl(e[1]);return t&&JSON.parse(t)})()}catch(yL){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(yL))}},ul=()=>{var e;return null===(e=ll())||void 0===e?void 0:e.config};class hl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function dl(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ol(JSON.stringify({alg:"none",type:"JWT"})),ol(JSON.stringify(o)),""].join(".")}function fl(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function pl(){var e;const t=null===(e=ll())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(yL){return!1}}function ml(){return"undefined"!==typeof window||gl()}function gl(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function vl(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function yl(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function wl(){const e=fl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function bl(){return!pl()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _l(){try{return"object"===typeof indexedDB}catch(yL){return!1}}class El extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,El.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Sl,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new El(n,o,t)}}const Sl=/\{\$([^}]+)}/g;function Tl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kl(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Cl(n)&&Cl(o)){if(!kl(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cl(e){return null!==e&&"object"===typeof e}function xl(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nl(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Al(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Pl(e,t){const n=new Rl(e,t);return n.subscribe.bind(n)}class Rl{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Dl),void 0===r.error&&(r.error=Dl),void 0===r.complete&&(r.complete=Dl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(yL){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(yL){"undefined"!==typeof console&&console.error&&console.error(yL)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Dl(){}function Ol(e){return e&&e._delegate?e._delegate:e}class Ll{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ml="[DEFAULT]";class Fl{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hl;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(yL){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(yL){if(r)return null;throw yL}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ml})}catch(yL){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(yL){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ml?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml;return this.component?this.component.multipleInstances?e:Ml:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ul{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const jl=[];var Vl;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Vl||(Vl={}));const zl={debug:Vl.DEBUG,verbose:Vl.VERBOSE,info:Vl.INFO,warn:Vl.WARN,error:Vl.ERROR,silent:Vl.SILENT},Bl=Vl.INFO,ql={[Vl.DEBUG]:"log",[Vl.VERBOSE]:"log",[Vl.INFO]:"info",[Vl.WARN]:"warn",[Vl.ERROR]:"error"},Kl=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ql[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Gl{constructor(e){this.name=e,this._logLevel=Bl,this._logHandler=Kl,this._userLogHandler=null,jl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vl))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?zl[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vl.DEBUG,...t),this._logHandler(this,Vl.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vl.VERBOSE,...t),this._logHandler(this,Vl.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vl.INFO,...t),this._logHandler(this,Vl.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vl.WARN,...t),this._logHandler(this,Vl.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vl.ERROR,...t),this._logHandler(this,Vl.ERROR,...t)}}const Hl=(e,t)=>t.some((t=>e instanceof t));let Wl,Ql;const Jl=new WeakMap,Yl=new WeakMap,$l=new WeakMap,Xl=new WeakMap,Zl=new WeakMap;let eu={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yl.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ru(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function tu(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ql||(Ql=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(iu(this),n),ru(Jl.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ru(e.apply(iu(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(iu(this),t,...r);return $l.set(o,t.sort?t.sort():[t]),ru(o)}}function nu(e){return"function"===typeof e?tu(e):(e instanceof IDBTransaction&&function(e){if(Yl.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Yl.set(e,t)}(e),Hl(e,Wl||(Wl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,eu):e)}function ru(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(ru(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Jl.set(t,e)})).catch((()=>{})),Zl.set(t,e),t}(e);if(Xl.has(e))return Xl.get(e);const t=nu(e);return t!==e&&(Xl.set(e,t),Zl.set(t,e)),t}const iu=e=>Zl.get(e);const ou=["get","getKey","getAll","getAllKeys","count"],su=["put","add","delete","clear"],au=new Map;function cu(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(au.get(t))return au.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=su.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ou.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return au.set(t,o),o}eu=(e=>({...e,get:(t,n,r)=>cu(t,n)||e.get(t,n,r),has:(t,n)=>!!cu(t,n)||e.has(t,n)}))(eu);class lu{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const uu="@firebase/app",hu="0.10.6",du=new Gl("@firebase/app"),fu="@firebase/app-compat",pu="@firebase/analytics-compat",mu="@firebase/analytics",gu="@firebase/app-check-compat",vu="@firebase/app-check",yu="@firebase/auth",wu="@firebase/auth-compat",bu="@firebase/database",_u="@firebase/database-compat",Eu="@firebase/functions",Iu="@firebase/functions-compat",Su="@firebase/installations",Tu="@firebase/installations-compat",ku="@firebase/messaging",Cu="@firebase/messaging-compat",xu="@firebase/performance",Nu="@firebase/performance-compat",Au="@firebase/remote-config",Pu="@firebase/remote-config-compat",Ru="@firebase/storage",Du="@firebase/storage-compat",Ou="@firebase/firestore",Lu="@firebase/vertexai-preview",Mu="@firebase/firestore-compat",Fu="firebase",Uu="[DEFAULT]",ju={[uu]:"fire-core",[fu]:"fire-core-compat",[mu]:"fire-analytics",[pu]:"fire-analytics-compat",[vu]:"fire-app-check",[gu]:"fire-app-check-compat",[yu]:"fire-auth",[wu]:"fire-auth-compat",[bu]:"fire-rtdb",[_u]:"fire-rtdb-compat",[Eu]:"fire-fn",[Iu]:"fire-fn-compat",[Su]:"fire-iid",[Tu]:"fire-iid-compat",[ku]:"fire-fcm",[Cu]:"fire-fcm-compat",[xu]:"fire-perf",[Nu]:"fire-perf-compat",[Au]:"fire-rc",[Pu]:"fire-rc-compat",[Ru]:"fire-gcs",[Du]:"fire-gcs-compat",[Ou]:"fire-fst",[Mu]:"fire-fst-compat",[Lu]:"fire-vertex","fire-js":"fire-js",[Fu]:"fire-js-all"},Vu=new Map,zu=new Map,Bu=new Map;function qu(e,t){try{e.container.addComponent(t)}catch(yL){du.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),yL)}}function Ku(e,t){e.container.addOrOverwriteComponent(t)}function Gu(e){const t=e.name;if(Bu.has(t))return du.debug("There were multiple attempts to register component ".concat(t,".")),!1;Bu.set(t,e);for(const n of Vu.values())qu(n,e);for(const n of zu.values())qu(n,e);return!0}function Hu(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uu;Hu(e,t).clearInstance(n)}function Qu(e){return void 0!==e.options}function Ju(e){return void 0!==e.settings}function Yu(){Bu.clear()}const $u=new Il("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xu{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ll("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $u.create("app-deleted",{appName:this._name})}}class Zu extends Xu{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,sh(uu,hu,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){oh(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $u.create("server-app-deleted")}}const eh="10.12.3";function th(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Uu,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $u.create("bad-app-name",{appName:String(i)});if(n||(n=ul()),!n)throw $u.create("no-options");const o=Vu.get(i);if(o){if(kl(n,o.options)&&kl(r,o.config))return o;throw $u.create("duplicate-app",{appName:i})}const s=new Ul(i);for(const c of Bu.values())s.addComponent(c);const a=new Xu(n,r,s);return Vu.set(i,a),a}function nh(e,t){if(ml()&&!gl())throw $u.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Qu(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw $u.create("finalization-registry-not-supported",{});const i=""+(o=JSON.stringify(r),[...o].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var o;const s=zu.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const a=new Ul(i);for(const l of Bu.values())a.addComponent(l);const c=new Zu(n,t,i,a);return zu.set(i,c),c}function rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uu;const t=Vu.get(e);if(!t&&e===Uu&&ul())return th();if(!t)throw $u.create("no-app",{appName:e});return t}function ih(){return Array.from(Vu.values())}async function oh(e){let t=!1;const n=e.name;if(Vu.has(n))t=!0,Vu.delete(n);else if(zu.has(n)){e.decRefCount()<=0&&(zu.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function sh(e,t,n){var r;let i=null!==(r=ju[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void du.warn(e.join(" "))}Gu(new Ll("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function ah(e,t){if(null!==e&&"function"!==typeof e)throw $u.create("invalid-log-argument");!function(e,t){for(const n of jl){let r=null;t&&t.level&&(r=zl[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Vl[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function ch(e){var t;t=e,jl.forEach((e=>{e.setLogLevel(t)}))}const lh="firebase-heartbeat-database",uh=1,hh="firebase-heartbeat-store";let dh=null;function fh(){return dh||(dh=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=ru(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(ru(s.result),e.oldVersion,e.newVersion,ru(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(lh,uh,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(hh)}catch(yL){console.warn(yL)}}}).catch((e=>{throw $u.create("idb-open",{originalErrorMessage:e.message})}))),dh}async function ph(e,t){try{const n=(await fh()).transaction(hh,"readwrite"),r=n.objectStore(hh);await r.put(t,mh(e)),await n.done}catch(yL){if(yL instanceof El)du.warn(yL.message);else{const t=$u.create("idb-set",{originalErrorMessage:null===yL||void 0===yL?void 0:yL.message});du.warn(t.message)}}}function mh(e){return"".concat(e.name,"!").concat(e.options.appId)}class gh{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yh(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vh();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=vh(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),wh(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ol(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function vh(){return(new Date).toISOString().substring(0,10)}class yh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_l()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await fh()).transaction(hh),n=await t.objectStore(hh).get(mh(e));return await t.done,n}catch(yL){if(yL instanceof El)du.warn(yL.message);else{const t=$u.create("idb-get",{originalErrorMessage:null===yL||void 0===yL?void 0:yL.message});du.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ph(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ph(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function wh(e){return ol(JSON.stringify({version:2,heartbeats:e})).length}var bh;bh="",Gu(new Ll("platform-logger",(e=>new lu(e)),"PRIVATE")),Gu(new Ll("heartbeat",(e=>new gh(e)),"PRIVATE")),sh(uu,hu,bh),sh(uu,hu,"esm2017"),sh("fire-js","");class _h{constructor(e,t){this._delegate=e,this.firebase=t,qu(e,new Ll("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),oh(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uu;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uu;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){qu(this._delegate,e)}_addOrOverwriteComponent(e){Ku(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Eh=new Il("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ih=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=th(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Tl(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:sh,setLogLevel:ch,onLog:ah,apps:null,SDK_VERSION:eh,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(Gu(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Eh.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&al(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Tl(n,e=e||Uu))throw Eh.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(_h);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){al(n,e)},createSubscribe:Pl,ErrorFactory:Il,deepExtend:al}),n}(),Sh=new Gl("@firebase/app-compat");if(ml()&&void 0!==self.firebase){Sh.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Sh.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Th=Ih;!function(e){sh("@firebase/app-compat","0.2.36",e)}();Th.registerVersion("firebase","10.12.3","app-compat");function kh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Ch={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},xh="EMAIL_SIGNIN",Nh="PASSWORD_RESET",Ah="RECOVER_EMAIL",Ph="REVERT_SECOND_FACTOR_ADDITION",Rh="VERIFY_AND_CHANGE_EMAIL",Dh="VERIFY_EMAIL";function Oh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lh=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Mh=Oh,Fh=new Il("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Uh=new Gl("@firebase/auth");function jh(e){if(Uh.logLevel<=Vl.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Uh.error("Auth (".concat(eh,"): ").concat(e),...n)}}function Vh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gh(e,...n)}function zh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gh(e,...n)}function Bh(e,t,n){const r=Object.assign(Object.assign({},Mh()),{[t]:n});return new Il("auth","Firebase",r).create(t,{appName:e.name})}function qh(e){return Bh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Vh(e,"argument-error"),Bh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Gh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Fh.create(e,...n)}function Hh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Gh(t,...r)}}function Wh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jh(t),new Error(t)}function Qh(e,t){e||Wh(t)}function Jh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Yh(){return"http:"===$h()||"https:"===$h()}function $h(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qh(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fl())||yl()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Yh()||vl()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Zh(e,t){Qh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ed{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Wh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Wh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Wh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const td={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},nd=new Xh(3e4,6e4);function rd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function id(e,t,n,r){return od(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=xl(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ed.fetch()(ad(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function od(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},td),t);try{const t=new ld(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ud(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ud(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ud(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ud(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Bh(e,a,s);Vh(e,a)}}catch(yL){if(yL instanceof El)throw yL;Vh(e,"network-request-failed",{message:String(yL)})}}async function sd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await id(e,t,n,r,i);return"mfaPendingCredential"in o&&Vh(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ad(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Zh(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function cd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ld{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(zh(this.auth,"network-request-failed"))),nd.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ud(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zh(e,t,r);return i.customData._tokenResponse=n,i}function hd(e){return void 0!==e&&void 0!==e.getResponse}function dd(e){return void 0!==e&&void 0!==e.enterprise}class fd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cd(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function pd(e,t){return id(e,"GET","/v2/recaptchaConfig",rd(e,t))}async function md(e,t){return id(e,"POST","/v1/accounts:lookup",t)}function gd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(yL){}}function vd(e){return 1e3*Number(e)}function yd(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const e=sl(n);return e?JSON.parse(e):(jh("Failed to decode base64 JWT payload"),null)}catch(yL){return jh("Caught error parsing JWT payload as JSON",null===yL||void 0===yL?void 0:yL.toString()),null}}function wd(e){const t=yd(e);return Hh(t,"internal-error"),Hh("undefined"!==typeof t.exp,"internal-error"),Hh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function bd(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(yL){throw yL instanceof El&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(yL)&&e.auth.currentUser===e&&await e.auth.signOut(),yL}}class _d{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(yL){return void((null===yL||void 0===yL?void 0:yL.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ed{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Id(e){var t;const n=e.auth,r=await e.getIdToken(),i=await bd(e,md(n,{idToken:r}));Hh(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Sd(o.providerUserInfo):[],a=(c=e.providerData,l=s,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ed(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Sd(e){return e.map((e=>{var{providerId:t}=e,n=kh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Td{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Hh(e.idToken,"internal-error"),Hh("undefined"!==typeof e.idToken,"internal-error"),Hh("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):wd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Hh(0!==e.length,"internal-error");const t=wd(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Hh(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await od(e,{},(async()=>{const n=xl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=ad(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",ed.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Td;return n&&(Hh("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Hh("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Hh("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Td,this.toJSON())}_performRefresh(){return Wh("not implemented")}}function kd(e,t){Hh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Cd{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=kh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _d(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ed(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bd(this,this.stsTokenManager.getToken(this.auth,e));return Hh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ol(e),r=await n.getIdToken(t),i=yd(r);Hh(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:gd(vd(i.auth_time)),issuedAtTime:gd(vd(i.iat)),expirationTime:gd(vd(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ol(e);await Id(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Hh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Hh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Id(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ju(this.auth.app))return Promise.reject(qh(this.auth));const e=await this.getIdToken();return await bd(this,async function(e,t){return id(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Hh(y&&E,e,"internal-error");const I=Td.fromJSON(this.name,E);Hh("string"===typeof y,e,"internal-error"),kd(u,e.name),kd(h,e.name),Hh("boolean"===typeof w,e,"internal-error"),Hh("boolean"===typeof b,e,"internal-error"),kd(d,e.name),kd(f,e.name),kd(p,e.name),kd(m,e.name),kd(g,e.name),kd(v,e.name);const S=new Cd({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Td;r.updateFromServerResponse(t);const i=new Cd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Id(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Hh(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Sd(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new Td;s.updateFromIdToken(n);const a=new Cd({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ed(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const xd=new Map;function Nd(e){Qh(e instanceof Function,"Expected a class definition");let t=xd.get(e);return t?(Qh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xd.set(e,t),t)}class Ad{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ad.type="NONE";const Pd=Ad;function Rd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Dd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Rd(this.userKey,r.apiKey,i),this.fullPersistenceKey=Rd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Dd(Nd(Pd),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Nd(Pd);const o=Rd(n,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(o);if(t){const n=Cd._fromJSON(e,t);l!==i&&(s=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new Dd(i,e,n)):new Dd(i,e,n)}}function Od(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ud(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ld(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vd(t))return"Blackberry";if(zd(t))return"Webos";if(Md(t))return"Safari";if((t.includes("chrome/")||Fd(t))&&!t.includes("edge/"))return"Chrome";if(jd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ld(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/firefox\//i.test(e)}function Md(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/crios\//i.test(e)}function Ud(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/iemobile/i.test(e)}function jd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/android/i.test(e)}function Vd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/blackberry/i.test(e)}function zd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/webos/i.test(e)}function Bd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return Bd(e)||jd(e)||zd(e)||Vd(e)||/windows phone/i.test(e)||Ud(e)}function Kd(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Od(fl());break;case"Worker":t="".concat(Od(fl()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(eh,"/").concat(r)}class Gd{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(yL){r(yL)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(yL){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===yL||void 0===yL?void 0:yL.message})}}}class Hd{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Wd{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jd(this),this.idTokenSubscription=new Jd(this),this.beforeStateQueue=new Gd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nd(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Dd.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(yL){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await md(this,{idToken:e}),n=await Cd._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ju(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(yL){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(yL)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Hh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(yL){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(yL){if((null===yL||void 0===yL?void 0:yL.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ju(this.app))return Promise.reject(qh(this));const t=e?Ol(e):null;return t&&Hh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Hh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ju(this.app)?Promise.reject(qh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ju(this.app)?Promise.reject(qh(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Nd(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return id(e,"GET","/v2/passwordPolicy",rd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Hd(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return id(e,"POST","/v2/accounts:revokeToken",rd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nd(e)||this._popupRedirectResolver;Hh(t,this,"argument-error"),this.redirectPersistenceManager=await Dd.create(this,[Nd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Hh(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Hh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Uh.logLevel<=Vl.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Uh.warn("Auth (".concat(eh,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Qd(e){return Ol(e)}class Jd{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pl((e=>this.observer=e))}get next(){return Hh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $d(e){return Yd.loadJS(e)}function Xd(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Zd{constructor(e){this.type="recaptcha-enterprise",this.auth=Qd(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;dd(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{pd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new fd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&dd(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Yd.recaptchaEnterpriseScript;0!==t.length&&(t+=i),$d(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ef(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Zd(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function tf(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ef(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ef(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function nf(e,t,n){const r=Qd(e);Hh(r._canInitEmulator,r,"emulator-config-failed"),Hh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=rf(t),{host:s,port:a}=function(e){const t=rf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:of(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:of(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function rf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function of(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class sf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wh("not implemented")}_getIdTokenResponse(e){return Wh("not implemented")}_linkToIdToken(e,t){return Wh("not implemented")}_getReauthenticationResolver(e){return Wh("not implemented")}}async function af(e,t){return id(e,"POST","/v1/accounts:resetPassword",rd(e,t))}async function cf(e,t){return id(e,"POST","/v1/accounts:signUp",t)}async function lf(e,t){return sd(e,"POST","/v1/accounts:signInWithPassword",rd(e,t))}async function uf(e,t){return id(e,"POST","/v1/accounts:sendOobCode",rd(e,t))}async function hf(e,t){return uf(e,t)}async function df(e,t){return uf(e,t)}class ff extends sf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ff(e,t,"password")}static _fromEmailAndCode(e,t){return new ff(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return tf(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lf);case"emailLink":return async function(e,t){return sd(e,"POST","/v1/accounts:signInWithEmailLink",rd(e,t))}(e,{email:this._email,oobCode:this._password});default:Vh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return tf(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cf);case"emailLink":return async function(e,t){return sd(e,"POST","/v1/accounts:signInWithEmailLink",rd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pf(e,t){return sd(e,"POST","/v1/accounts:signInWithIdp",rd(e,t))}class mf extends sf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=kh(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new mf(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return pf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xl(t)}return e}}const gf={USER_NOT_FOUND:"user-not-found"};class vf extends sf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new vf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new vf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return sd(e,"POST","/v1/accounts:signInWithPhoneNumber",rd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await sd(e,"POST","/v1/accounts:signInWithPhoneNumber",rd(e,t));if(n.temporaryProof)throw ud(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return sd(e,"POST","/v1/accounts:signInWithPhoneNumber",rd(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),gf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new vf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class yf{constructor(e){var t,n,r,i,o,s;const a=Nl(Al(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Hh(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Nl(Al(e)).link,n=t?Nl(Al(t)).deep_link_id:null,r=Nl(Al(e)).deep_link_id;return(r?Nl(Al(r)).link:null)||r||n||t||e}(e);try{return new yf(t)}catch(n){return null}}}class wf{constructor(){this.providerId=wf.PROVIDER_ID}static credential(e,t){return ff._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=yf.parseLink(t);return Hh(n,"argument-error"),ff._fromEmailAndCode(e,n.code,n.tenantId)}}wf.PROVIDER_ID="password",wf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _f extends bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ef extends _f{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Hh("providerId"in t&&"signInMethod"in t,"argument-error"),mf._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Hh(e.idToken||e.accessToken,"argument-error"),mf._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ef.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ef.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new Ef(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(yL){return null}}}class If extends _f{constructor(){super("facebook.com")}static credential(e){return mf._fromParams({providerId:If.PROVIDER_ID,signInMethod:If.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return If.credentialFromTaggedObject(e)}static credentialFromError(e){return If.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return If.credential(t.oauthAccessToken)}catch(n){return null}}}If.FACEBOOK_SIGN_IN_METHOD="facebook.com",If.PROVIDER_ID="facebook.com";class Sf extends _f{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mf._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sf.credentialFromTaggedObject(e)}static credentialFromError(e){return Sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Sf.credential(n,r)}catch(i){return null}}}Sf.GOOGLE_SIGN_IN_METHOD="google.com",Sf.PROVIDER_ID="google.com";class Tf extends _f{constructor(){super("github.com")}static credential(e){return mf._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tf.credentialFromTaggedObject(e)}static credentialFromError(e){return Tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Tf.credential(t.oauthAccessToken)}catch(n){return null}}}Tf.GITHUB_SIGN_IN_METHOD="github.com",Tf.PROVIDER_ID="github.com";class kf extends sf{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return pf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pf(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new kf(n,i):null}static _create(e,t){return new kf(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cf extends bf{constructor(e){Hh(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Cf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Cf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=kf.fromJSON(e);return Hh(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return kf._create(r,n)}catch(yL){return null}}}class xf extends _f{constructor(){super("twitter.com")}static credential(e,t){return mf._fromParams({providerId:xf.PROVIDER_ID,signInMethod:xf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xf.credentialFromTaggedObject(e)}static credentialFromError(e){return xf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xf.credential(n,r)}catch(i){return null}}}async function Nf(e,t){return sd(e,"POST","/v1/accounts:signUp",rd(e,t))}xf.TWITTER_SIGN_IN_METHOD="twitter.com",xf.PROVIDER_ID="twitter.com";class Af{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Cd._fromIdTokenResponse(e,n,r),o=Pf(n);return new Af({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Pf(n);return new Af({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Pf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Rf extends El{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Rf(e,t,n,r)}}function Df(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Rf._fromErrorAndOperation(e,n,t,r);throw n}))}function Of(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Lf(e,t){const n=Ol(e);await Ff(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return id(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Of(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await bd(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Af._forOperation(e,"link",r)}async function Ff(e,t,n){await Id(t);const r=!1===e?"provider-already-linked":"no-such-provider";Hh(Of(t.providerData).has(n)===e,t.auth,r)}async function Uf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ju(r.app))return Promise.reject(qh(r));const i="reauthenticate";try{const o=await bd(e,Df(r,i,t,e),n);Hh(o.idToken,r,"internal-error");const s=yd(o.idToken);Hh(s,r,"internal-error");const{sub:a}=s;return Hh(e.uid===a,r,"user-mismatch"),Af._forOperation(e,i,o)}catch(yL){throw(null===yL||void 0===yL?void 0:yL.code)==="auth/".concat("user-not-found")&&Vh(r,"user-mismatch"),yL}}async function jf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ju(e.app))return Promise.reject(qh(e));const r="signIn",i=await Df(e,r,t),o=await Af._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Vf(e,t){return jf(Qd(e),t)}async function zf(e,t){const n=Ol(e);return await Ff(!1,n,t.providerId),Mf(n,t)}async function Bf(e,t){return Uf(Ol(e),t)}async function qf(e,t){if(Ju(e.app))return Promise.reject(qh(e));const n=Qd(e),r=await async function(e,t){return sd(e,"POST","/v1/accounts:signInWithCustomToken",rd(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Af._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Kf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Gf._fromServerResponse(e,t):"totpInfo"in t?Hf._fromServerResponse(e,t):Vh(e,"internal-error")}}class Gf extends Kf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Gf(t)}}class Hf extends Kf{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Hf(t)}}function Wf(e,t,n){var r;Hh((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Hh("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Hh(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Hh(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Qf(e){const t=Qd(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Jf(e,t){await async function(e,t){return id(e,"POST","/v1/accounts:update",rd(e,t))}(Ol(e),{oobCode:t})}async function Yf(e,t){const n=Ol(e),r=await af(n,{oobCode:t}),i=r.requestType;switch(Hh(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Hh(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Hh(r.mfaInfo,n,"internal-error");default:Hh(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Kf._fromServerResponse(Qd(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function $f(e,t){const n={identifier:t,continueUri:Yh()?Jh():"http://localhost"},{signinMethods:r}=await async function(e,t){return id(e,"POST","/v1/accounts:createAuthUri",rd(e,t))}(Ol(e),n);return r||[]}async function Xf(e,t){const n=Ol(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Wf(n.auth,r,t);const{email:i}=await async function(e,t){return uf(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Zf(e,t,n){const r=Ol(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Wf(r.auth,i,n);const{email:o}=await async function(e,t){return uf(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function ep(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Ol(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await bd(i,async function(e,t){return id(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function tp(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await bd(e,async function(e,t){return id(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class np{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class rp extends np{constructor(e,t,n,r){super(e,t,n),this.username=r}}class ip extends np{constructor(e,t){super(e,"facebook.com",t)}}class op extends rp{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class sp extends np{constructor(e,t){super(e,"google.com",t)}}class ap extends rp{constructor(e,t,n){super(e,"twitter.com",t,n)}}function cp(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=yd(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new np(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new ip(o,i);case"github.com":return new op(o,i);case"google.com":return new sp(o,i);case"twitter.com":return new ap(o,i,e.screenName||null);case"custom":case"anonymous":return new np(o,null);default:return new np(o,r,i)}}(n)}class lp{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new lp("enroll",e,t)}static _fromMfaPendingCredential(e){return new lp("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return lp._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return lp._fromIdtoken(e.multiFactorSession.idToken)}return null}}class up{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Qd(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Kf._fromServerResponse(n,e)));Hh(r.mfaPendingCredential,n,"internal-error");const o=lp._fromMfaPendingCredential(r.mfaPendingCredential);return new up(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Af._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Hh(t.user,n,"internal-error"),Af._forOperation(t.user,t.operationType,s);default:Vh(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class hp{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Kf._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new hp(e)}async getSession(){return lp._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await bd(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await bd(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},id(r,"POST","/v2/accounts/mfaEnrollment:withdraw",rd(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(yL){throw yL}var r,i}}const dp=new WeakMap;const fp="__sak";class pp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fp,"1"),this.storage.removeItem(fp),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class mp extends pp{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=fl();return Md(e)||Bd(e)}()&&function(){try{return!(!window||window===window.top)}catch(yL){return!1}}(),this.fallbackToPolling=qd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);wl()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mp.type="LOCAL";const gp=mp;class vp extends pp{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vp.type="SESSION";const yp=vp;class wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new wp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function bp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wp.receivers=[];class _p{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=bp("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Ep(){return window}function Ip(){return"undefined"!==typeof Ep().WorkerGlobalScope&&"function"===typeof Ep().importScripts}const Sp="firebaseLocalStorageDb",Tp="firebaseLocalStorage",kp="fbase_key";class Cp{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function xp(e,t){return e.transaction([Tp],t?"readwrite":"readonly").objectStore(Tp)}function Np(){const e=indexedDB.open(Sp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Tp,{keyPath:kp})}catch(yL){n(yL)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Tp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Sp);return new Cp(e).toPromise()}(),t(await Np()))}))}))}async function Ap(e,t,n){const r=xp(e,!0).put({[kp]:t,value:n});return new Cp(r).toPromise()}function Pp(e,t){const n=xp(e,!0).delete(t);return new Cp(n).toPromise()}class Rp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Np()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(yL){if(t++>3)throw yL;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ip()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wp._getInstance(Ip()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _p(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Np();return await Ap(e,fp,"1"),await Pp(e,fp),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ap(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=xp(e,!1).get(t),r=await new Cp(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Pp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=xp(e,!1).getAll();return new Cp(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rp.type="LOCAL";const Dp=Rp;const Op=1e12;class Lp{constructor(e){this.auth=e,this.counter=Op,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Mp(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Op;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Op;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Op;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Mp{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Hh(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(yL){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(yL){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fp=Xd("rcb"),Up=new Xh(3e4,6e4);class jp{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ep().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Hh(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&hd(Ep().grecaptcha)?Promise.resolve(Ep().grecaptcha):new Promise(((n,r)=>{const i=Ep().setTimeout((()=>{r(zh(e,"network-request-failed"))}),Up.get());Ep()[Fp]=()=>{Ep().clearTimeout(i),delete Ep()[Fp];const o=Ep().grecaptcha;if(!o||!hd(o))return void r(zh(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};$d("".concat(Yd.recaptchaV2Script,"?").concat(xl({onload:Fp,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(zh(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ep().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vp{async load(e){return new Lp(e)}clearedOneInstance(){}}const zp="recaptcha",Bp={theme:"light",type:"image"};class qp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Bp);this.parameters=n,this.type=zp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qd(e),this.isInvisible="invisible"===this.parameters.size,Hh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Hh(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vp:new jp,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(yL){return Promise.reject(yL)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Hh(!this.parameters.sitekey,this.auth,"argument-error"),Hh(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Hh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ep()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Hh(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Hh(Yh()&&!Ip(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await id(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Hh(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Hh(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kp{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=vf._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Gp(e,t,n){var r;const i=await n.verify();try{let o;if(Hh("string"===typeof i,e,"argument-error"),Hh(n.type===zp,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Hh("enroll"===t.type,e,"internal-error");const n=await function(e,t){return id(e,"POST","/v2/accounts/mfaEnrollment:start",rd(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Hh("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Hh(n,e,"missing-multi-factor-info");const s=await function(e,t){return id(e,"POST","/v2/accounts/mfaSignIn:start",rd(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return id(e,"POST","/v1/accounts:sendVerificationCode",rd(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Hp{constructor(e){this.providerId=Hp.PROVIDER_ID,this.auth=Qd(e)}verifyPhoneNumber(e,t){return Gp(this.auth,e,Ol(t))}static credential(e,t){return vf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Hp.credentialFromTaggedObject(t)}static credentialFromError(e){return Hp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?vf._fromTokenResponse(n,r):null}}function Wp(e,t){return t?Nd(t):(Hh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Hp.PROVIDER_ID="phone",Hp.PHONE_SIGN_IN_METHOD="phone";class Qp extends sf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jp(e){return jf(e.auth,new Qp(e),e.bypassAuthState)}function Yp(e){const{auth:t,user:n}=e;return Hh(n,t,"internal-error"),Uf(n,new Qp(e),e.bypassAuthState)}async function $p(e){const{auth:t,user:n}=e;return Hh(n,t,"internal-error"),Mf(n,new Qp(e),e.bypassAuthState)}class Xp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(yL){this.reject(yL)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(yL){this.reject(yL)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jp;case"linkViaPopup":case"linkViaRedirect":return $p;case"reauthViaPopup":case"reauthViaRedirect":return Yp;default:Vh(this.auth,"internal-error")}}resolve(e){Qh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zp=new Xh(2e3,1e4);class em extends Xp{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,em.currentPopupAction&&em.currentPopupAction.cancel(),em.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Hh(e,this.auth,"internal-error"),e}async onExecution(){Qh(1===this.filter.length,"Popup operations only handle one event");const e=bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(zh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(zh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,em.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(zh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Zp.get())};e()}}em.currentPopupAction=null;const tm="pendingRedirect",nm=new Map;class rm extends Xp{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=nm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=am(t),r=sm(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(yL){e=()=>Promise.reject(yL)}nm.set(this.auth._key(),e)}return this.bypassAuthState||nm.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function im(e,t){return sm(e)._set(am(t),"true")}function om(e,t){nm.set(e._key(),t)}function sm(e){return Nd(e._redirectPersistence)}function am(e){return Rd(tm,e.config.apiKey,e.name)}function cm(e,t,n){return async function(e,t,n){if(Ju(e.app))return Promise.reject(qh(e));const r=Qd(e);Kh(e,t,bf),await r._initializationPromise;const i=Wp(r,n);return await im(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function lm(e,t,n){return async function(e,t,n){const r=Ol(e);if(Kh(r.auth,t,bf),Ju(r.auth.app))return Promise.reject(qh(r.auth));await r.auth._initializationPromise;const i=Wp(r.auth,n);await im(i,r.auth);const o=await dm(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function um(e,t,n){return async function(e,t,n){const r=Ol(e);Kh(r.auth,t,bf),await r.auth._initializationPromise;const i=Wp(r.auth,n);await Ff(!1,r,t.providerId),await im(i,r.auth);const o=await dm(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function hm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ju(e.app))return Promise.reject(qh(e));const r=Qd(e),i=Wp(r,t),o=new rm(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function dm(e){const t=bp("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class fm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!mm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(zh(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pm(e))}saveEventToCache(e){this.cachedEventUids.add(pm(e)),this.lastProcessedEventTime=Date.now()}}function pm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function mm(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function gm(e){return id(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const vm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ym=/^https?/;function wm(e){const t=Jh(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ym.test(n))return!1;if(vm.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bm=new Xh(3e4,6e4);function _m(){const e=Ep().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Em(e){return new Promise(((t,n)=>{var r,i,o;function s(){_m(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_m(),n(zh(e,"network-request-failed"))},timeout:bm.get()})}if(null===(i=null===(r=Ep().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Ep().gapi)||void 0===o?void 0:o.load)){const t=Xd("iframefcb");return Ep()[t]=()=>{gapi.load?s():n(zh(e,"network-request-failed"))},$d("".concat(Yd.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw Im=null,e}))}let Im=null;const Sm=new Xh(5e3,15e3),Tm="__/auth/iframe",km="emulator/auth/iframe",Cm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nm(e){const t=e.config;Hh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Zh(t,km):"https://".concat(e.config.authDomain,"/").concat(Tm),r={apiKey:t.apiKey,appName:e.name,v:eh},i=xm.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(xl(r).slice(1))}async function Am(e){const t=await function(e){return Im=Im||Em(e),Im}(e),n=Ep().gapi;return Hh(n,e,"internal-error"),t.open({where:document.body,url:Nm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cm,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=zh(e,"network-request-failed"),o=Ep().setTimeout((()=>{r(i)}),Sm.get());function s(){Ep().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const Pm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(yL){}}}function Dm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Pm),{width:r.toString(),height:i.toString(),top:o,left:s}),l=fl().toLowerCase();n&&(a=Fd(l)?"_blank":n),Ld(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Bd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Rm(null);const h=window.open(t||"",a,u);Hh(h,e,"popup-blocked");try{h.focus()}catch(yL){}return new Rm(h)}const Om="__/auth/handler",Lm="emulator/auth/handler",Mm=encodeURIComponent("fac");async function Fm(e,t,n,r,i,o){Hh(e.config.authDomain,e,"auth-domain-config-required"),Hh(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:eh,eventId:i};if(t instanceof bf){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof _f){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Mm,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Om);return Zh(t,Lm)}(e),"?").concat(xl(a).slice(1)).concat(l)}const Um="webStorageSupport";const jm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yp,this._completeRedirectFn=hm,this._overrideRedirectResult=om}async _openPopup(e,t,n,r){var i;Qh(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Dm(e,await Fm(e,t,n,Jh(),r),bp())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ep().location.href=e}(await Fm(e,t,n,Jh(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Qh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Am(e),n=new fm(e);return t.register("authEvent",(t=>{Hh(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Um];void 0!==i&&t(!!i),Vh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await gm(e);for(const r of t)try{if(wm(r))return}catch(n){}Vh(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qd()||Md()||Bd()}};class Vm{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Wh("unexpected MultiFactorSessionType")}}}class zm extends Vm{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new zm(e)}_finalizeEnroll(e,t,n){return function(e,t){return id(e,"POST","/v2/accounts/mfaEnrollment:finalize",rd(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return id(e,"POST","/v2/accounts/mfaSignIn:finalize",rd(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Bm{constructor(){}static assertion(e){return zm._fromCredential(e)}}Bm.FACTOR_ID="phone";var qm="@firebase/auth",Km="1.7.5";class Gm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Hh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=ll())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Hm;function Wm(){return window}Yd={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=zh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Hm="Browser",Gu(new Ll("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Hh(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:Hm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kd(Hm)},l=new Wd(r,i,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nd);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Gu(new Ll("auth-internal",(e=>(e=>new Gm(e))(Qd(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),sh(qm,Km,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Hm)),sh(qm,Km,"esm2017");async function Qm(e,t,n){var r;const{BuildInfo:i}=Wm();Qh(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(Qh(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return Bd()?s.ibi=i.packageName:jd()?s.apn=i.packageName:Vh(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,Fm(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function Jm(e){const{cordova:t}=Wm();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Ym=20;class $m extends fm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Xm(e){const t=await tg()._get(ng(e));return t&&await tg()._remove(ng(e)),t}function Zm(e,t){var n,r;const i=function(e){const t=rg(e),n=t.link?decodeURIComponent(t.link):void 0,r=rg(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return rg(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=rg(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(yL){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?zh(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function eg(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ym;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function tg(){return Nd(gp)}function ng(e){return Rd("authEvent",e.config.apiKey,e.name)}function rg(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Nl(n.join("?"))}const ig=class{constructor(){this._redirectPersistence=yp,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hm,this._overrideRedirectResult=om}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new $m(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Vh(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,c,l,u;const h=Wm();Hh("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Hh("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Hh("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Hh("function"===typeof(null===(c=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Hh("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),nm.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:eg(),postBody:null,tenantId:e.tenantId,error:zh(e,"no-auth-event")}}(e,n,r);await function(e,t){return tg()._set(ng(e),t)}(e,o);const s=await Qm(e,o,t);return async function(e,t,n){const{cordova:r}=Wm();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function c(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{s(zh(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),jd()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Jm(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Wm(),n={};Bd()?n.iosBundleId=t.packageName:jd()?n.androidPackageName=t.packageName:Vh(e,"operation-not-supported-in-this-environment"),await gm(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Wm(),o=setTimeout((async()=>{await Xm(e),t.onEvent(og())}),500),s=async n=>{clearTimeout(o);const r=await Xm(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Zm(r,n.url)),t.onEvent(i||og())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,c="".concat(i.packageName.toLowerCase(),"://");Wm().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&s({url:e}),"function"===typeof a)try{a(e)}catch(yL){console.error(yL)}}}};function og(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:zh("no-auth-event")}}function sg(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ag(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return!("file:"!==sg()&&"ionic:"!==sg()&&"capacitor:"!==sg()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function cg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return wl()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl();return/Edge\/\d+/.test(e)}(e)}function lg(){try{const e=self.localStorage,t=bp();if(e)return e.setItem(t,"1"),e.removeItem(t),!cg()||_l()}catch(yL){return ug()&&_l()}return!1}function ug(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function hg(){return("http:"===sg()||"https:"===sg()||vl()||ag())&&!(yl()||pl())&&lg()&&!ug()}function dg(){return ag()&&"undefined"!==typeof document}const fg={LOCAL:"local",NONE:"none",SESSION:"session"},pg=Hh,mg="persistence";async function gg(e){await e._initializationPromise;const t=vg(),n=Rd(mg,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function vg(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(yL){return null}}const yg=Hh;class wg{constructor(){this.browserResolver=Nd(jm),this.cordovaResolver=Nd(ig),this.underlyingResolver=null,this._redirectPersistence=yp,this._completeRedirectFn=hm,this._overrideRedirectResult=om}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return dg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yg(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!dg()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function bg(e){return e.unwrap()}function _g(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Tg(e,function(e,t){var n;const r=Ol(e),i=t;return Hh(t.customData.operationType,r,"argument-error"),Hh(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),up._fromError(r,i)}(e,t))}else if(r){const e=Eg(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Eg(e){const{_tokenResponse:t}=e instanceof El?e.customData:e;if(!t)return null;if(!(e instanceof El)&&"temporaryProof"in t&&"phoneNumber"in t)return Hp.credentialFromResult(e);const n=t.providerId;if(!n||n===Ch.PASSWORD)return null;let r;switch(n){case Ch.GOOGLE:r=Sf;break;case Ch.FACEBOOK:r=If;break;case Ch.GITHUB:r=Tf;break;case Ch.TWITTER:r=xf;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?kf._create(n,s):mf._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new Ef(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof El?r.credentialFromError(e):r.credentialFromResult(e)}function Ig(e,t){return t.catch((t=>{throw t instanceof El&&_g(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Eg(r)),additionalUserInfo:cp(e),user:kg.getOrCreate(n)};var r}))}async function Sg(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Ig(e,n.confirm(t))}}class Tg{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ig(bg(this.auth),this.resolver.resolveSignIn(e))}}class kg{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ol(e);return dp.has(t)||dp.set(t,hp._fromUser(t)),dp.get(t)}(e)}static getOrCreate(e){return kg.USER_MAP.has(e)||kg.USER_MAP.set(e,new kg(e)),kg.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ig(this.auth,zf(this._delegate,e))}async linkWithPhoneNumber(e,t){return Sg(this.auth,async function(e,t,n){const r=Ol(e);await Ff(!1,r,"phone");const i=await Gp(r.auth,t,Ol(n));return new Kp(i,(e=>zf(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Ig(this.auth,async function(e,t,n){const r=Ol(e);Kh(r.auth,t,bf);const i=Wp(r.auth,n);return new em(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,wg))}async linkWithRedirect(e){return await gg(Qd(this.auth)),um(this._delegate,e,wg)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ig(this.auth,Bf(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Sg(this.auth,async function(e,t,n){const r=Ol(e);if(Ju(r.auth.app))return Promise.reject(qh(r.auth));const i=await Gp(r.auth,t,Ol(n));return new Kp(i,(e=>Bf(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Ig(this.auth,async function(e,t,n){const r=Ol(e);if(Ju(r.auth.app))return Promise.reject(zh(r.auth,"operation-not-supported-in-this-environment"));Kh(r.auth,t,bf);const i=Wp(r.auth,n);return new em(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,wg))}async reauthenticateWithRedirect(e){return await gg(Qd(this.auth)),lm(this._delegate,e,wg)}sendEmailVerification(e){return Xf(this._delegate,e)}async unlink(e){return await Lf(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Ol(e);return Ju(n.auth.app)?Promise.reject(qh(n.auth)):tp(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return tp(Ol(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Ol(e);if(Ju(n.auth.app))return Promise.reject(qh(n.auth));await Mf(n,t)}(this._delegate,e)}updateProfile(e){return ep(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Zf(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}kg.USER_MAP=new WeakMap;const Cg=Hh;class xg{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Cg(n,"invalid-api-key",{appName:e.name}),Cg(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?wg:void 0;this._delegate=t.initialize({options:{persistence:Ag(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Lh),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?kg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){nf(this._delegate,e,t)}applyActionCode(e){return Jf(this._delegate,e)}checkActionCode(e){return Yf(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await af(Ol(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qf(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ig(this._delegate,async function(e,t,n){if(Ju(e.app))return Promise.reject(qh(e));const r=Qd(e),i=tf(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nf),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qf(e),t})),s=await Af._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return $f(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=yf.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Cg(hg(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Qd(e)._initializationPromise,hm(e,t,!1)}(this._delegate,wg);return e?Ig(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Qd(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=Ng(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=Ng(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Qd(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Hh(t.handleCodeInApp,r,"argument-error"),t&&Wf(r,e,t)}(i,n),await tf(r,i,"getOobCode",df)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Qd(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Wf(r,i,n),await tf(r,i,"getOobCode",hf)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){pg(Object.values(fg).includes(t),e,"invalid-persistence-type"),yl()?pg(t!==fg.SESSION,e,"unsupported-persistence-type"):pl()?pg(t===fg.NONE,e,"unsupported-persistence-type"):ug()?pg(t===fg.NONE||t===fg.LOCAL&&_l(),e,"unsupported-persistence-type"):pg(t===fg.NONE||lg(),e,"unsupported-persistence-type")}(this._delegate,e),e){case fg.SESSION:t=yp;break;case fg.LOCAL:t=await Nd(Dp)._isAvailable()?Dp:gp;break;case fg.NONE:t=Pd;break;default:return Vh("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ig(this._delegate,async function(e){var t;if(Ju(e.app))return Promise.reject(qh(e));const n=Qd(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Af({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Nf(n,{returnSecureToken:!0}),i=await Af._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Ig(this._delegate,Vf(this._delegate,e))}signInWithCustomToken(e){return Ig(this._delegate,qf(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ig(this._delegate,function(e,t,n){return Ju(e.app)?Promise.reject(qh(e)):Vf(Ol(e),wf.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qf(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Ig(this._delegate,async function(e,t,n){if(Ju(e.app))return Promise.reject(qh(e));const r=Ol(e),i=wf.credentialWithLink(t,n||Jh());return Hh(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vf(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Sg(this._delegate,async function(e,t,n){if(Ju(e.app))return Promise.reject(qh(e));const r=Qd(e),i=await Gp(r,t,Ol(n));return new Kp(i,(e=>Vf(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Cg(hg(),this._delegate,"operation-not-supported-in-this-environment"),Ig(this._delegate,async function(e,t,n){if(Ju(e.app))return Promise.reject(zh(e,"operation-not-supported-in-this-environment"));const r=Qd(e);Kh(e,t,bf);const i=Wp(r,n);return new em(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,wg))}async signInWithRedirect(e){return Cg(hg(),this._delegate,"operation-not-supported-in-this-environment"),await gg(this._delegate),cm(this._delegate,e,wg)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Yf(Ol(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Ng(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&kg.getOrCreate(e)),error:t,complete:n}}function Ag(e,t){const n=function(e,t){const n=vg();if(!n)return[];const r=Rd(mg,e,t);switch(n.getItem(r)){case fg.NONE:return[Pd];case fg.LOCAL:return[Dp,yp];case fg.SESSION:return[yp];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Dp)||n.push(Dp),"undefined"!==typeof window)for(const r of[gp,yp])n.includes(r)||n.push(r);return n.includes(Pd)||n.push(Pd),n}xg.Persistence=fg;class Pg{constructor(){this.providerId="phone",this._delegate=new Hp(bg(Th.auth()))}static credential(e,t){return Hp.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Pg.PHONE_SIGN_IN_METHOD=Hp.PHONE_SIGN_IN_METHOD,Pg.PROVIDER_ID=Hp.PROVIDER_ID;const Rg=Hh;class Dg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Th.app();var r;Rg(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new qp(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Og;(Og=Th).INTERNAL.registerComponent(new Ll("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new xg(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xh,PASSWORD_RESET:Nh,RECOVER_EMAIL:Ah,REVERT_SECOND_FACTOR_ADDITION:Ph,VERIFY_AND_CHANGE_EMAIL:Rh,VERIFY_EMAIL:Dh}},EmailAuthProvider:wf,FacebookAuthProvider:If,GithubAuthProvider:Tf,GoogleAuthProvider:Sf,OAuthProvider:Ef,SAMLAuthProvider:Cf,PhoneAuthProvider:Pg,PhoneMultiFactorGenerator:Bm,RecaptchaVerifier:Dg,TwitterAuthProvider:xf,Auth:xg,AuthCredential:sf,Error:El}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Og.registerVersion("@firebase/auth-compat","0.5.10");var Lg,Mg,Fg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ug={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),c=o(1),l=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var l=o.add(r);0>=l.l(e)&&(i=i.add(n),o=l),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(o=s(n)).j(t);h(l)||0<l.l(e);)l=(o=s(n-=r)).j(t);u(o)&&(o=c),i=i.add(o),e=f(e,l)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var c=this.i(i)>>>16,f=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=f*g,p(n,2*i+2*o),n[2*i+2*o+1]+=c*g,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*m,p(n,2*i+2*o+1),n[2*i+2*o+2]+=c*m,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Mg=Ug.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var c=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+c),n);8>c?(c=s(Math.pow(n,c)),i=i.j(c).add(s(l))):i=(i=i.j(r)).add(s(l))}return i},Lg=Ug.Integer=r}).apply("undefined"!==typeof Fg?Fg:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var jg,Vg,zg,Bg,qg,Kg,Gg,Hg,Wg,Qg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jg={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Qg&&Qg];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function I(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){I(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=q(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new j(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var K="closure_lm_"+(1e6*Math.random()|0),G={};function H(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,s(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,c=Z(e);if(c||(e[K]=c=new z(e)),(n=c.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Q(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,s(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function J(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)J(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(o=e.g[t],n,r,i))&&(V(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[K]=null)):V(e)}}}function $(e){return e in G?G[e]:G[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[K])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;_(t=new D(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,c=s.ha||s.src;s.fa&&B(e.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(e){R.call(this),this.h=e,this.g={}}h(ce,R);var le=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}ce.prototype.N=function(){ce.aa.N.call(this),ue(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function we(){D.call(this,"c")}h(ye,D),h(we,D);var be={},_e=null;function Ee(){return _e=_e||new ne}function Ie(e){D.call(this,be.La,e)}function Se(e){const t=Ee();re(t,new Ie(t))}function Te(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=Ee();re(t,new Te(t,e))}function Ce(e,t){D.call(this,be.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Ie,D),be.STAT_EVENT="statevent",h(Te,D),be.Ma="timingevent",h(Ce,D),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},Ue={};function je(e,t,n){e.L=1,e.v=ht(st(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(le[0]=i.toString()),i=le);for(var o=0;o<i.length;o++){var s=H(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+l+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,Ke(e,e.I)}function Ke(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(l(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||cn(e.j,e)}function We(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(l(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,c=r.L;c&&(a.I=c),a.B&&(Ge(a),qe(a)),r.g=s}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=l[0]&&"close"!=l[0]||un(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?un(n,7):Jt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Se()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||Se(),Ge(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Ht(this.g);e="";var o=r.length,s=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){We(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),We(this),He(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==d&&(this.s=4,ke(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,ke(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),on(h),h.M=!0,ke(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),We(this),He(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==d&&We(this),this.o&&!this.J&&(4==d?cn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),We(this),He(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,We(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),ke(17)),We(this),this.s=2,He(this)):Ke(this,this.S-e)};var Je=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ct(this,t[4]),this.l=dt(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function It(e,t){Et(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return Et(e),t=kt(e,t),e.g.has(t)}function Tt(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function xt(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;s(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(yL){throw t.push(r+"type="+encodeURIComponent("_badmap")),yL}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,St(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},h(At,pe),At.prototype.g=function(){return new Pt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Ot(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Ut=/^https?$/i,jt=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Ut.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Gt(e)?e.g.statusText:""}catch(c){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Kt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(yL){}}}function Kt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Xg){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Jt(e){if($t(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function $t(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),x||(C(),x=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const c=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Nt(c,e,"req"+n+"_")}catch(o){r&&r(c)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),x||(C(),x=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(l(e.Fa,e),ln(e,e.v)),e.v++,!0)}function on(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(st(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function cn(e,t){var n=null;if(e.g==t){an(e),on(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(l(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),$t(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ct(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&ct(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new At({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Vt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kt(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){Vt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let o=this.o;if(this.S&&(o?(o=w(o),_(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Lt(o)))+"&"+t:this.m&&Mt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Jt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Wg=Jg.createWebChannelTransport=function(){return new mn},Hg=Jg.getStatEventTarget=function(){return Ee()},Gg=Jg.Event=be,Kg=Jg.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,qg=Jg.ErrorCode=Re,De.COMPLETE="complete",Bg=Jg.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,zg=Jg.WebChannel=ge,Vg=Jg.FetchXmlHttpFactory=At,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,jg=Jg.XhrIo=Ft}).apply("undefined"!==typeof Qg?Qg:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Yg="@firebase/firestore";class $g{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$g.UNAUTHENTICATED=new $g(null),$g.GOOGLE_CREDENTIALS=new $g("google-credentials-uid"),$g.FIRST_PARTY=new $g("first-party-uid"),$g.MOCK_USER=new $g("mock-user");let Xg="10.12.3";const Zg=new Gl("@firebase/firestore");function ev(){return Zg.logLevel}function tv(e){if(Zg.logLevel<=Vl.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(iv);Zg.debug("Firestore (".concat(Xg,"): ").concat(e),...i)}}function nv(e){if(Zg.logLevel<=Vl.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(iv);Zg.error("Firestore (".concat(Xg,"): ").concat(e),...i)}}function rv(e){if(Zg.logLevel<=Vl.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(iv);Zg.warn("Firestore (".concat(Xg,"): ").concat(e),...i)}}function iv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ov(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Xg,") INTERNAL ASSERTION FAILED: ")+e;throw nv(t),new Error(t)}function sv(e,t){e||ov()}function av(e,t){return e}const cv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lv extends El{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class uv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class hv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class dv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($g.UNAUTHENTICATED)))}shutdown(){}}class fv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pv{constructor(e){this.t=e,this.currentUser=$g.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new uv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new uv,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{tv("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(tv("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new uv)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(tv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(sv("string"==typeof t.accessToken),new hv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sv(null===e||"string"==typeof e),new $g(e)}}class mv{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=$g.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gv{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new mv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($g.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&tv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,tv("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{tv("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):tv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(sv("string"==typeof e.token),this.R=e.token,new vv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class bv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=wv(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function _v(e,t){return e<t?-1:e>t?1:0}function Ev(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Iv(e){return e+"\0"}class Sv{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new lv(cv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new lv(cv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new lv(cv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lv(cv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sv.fromMillis(Date.now())}static fromDate(e){return Sv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Sv(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_v(this.nanoseconds,e.nanoseconds):_v(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tv{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tv(e)}static min(){return new Tv(new Sv(0,0))}static max(){return new Tv(new Sv(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kv{constructor(e,t,n){void 0===t?t=0:t>e.length&&ov(),void 0===n?n=e.length-t:n>e.length-t&&ov(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===kv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kv?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cv extends kv{construct(e,t,n){return new Cv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new lv(cv.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Cv(e)}static emptyPath(){return new Cv([])}}const xv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nv extends kv{construct(e,t,n){return new Nv(e,t,n)}static isValidIdentifier(e){return xv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nv(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new lv(cv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new lv(cv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new lv(cv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new lv(cv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nv(t)}static emptyPath(){return new Nv([])}}class Av{constructor(e){this.path=e}static fromPath(e){return new Av(Cv.fromString(e))}static fromName(e){return new Av(Cv.fromString(e).popFirst(5))}static empty(){return new Av(Cv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Av(new Cv(e.slice()))}}class Pv{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Rv(e){return e.fields.find((e=>2===e.kind))}function Dv(e){return e.fields.filter((e=>2!==e.kind))}Pv.UNKNOWN_ID=-1;class Ov{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lv(0,Uv.min())}}function Mv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tv.fromTimestamp(1e9===r?new Sv(n+1,0):new Sv(n,r));return new Uv(i,Av.empty(),t)}function Fv(e){return new Uv(e.readTime,e.key,-1)}class Uv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Uv(Tv.min(),Av.empty(),-1)}static max(){return new Uv(Tv.max(),Av.empty(),-1)}}function jv(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Av.comparator(e.documentKey,t.documentKey),0!==n?n:_v(e.largestBatchId,t.largestBatchId))}const Vv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bv(e){if(e.code!==cv.FAILED_PRECONDITION||e.message!==Vv)throw e;tv("LocalStore","Unexpectedly lost primary lease")}class qv{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ov(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qv(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof qv?t:qv.resolve(t)}catch(e){return qv.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):qv.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):qv.reject(t)}static resolve(e){return new qv(((t,n)=>{t(e)}))}static reject(e){return new qv(((t,n)=>{n(e)}))}static waitFor(e){return new qv(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=qv.resolve(!1);for(const n of e)t=t.next((e=>e?qv.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new qv(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{o[c]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new qv(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Kv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new uv,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Qv(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Zv(t.target.error);this.V.reject(new Qv(e,n))}}static open(e,t,n,r){try{return new Kv(t,e.transaction(r,n))}catch(e){throw new Qv(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(tv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Yv(t)}}class Gv{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Gv.S(fl())&&nv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tv("SimpleDb","Removing database:",e),$v(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!_l())return!1;if(Gv.C())return!0;const e=fl(),t=Gv.S(e),n=0<t&&t<10,r=Hv(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(tv("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Qv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new lv(cv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new lv(cv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Qv(e,r))},r.onupgradeneeded=e=>{tv("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{tv("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.M(e);const t=Kv.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),qv.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(tv("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Hv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Wv{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $v(this.B.delete())}}class Qv extends lv{constructor(e,t){super(cv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Jv(e){return"IndexedDbTransactionError"===e.name}class Yv{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(tv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(tv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$v(n)}add(e){return tv("SimpleDb","ADD",this.store.name,e,e),$v(this.store.add(e))}get(e){return $v(this.store.get(e)).next((t=>(void 0===t&&(t=null),tv("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return tv("SimpleDb","DELETE",this.store.name,e),$v(this.store.delete(e))}count(){return tv("SimpleDb","COUNT",this.store.name),$v(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new qv(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new qv(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){tv("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new qv(((n,r)=>{t.onerror=e=>{const t=Zv(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new qv(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Wv(i),s=t(i.primaryKey,i.value,o);if(s instanceof qv){const e=s.catch((e=>(o.done(),qv.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>qv.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $v(e){return new qv(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Zv(e.target.error);n(t)}}))}let Xv=!1;function Zv(e){const t=Gv.S(fl());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new lv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Xv||(Xv=!0,setTimeout((()=>{throw e}),0)),e}}return e}class ey{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){tv("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{tv("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Jv(e)?tv("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Bv(e)}await this.X(6e4)}))}}class ty{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return qv.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return tv("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(tv("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Fv(t);jv(r,n)>0&&(n=r)})),new Uv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ny{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ry(e){return null==e}function iy(e){return 0===e&&1/e==-1/0}function oy(e){return"number"==typeof e&&Number.isInteger(e)&&!iy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function sy(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=cy(t)),t=ay(e.get(n),t);return cy(t)}function ay(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function cy(e){return e+"\x01\x01"}function ly(e){const t=e.length;if(sv(t>=2),2===t)return sv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Cv.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&ov(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:ov()}o=t+2}return new Cv(r)}ny.oe=-1;const uy=["userId","batchId"];function hy(e,t){return[e,sy(t)]}function dy(e,t,n){return[e,sy(t),n]}const fy={},py=["prefixPath","collectionGroup","readTime","documentId"],my=["prefixPath","collectionGroup","documentId"],gy=["collectionGroup","readTime","prefixPath","documentId"],vy=["canonicalId","targetId"],yy=["targetId","path"],wy=["path","targetId"],by=["collectionId","parent"],_y=["indexId","uid"],Ey=["uid","sequenceNumber"],Iy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sy=["indexId","uid","orderedDocumentKey"],Ty=["userId","collectionPath","documentId"],ky=["userId","collectionPath","largestBatchId"],Cy=["userId","collectionGroup","largestBatchId"],xy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ny=[...xy,"documentOverlays"],Ay=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Py=Ay,Ry=[...Py,"indexConfiguration","indexState","indexEntries"],Dy=Ry;class Oy extends zv{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ly(e,t){const n=av(e);return Gv.F(n._e,t)}function My(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fy(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class jy{constructor(e,t){this.comparator=e,this.root=t||zy.EMPTY}insert(e,t){return new jy(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zy.BLACK,null,null))}remove(e){return new jy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vy(this.root,e,this.comparator,!0)}}class Vy{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:zy.RED,this.left=null!=r?r:zy.EMPTY,this.right=null!=i?i:zy.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new zy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zy.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return zy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ov();if(this.right.isRed())throw ov();const e=this.left.check();if(e!==this.right.check())throw ov();return e+(this.isRed()?0:1)}}zy.EMPTY=null,zy.RED=!0,zy.BLACK=!1,zy.EMPTY=new class{constructor(){this.size=0}get key(){throw ov()}get value(){throw ov()}get color(){throw ov()}get left(){throw ov()}get right(){throw ov()}copy(e,t,n,r,i){return this}insert(e,t,n){return new zy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class By{constructor(e){this.comparator=e,this.data=new jy(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(e){return new qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof By))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new By(this.comparator);return t.data=e,t}}class qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ky(e){return e.hasNext()?e.getNext():void 0}class Gy{constructor(e){this.fields=e,e.sort(Nv.comparator)}static empty(){return new Gy([])}unionWith(e){let t=new By(Nv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Gy(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ev(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Hy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wy{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Hy("Invalid base64 string: "+e):e}}(e);return new Wy(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wy(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _v(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wy.EMPTY_BYTE_STRING=new Wy("");const Qy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jy(e){if(sv(!!e),"string"==typeof e){let t=0;const n=Qy.exec(e);if(sv(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yy(e.seconds),nanos:Yy(e.nanos)}}function Yy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $y(e){return"string"==typeof e?Wy.fromBase64String(e):Wy.fromUint8Array(e)}function Xy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zy(e){const t=e.mapValue.fields.__previous_value__;return Xy(t)?Zy(t):t}function ew(e){const t=Jy(e.mapValue.fields.__local_write_time__.timestampValue);return new Sv(t.seconds,t.nanos)}class tw{constructor(e,t,n,r,i,o,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=c}}class nw{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nw("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nw&&e.projectId===this.projectId&&e.database===this.database}}const rw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iw={nullValue:"NULL_VALUE"};function ow(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xy(e)?4:ww(e)?9007199254740991:10:ov()}function sw(e,t){if(e===t)return!0;const n=ow(e);if(n!==ow(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ew(e).isEqual(ew(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Jy(e.timestampValue),r=Jy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $y(e.bytesValue).isEqual($y(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yy(e.geoPointValue.latitude)===Yy(t.geoPointValue.latitude)&&Yy(e.geoPointValue.longitude)===Yy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yy(e.integerValue)===Yy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yy(e.doubleValue),r=Yy(t.doubleValue);return n===r?iy(n)===iy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ev(e.arrayValue.values||[],t.arrayValue.values||[],sw);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(My(n)!==My(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sw(n[i],r[i])))return!1;return!0}(e,t);default:return ov()}}function aw(e,t){return void 0!==(e.values||[]).find((e=>sw(e,t)))}function cw(e,t){if(e===t)return 0;const n=ow(e),r=ow(t);if(n!==r)return _v(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _v(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yy(e.integerValue||e.doubleValue),r=Yy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return lw(e.timestampValue,t.timestampValue);case 4:return lw(ew(e),ew(t));case 5:return _v(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$y(e),r=$y(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=_v(n[i],r[i]);if(0!==e)return e}return _v(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=_v(Yy(e.latitude),Yy(t.latitude));return 0!==n?n:_v(Yy(e.longitude),Yy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cw(n[i],r[i]);if(e)return e}return _v(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===rw.mapValue&&t===rw.mapValue)return 0;if(e===rw.mapValue)return 1;if(t===rw.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=_v(r[s],o[s]);if(0!==e)return e;const t=cw(n[r[s]],i[o[s]]);if(0!==t)return t}return _v(r.length,o.length)}(e.mapValue,t.mapValue);default:throw ov()}}function lw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _v(e,t);const n=Jy(e),r=Jy(t),i=_v(n.seconds,r.seconds);return 0!==i?i:_v(n.nanos,r.nanos)}function uw(e){return hw(e)}function hw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Jy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $y(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Av.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hw(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(hw(e.fields[i]));return n+"}"}(e.mapValue):ov()}function dw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fw(e){return!!e&&"integerValue"in e}function pw(e){return!!e&&"arrayValue"in e}function mw(e){return!!e&&"nullValue"in e}function gw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vw(e){return!!e&&"mapValue"in e}function yw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fy(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=yw(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yw(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ww(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function bw(e){return"nullValue"in e?iw:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?dw(nw.empty(),Av.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ov()}function _w(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?dw(nw.empty(),Av.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?rw:ov()}function Ew(e,t){const n=cw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Iw(e,t){const n=cw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Sw{constructor(e){this.value=e}static empty(){return new Sw({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yw(t)}setAll(e){let t=Nv.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=yw(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());vw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sw(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fy(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Sw(yw(this.value))}}function Tw(e){const t=[];return Fy(e.fields,((e,n)=>{const r=new Nv([e]);if(vw(n)){const e=Tw(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Gy(t)}class kw{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new kw(e,0,Tv.min(),Tv.min(),Tv.min(),Sw.empty(),0)}static newFoundDocument(e,t,n,r){return new kw(e,1,t,Tv.min(),n,r,0)}static newNoDocument(e,t){return new kw(e,2,t,Tv.min(),Tv.min(),Sw.empty(),0)}static newUnknownDocument(e,t){return new kw(e,3,t,Tv.min(),Tv.min(),Sw.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sw.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sw.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kw&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kw(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Cw{constructor(e,t){this.position=e,this.inclusive=t}}function xw(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Av.comparator(Av.fromName(s.referenceValue),n.key):cw(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Nw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!sw(e.position[n],t.position[n]))return!1;return!0}class Aw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Pw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Rw{}class Dw extends Rw{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new qw(e,t,n):"array-contains"===t?new Ww(e,n):"in"===t?new Qw(e,n):"not-in"===t?new Jw(e,n):"array-contains-any"===t?new Yw(e,n):new Dw(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Kw(e,n):new Gw(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cw(t,this.value)):null!==t&&ow(this.value)===ow(t)&&this.matchesComparison(cw(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ov()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ow extends Rw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ow(e,t)}matches(e){return Lw(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Lw(e){return"and"===e.op}function Mw(e){return"or"===e.op}function Fw(e){return Uw(e)&&Lw(e)}function Uw(e){for(const t of e.filters)if(t instanceof Ow)return!1;return!0}function jw(e){if(e instanceof Dw)return e.field.canonicalString()+e.op.toString()+uw(e.value);if(Fw(e))return e.filters.map((e=>jw(e))).join(",");{const t=e.filters.map((e=>jw(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Vw(e,t){return e instanceof Dw?function(e,t){return t instanceof Dw&&e.op===t.op&&e.field.isEqual(t.field)&&sw(e.value,t.value)}(e,t):e instanceof Ow?function(e,t){return t instanceof Ow&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Vw(n,t.filters[r])),!0)}(e,t):void ov()}function zw(e,t){const n=e.filters.concat(t);return Ow.create(n,e.op)}function Bw(e){return e instanceof Dw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(uw(e.value))}(e):e instanceof Ow?function(e){return e.op.toString()+" {"+e.getFilters().map(Bw).join(" ,")+"}"}(e):"Filter"}class qw extends Dw{constructor(e,t,n){super(e,t,n),this.key=Av.fromName(n.referenceValue)}matches(e){const t=Av.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kw extends Dw{constructor(e,t){super(e,"in",t),this.keys=Hw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Gw extends Dw{constructor(e,t){super(e,"not-in",t),this.keys=Hw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Hw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Av.fromName(e.referenceValue)))}class Ww extends Dw{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pw(t)&&aw(t.arrayValue,this.value)}}class Qw extends Dw{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&aw(this.value.arrayValue,t)}}class Jw extends Dw{constructor(e,t){super(e,"not-in",t)}matches(e){if(aw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!aw(this.value.arrayValue,t)}}class Yw extends Dw{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pw(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>aw(this.value.arrayValue,e)))}}class $w{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ue=null}}function Xw(e){return new $w(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zw(e){const t=av(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>jw(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ry(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>uw(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>uw(e))).join(",")),t.ue=e}return t.ue}function eb(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Pw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vw(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nw(e.startAt,t.startAt)&&Nw(e.endAt,t.endAt)}function tb(e){return Av.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nb(e,t){return e.filters.filter((e=>e instanceof Dw&&e.field.isEqual(t)))}function rb(e,t,n){let r=iw,i=!0;for(const o of nb(e,t)){let e=iw,t=!0;switch(o.op){case"<":case"<=":e=bw(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=iw}Ew({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Ew({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function ib(e,t,n){let r=rw,i=!0;for(const o of nb(e,t)){let e=rw,t=!0;switch(o.op){case">=":case">":e=_w(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=rw}Iw({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Iw({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ob{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sb(e,t,n,r,i,o,s,a){return new ob(e,t,n,r,i,o,s,a)}function ab(e){return new ob(e)}function cb(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lb(e){return null!==e.collectionGroup}function ub(e){const t=av(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new By(Nv.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Aw(r,n))})),e.has(Nv.keyField().canonicalString())||t.ce.push(new Aw(Nv.keyField(),n))}return t.ce}function hb(e){const t=av(e);return t.le||(t.le=db(t,ub(e))),t.le}function db(e,t){if("F"===e.limitType)return Xw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Aw(e.field,t)}));const n=e.endAt?new Cw(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Cw(e.startAt.position,e.startAt.inclusive):null;return Xw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fb(e,t){const n=e.filters.concat([t]);return new ob(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pb(e,t,n){return new ob(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mb(e,t){return eb(hb(e),hb(t))&&e.limitType===t.limitType}function gb(e){return"".concat(Zw(hb(e)),"|lt:").concat(e.limitType)}function vb(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Bw(e))).join(", "),"]")),ry(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>uw(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>uw(e))).join(",")),"Target(".concat(t,")")}(hb(e)),"; limitType=").concat(e.limitType,")")}function yb(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Av.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ub(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=xw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ub(e),t))&&!(e.endAt&&!function(e,t,n){const r=xw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ub(e),t))}(e,t)}function wb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bb(e){return(t,n)=>{let r=!1;for(const i of ub(e)){const e=_b(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function _b(e,t,n){const r=e.field.isKeyField()?Av.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cw(r,i):ov()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ov()}}class Eb{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fy(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Uy(this.inner)}size(){return this.innerSize}}const Ib=new jy(Av.comparator);function Sb(){return Ib}const Tb=new jy(Av.comparator);function kb(){let e=Tb;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Cb(e){let t=Tb;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function xb(){return Ab()}function Nb(){return Ab()}function Ab(){return new Eb((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Pb=new jy(Av.comparator),Rb=new By(Av.comparator);function Db(){let e=Rb;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ob=new By(_v);function Lb(){return Ob}function Mb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iy(t)?"-0":t}}function Fb(e){return{integerValue:""+e}}function Ub(e,t){return oy(t)?Fb(t):Mb(e,t)}class jb{constructor(){this._=void 0}}function Vb(e,t,n){return e instanceof qb?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xy(t)&&(t=Zy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Kb?Gb(e,t):e instanceof Hb?Wb(e,t):function(e,t){const n=Bb(e,t),r=Jb(n)+Jb(e.Pe);return fw(n)&&fw(e.Pe)?Fb(r):Mb(e.serializer,r)}(e,t)}function zb(e,t,n){return e instanceof Kb?Gb(e,t):e instanceof Hb?Wb(e,t):n}function Bb(e,t){return e instanceof Qb?function(e){return fw(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class qb extends jb{}class Kb extends jb{constructor(e){super(),this.elements=e}}function Gb(e,t){const n=Yb(t);for(const r of e.elements)n.some((e=>sw(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Hb extends jb{constructor(e){super(),this.elements=e}}function Wb(e,t){let n=Yb(t);for(const r of e.elements)n=n.filter((e=>!sw(e,r)));return{arrayValue:{values:n}}}class Qb extends jb{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Jb(e){return Yy(e.integerValue||e.doubleValue)}function Yb(e){return pw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $b{constructor(e,t){this.field=e,this.transform=t}}class Xb{constructor(e,t){this.version=e,this.transformResults=t}}class Zb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zb}static exists(e){return new Zb(void 0,e)}static updateTime(e){return new Zb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function e_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class t_{}function n_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new d_(e.key,Zb.none()):new a_(e.key,e.data,Zb.none());{const n=e.data,r=Sw.empty();let i=new By(Nv.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new c_(e.key,r,new Gy(i.toArray()),Zb.none())}}function r_(e,t,n){e instanceof a_?function(e,t,n){const r=e.value.clone(),i=u_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof c_?function(e,t,n){if(!e_(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=u_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(l_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function i_(e,t,n,r){return e instanceof a_?function(e,t,n,r){if(!e_(e.precondition,t))return n;const i=e.value.clone(),o=h_(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof c_?function(e,t,n,r){if(!e_(e.precondition,t))return n;const i=h_(e.fieldTransforms,r,t),o=t.data;return o.setAll(l_(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return e_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function o_(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Bb(r.transform,e||null);null!=i&&(null===n&&(n=Sw.empty()),n.set(r.field,i))}return n||null}function s_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ev(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Kb&&t instanceof Kb||e instanceof Hb&&t instanceof Hb?Ev(e.elements,t.elements,sw):e instanceof Qb&&t instanceof Qb?sw(e.Pe,t.Pe):e instanceof qb&&t instanceof qb}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class a_ extends t_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class c_ extends t_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function l_(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function u_(e,t,n){const r=new Map;sv(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,zb(s,a,n[i]))}return r}function h_(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Vb(e,o,t))}return r}class d_ extends t_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f_ extends t_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class p_{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&r_(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=i_(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=i_(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Nb();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=n_(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Tv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Db())}isEqual(e){return this.batchId===e.batchId&&Ev(this.mutations,e.mutations,((e,t)=>s_(e,t)))&&Ev(this.baseMutations,e.baseMutations,((e,t)=>s_(e,t)))}}class m_{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){sv(e.mutations.length===n.length);let r=Pb;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new m_(e,t,n,r)}}class g_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class v_{constructor(e,t){this.count=e,this.unchangedNames=t}}var y_,w_;function b_(e){switch(e){default:return ov();case cv.CANCELLED:case cv.UNKNOWN:case cv.DEADLINE_EXCEEDED:case cv.RESOURCE_EXHAUSTED:case cv.INTERNAL:case cv.UNAVAILABLE:case cv.UNAUTHENTICATED:return!1;case cv.INVALID_ARGUMENT:case cv.NOT_FOUND:case cv.ALREADY_EXISTS:case cv.PERMISSION_DENIED:case cv.FAILED_PRECONDITION:case cv.ABORTED:case cv.OUT_OF_RANGE:case cv.UNIMPLEMENTED:case cv.DATA_LOSS:return!0}}function __(e){if(void 0===e)return nv("GRPC error has no .code"),cv.UNKNOWN;switch(e){case y_.OK:return cv.OK;case y_.CANCELLED:return cv.CANCELLED;case y_.UNKNOWN:return cv.UNKNOWN;case y_.DEADLINE_EXCEEDED:return cv.DEADLINE_EXCEEDED;case y_.RESOURCE_EXHAUSTED:return cv.RESOURCE_EXHAUSTED;case y_.INTERNAL:return cv.INTERNAL;case y_.UNAVAILABLE:return cv.UNAVAILABLE;case y_.UNAUTHENTICATED:return cv.UNAUTHENTICATED;case y_.INVALID_ARGUMENT:return cv.INVALID_ARGUMENT;case y_.NOT_FOUND:return cv.NOT_FOUND;case y_.ALREADY_EXISTS:return cv.ALREADY_EXISTS;case y_.PERMISSION_DENIED:return cv.PERMISSION_DENIED;case y_.FAILED_PRECONDITION:return cv.FAILED_PRECONDITION;case y_.ABORTED:return cv.ABORTED;case y_.OUT_OF_RANGE:return cv.OUT_OF_RANGE;case y_.UNIMPLEMENTED:return cv.UNIMPLEMENTED;case y_.DATA_LOSS:return cv.DATA_LOSS;default:return ov()}}(w_=y_||(y_={}))[w_.OK=0]="OK",w_[w_.CANCELLED=1]="CANCELLED",w_[w_.UNKNOWN=2]="UNKNOWN",w_[w_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",w_[w_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",w_[w_.NOT_FOUND=5]="NOT_FOUND",w_[w_.ALREADY_EXISTS=6]="ALREADY_EXISTS",w_[w_.PERMISSION_DENIED=7]="PERMISSION_DENIED",w_[w_.UNAUTHENTICATED=16]="UNAUTHENTICATED",w_[w_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",w_[w_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",w_[w_.ABORTED=10]="ABORTED",w_[w_.OUT_OF_RANGE=11]="OUT_OF_RANGE",w_[w_.UNIMPLEMENTED=12]="UNIMPLEMENTED",w_[w_.INTERNAL=13]="INTERNAL",w_[w_.UNAVAILABLE=14]="UNAVAILABLE",w_[w_.DATA_LOSS=15]="DATA_LOSS";let E_=null;function I_(){return new TextEncoder}const S_=new Lg([4294967295,4294967295],0);function T_(e){const t=I_().encode(e),n=new Mg;return n.update(t),new Uint8Array(n.digest())}function k_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Lg([n,r],0),new Lg([i,o],0)]}class C_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new x_("Invalid padding: ".concat(t));if(n<0)throw new x_("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new x_("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new x_("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Lg.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Lg.fromNumber(n)));return 1===r.compare(S_)&&(r=new Lg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=T_(e),[n,r]=k_(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new C_(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=T_(e),[n,r]=k_(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class x_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class N_{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,A_.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new N_(Tv.min(),r,new jy(_v),Sb(),Db())}}class A_{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new A_(n,t,Db(),Db(),Db())}}class P_{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class R_{constructor(e,t){this.targetId=e,this.me=t}}class D_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wy.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class O_{constructor(){this.fe=0,this.ge=F_(),this.pe=Wy.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Db(),t=Db(),n=Db();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ov()}})),new A_(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=F_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,sv(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L_{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sb(),this.qe=M_(),this.Qe=new jy(_v)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:ov()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(tb(i))if(0===n){const e=new Av(i.path);this.Ue(t,e,kw.newNoDocument(e,Tv.min()))}else sv(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==E_||E_.et(function(e,t,n,r,i){var o,s,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(c=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=$y(n).toUint8Array()}catch(e){if(e instanceof Hy)return rv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new C_(o,r,i)}catch(e){return rv(e instanceof x_?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ie?null:s}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&tb(i.target)){const t=new Av(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,kw.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Db();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new N_(e,t,this.Qe,this.ke,n);return this.ke=Sb(),this.qe=M_(),this.Qe=new jy(_v),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new O_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new By(_v),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||tv("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new O_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function M_(){return new jy(Av.comparator)}function F_(){return new jy(Av.comparator)}const U_={asc:"ASCENDING",desc:"DESCENDING"},j_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V_={and:"AND",or:"OR"};class z_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function B_(e,t){return e.useProto3Json||ry(t)?t:{value:t}}function q_(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function K_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function G_(e,t){return q_(e,t.toTimestamp())}function H_(e){return sv(!!e),Tv.fromTimestamp(function(e){const t=Jy(e);return new Sv(t.seconds,t.nanos)}(e))}function W_(e,t){return Q_(e,t).canonicalString()}function Q_(e,t){const n=function(e){return new Cv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function J_(e){const t=Cv.fromString(e);return sv(vE(t)),t}function Y_(e,t){return W_(e.databaseId,t.path)}function $_(e,t){const n=J_(t);if(n.get(1)!==e.databaseId.projectId)throw new lv(cv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new lv(cv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Av(tE(n))}function X_(e,t){return W_(e.databaseId,t)}function Z_(e){const t=J_(e);return 4===t.length?Cv.emptyPath():tE(t)}function eE(e){return new Cv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tE(e){return sv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nE(e,t,n){return{name:Y_(e,t),fields:n.value.mapValue.fields}}function rE(e,t,n){const r=$_(e,t.name),i=H_(t.updateTime),o=t.createTime?H_(t.createTime):Tv.min(),s=new Sw({mapValue:{fields:t.fields}}),a=kw.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function iE(e,t){let n;if(t instanceof a_)n={update:nE(e,t.key,t.value)};else if(t instanceof d_)n={delete:Y_(e,t.key)};else if(t instanceof c_)n={update:nE(e,t.key,t.data),updateMask:gE(t.fieldMask)};else{if(!(t instanceof f_))return ov();n={verify:Y_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof qb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Kb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qb)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw ov()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:G_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ov()}(e,t.precondition)),n}function oE(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Zb.updateTime(H_(e.updateTime)):void 0!==e.exists?Zb.exists(e.exists):Zb.none()}(t.currentDocument):Zb.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)sv("REQUEST_TIME"===t.setToServerValue),n=new qb;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Kb(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Hb(e)}else"increment"in t?n=new Qb(e,t.increment):ov();const r=Nv.fromServerFormat(t.fieldPath);return new $b(r,n)}(e,t))):[];if(t.update){t.update.name;const i=$_(e,t.update.name),o=new Sw({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Gy(t.map((e=>Nv.fromServerFormat(e))))}(t.updateMask);return new c_(i,o,e,n,r)}return new a_(i,o,n,r)}if(t.delete){const r=$_(e,t.delete);return new d_(r,n)}if(t.verify){const r=$_(e,t.verify);return new f_(r,n)}return ov()}function sE(e,t){return{documents:[X_(e,t.path)]}}function aE(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X_(e,i);const o=function(e){if(0!==e.length)return mE(Ow.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:fE(e.field),direction:uE(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=B_(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function cE(e){let t=Z_(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){sv(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=lE(e);return t instanceof Ow&&Fw(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Aw(pE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ry(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Cw(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Cw(n,t)}(n.endAt)),sb(t,i,s,o,a,"F",c,l)}function lE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pE(e.unaryFilter.field);return Dw.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=pE(e.unaryFilter.field);return Dw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pE(e.unaryFilter.field);return Dw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=pE(e.unaryFilter.field);return Dw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ov()}}(e):void 0!==e.fieldFilter?function(e){return Dw.create(pE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ov()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ow.create(e.compositeFilter.filters.map((e=>lE(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ov()}}(e.compositeFilter.op))}(e):ov()}function uE(e){return U_[e]}function hE(e){return j_[e]}function dE(e){return V_[e]}function fE(e){return{fieldPath:e.canonicalString()}}function pE(e){return Nv.fromServerFormat(e.fieldPath)}function mE(e){return e instanceof Dw?function(e){if("=="===e.op){if(gw(e.value))return{unaryFilter:{field:fE(e.field),op:"IS_NAN"}};if(mw(e.value))return{unaryFilter:{field:fE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gw(e.value))return{unaryFilter:{field:fE(e.field),op:"IS_NOT_NAN"}};if(mw(e.value))return{unaryFilter:{field:fE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fE(e.field),op:hE(e.op),value:e.value}}}(e):e instanceof Ow?function(e){const t=e.getFilters().map((e=>mE(e)));return 1===t.length?t[0]:{compositeFilter:{op:dE(e.op),filters:t}}}(e):ov()}function gE(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function vE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class yE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wy.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new yE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wE{constructor(e){this.ct=e}}function bE(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:_E(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Y_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:q_(e,t.version.toTimestamp()),createTime:q_(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:EE(t.version)};else{if(!t.isUnknownDocument())return ov();r.unknownDocument={path:n.path.toArray(),version:EE(t.version)}}return r}function _E(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function EE(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function IE(e){const t=new Sv(e.seconds,e.nanoseconds);return Tv.fromTimestamp(t)}function SE(e,t){const n=(t.baseMutations||[]).map((t=>oE(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>oE(e.ct,t))),i=Sv.fromMillis(t.localWriteTimeMs);return new p_(t.batchId,i,n,r)}function TE(e){const t=IE(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?IE(e.lastLimboFreeSnapshotVersion):Tv.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return sv(1===e.documents.length),hb(ab(Z_(e.documents[0])))}(e.query):function(e){return hb(cE(e))}(e.query),new yE(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Wy.fromBase64String(e.resumeToken))}function kE(e,t){const n=EE(t.snapshotVersion),r=EE(t.lastLimboFreeSnapshotVersion);let i;i=tb(t.target)?sE(e.ct,t.target):aE(e.ct,t.target)._t;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Zw(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function CE(e){const t=cE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pb(t,t.limit,"L"):t}function xE(e,t){return new g_(t.largestBatchId,oE(e.ct,t.overlayMutation))}function NE(e,t){const n=t.path.lastSegment();return[e,sy(t.path.popLast()),n]}function AE(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:EE(r.readTime),documentKey:sy(r.documentKey.path),largestBatchId:r.largestBatchId}}class PE{getBundleMetadata(e,t){return RE(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:IE(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return RE(e).put(function(e){return{bundleId:e.id,createTime:EE(H_(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return DE(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:CE(e.bundledQuery),readTime:IE(e.readTime)}}(e)}))}saveNamedQuery(e,t){return DE(e).put(function(e){return{name:e.name,readTime:EE(H_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function RE(e){return Ly(e,"bundles")}function DE(e){return Ly(e,"namedQueries")}class OE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new OE(e,n)}getOverlay(e,t){return LE(e).get(NE(this.userId,t)).next((e=>e?xE(this.serializer,e):null))}getOverlays(e,t){const n=xb();return qv.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new g_(t,i);r.push(this.ht(e,o))})),qv.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(sy(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(LE(e).j("collectionPathOverlayIndex",r))})),qv.waitFor(i)}getOverlaysForCollection(e,t,n){const r=xb(),i=sy(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return LE(e).U("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=xE(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=xb();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return LE(e).J({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=xE(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return LE(e).put(function(e,t,n){const[r,i,o]=NE(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:iE(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function LE(e){return Ly(e,"documentOverlays")}class ME{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Yy(e.integerValue));else if("doubleValue"in e){const n=Yy(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),iy(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Jy(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft($y(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?ww(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ov()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Av.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function FE(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function UE(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=FE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ME.bt=new ME;class jE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=UE(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=UE(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class VE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class zE{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class BE{constructor(){this.Gt=new jE,this.zt=new VE(this.Gt),this.jt=new zE(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class qE{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new qE(this.indexId,this.documentKey,this.arrayValue,n)}}function KE(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=GE(e.arrayValue,t.arrayValue),0!==n?n:(n=GE(e.directionalValue,t.directionalValue),0!==n?n:Av.comparator(e.documentKey,t.documentKey)))}function GE(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class HE{constructor(e){this.Yt=new By(((e,t)=>Nv.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(sv(e.collectionGroup===this.collectionId),this.en)return!1;const t=Rv(e);if(void 0!==t&&!this.nn(t))return!1;const n=Dv(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new By(Nv.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ov(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ov(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ov(n.field,"asc"===n.dir?0:1)));return new Pv(Pv.UNKNOWN_ID,this.collectionId,t,Lv.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function WE(e){var t,n;if(sv(e instanceof Dw||e instanceof Ow),e instanceof Dw){if(e instanceof Qw){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Dw.create(e.field,"==",t))))||[];return Ow.create(r,"or")}return e}const r=e.filters.map((e=>WE(e)));return Ow.create(r,e.op)}function QE(e){if(0===e.getFilters().length)return[];const t=XE(WE(e));return sv($E(t)),JE(t)||YE(t)?[t]:t.getFilters()}function JE(e){return e instanceof Dw}function YE(e){return e instanceof Ow&&Fw(e)}function $E(e){return JE(e)||YE(e)||function(e){if(e instanceof Ow&&Mw(e)){for(const t of e.getFilters())if(!JE(t)&&!YE(t))return!1;return!0}return!1}(e)}function XE(e){if(sv(e instanceof Dw||e instanceof Ow),e instanceof Dw)return e;if(1===e.filters.length)return XE(e.filters[0]);const t=e.filters.map((e=>XE(e)));let n=Ow.create(t,e.op);return n=tI(n),$E(n)?n:(sv(n instanceof Ow),sv(Lw(n)),sv(n.filters.length>1),n.filters.reduce(((e,t)=>ZE(e,t))))}function ZE(e,t){let n;return sv(e instanceof Dw||e instanceof Ow),sv(t instanceof Dw||t instanceof Ow),n=e instanceof Dw?t instanceof Dw?function(e,t){return Ow.create([e,t],"and")}(e,t):eI(e,t):t instanceof Dw?eI(t,e):function(e,t){if(sv(e.filters.length>0&&t.filters.length>0),Lw(e)&&Lw(t))return zw(e,t.getFilters());const n=Mw(e)?e:t,r=Mw(e)?t:e,i=n.filters.map((e=>ZE(e,r)));return Ow.create(i,"or")}(e,t),tI(n)}function eI(e,t){if(Lw(t))return zw(t,e.getFilters());{const n=t.filters.map((t=>ZE(e,t)));return Ow.create(n,"or")}}function tI(e){if(sv(e instanceof Dw||e instanceof Ow),e instanceof Dw)return e;const t=e.getFilters();if(1===t.length)return tI(t[0]);if(Uw(e))return e;const n=t.map((e=>tI(e))),r=[];return n.forEach((t=>{t instanceof Dw?r.push(t):t instanceof Ow&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ow.create(r,e.op)}class nI{constructor(){this._n=new rI}addToCollectionParentIndex(e,t){return this._n.add(t),qv.resolve()}getCollectionParents(e,t){return qv.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return qv.resolve()}deleteFieldIndex(e,t){return qv.resolve()}deleteAllFieldIndexes(e){return qv.resolve()}createTargetIndexes(e,t){return qv.resolve()}getDocumentsMatchingTarget(e,t){return qv.resolve(null)}getIndexType(e,t){return qv.resolve(0)}getFieldIndexes(e,t){return qv.resolve([])}getNextCollectionGroupToUpdate(e){return qv.resolve(null)}getMinOffset(e,t){return qv.resolve(Uv.min())}getMinOffsetFromCollectionGroup(e,t){return qv.resolve(Uv.min())}updateCollectionGroup(e,t,n){return qv.resolve()}updateIndexEntries(e,t){return qv.resolve()}}class rI{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new By(Cv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new By(Cv.comparator)).toArray()}}const iI=new Uint8Array(0);class oI{constructor(e,t){this.databaseId=t,this.an=new rI,this.un=new Eb((e=>Zw(e)),((e,t)=>eb(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:sy(r)};return sI(e).put(i)}return qv.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Iv(t),""],!1,!0);return sI(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ly(r.parent))}return n}))}addFieldIndex(e,t){const n=cI(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=lI(e);return i.next((e=>{n.put(AE(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=cI(e),r=lI(e),i=aI(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=cI(e),n=aI(e),r=lI(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return qv.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new HE(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=aI(e);let r=!0;const i=new Map;return qv.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Db();const r=[];return qv.forEach(i,((i,o)=>{tv("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Zw(t)));const s=function(e,t){const n=Rv(t);if(void 0===n)return null;for(const r of nb(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Dv(t))for(const t of nb(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Dv(t)){const t=0===i.kind?rb(e,i.fieldPath,e.startAt):ib(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Cw(n,r)}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Dv(t)){const t=0===i.kind?ib(e,i.fieldPath,e.endAt):rb(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Cw(n,r)}(o,i),u=this.hn(i,o,c),h=this.hn(i,o,l),d=this.Pn(i,o,a),f=this.In(i.indexId,s,u,c.inclusive,h,l.inclusive,d);return qv.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Av.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return qv.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:QE(Ow.create(e.filters,"and")).map((t=>Xw(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):iI,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],o),f=s.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new qE(e,Av.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new qE(e,Av.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new HE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return qv.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new By(Nv.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new BE;for(const r of Dv(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);ME.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new BE;return ME.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new BE;return ME.bt.Pt(dw(this.databaseId,t),n.Ht(function(e){const t=Dv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new BE);let i=0;for(const o of Dv(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&pw(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);ME.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new BE;n.seed(e.Wt()),ME.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Dw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=cI(e),r=lI(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return qv.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Lv(t.sequenceNumber,new Uv(IE(t.readTime),new Av(ly(t.documentKey)),t.largestBatchId)):Lv.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Ov(Nv.fromServerFormat(t),n)}));return new Pv(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:_v(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=cI(e),i=lI(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>qv.forEach(t,(t=>i.put(AE(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return qv.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?qv.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),qv.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?qv.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return aI(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return aI(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=aI(e);let i=new By(KE);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new qE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new By(KE);const r=this.An(t,e);if(null==r)return n;const i=Rv(t);if(null!=i){const o=e.data.field(i.fieldPath);if(pw(o))for(const i of o.arrayValue.values||[])n=n.add(new qE(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new qE(t.indexId,e.key,iI,r));return n}wn(e,t,n,r,i){tv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Ky(o),c=Ky(s);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Ky(s)):t?(i(a),a=Ky(o)):(a=Ky(o),c=Ky(s))}}(r,i,KE,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),qv.waitFor(o)}gn(e){let t=1;return lI(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>KE(e,t))).filter(((e,t,n)=>!t||0!==KE(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=KE(o,e),i=KE(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,iI,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,iI,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return KE(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uI)}getMinOffset(e,t){return qv.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||ov())))).next(uI)}}function sI(e){return Ly(e,"collectionParents")}function aI(e){return Ly(e,"indexEntries")}function cI(e){return Ly(e,"indexConfiguration")}function lI(e){return Ly(e,"indexState")}function uI(e){sv(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;jv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Uv(t.readTime,t.documentKey,n)}const hI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dI{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new dI(e,dI.DEFAULT_COLLECTION_PERCENTILE,dI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fI(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:s},((e,t,n)=>(a++,n.delete())));o.push(c.next((()=>{sv(1===a)})));const l=[];for(const u of n.mutations){const e=dy(t,u.key.path,n.batchId);o.push(i.delete(e)),l.push(u.key)}return qv.waitFor(o).next((()=>l))}function pI(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ov();t=e.noDocument}return JSON.stringify(t).length}dI.DEFAULT_COLLECTION_PERCENTILE=10,dI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dI.DEFAULT=new dI(41943040,dI.DEFAULT_COLLECTION_PERCENTILE,dI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dI.DISABLED=new dI(-1,0,0);class mI{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){sv(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new mI(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vI(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=yI(e),o=vI(e);return o.add({}).next((s=>{sv("number"==typeof s);const a=new p_(s,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>iE(e.ct,t))),i=n.mutations.map((t=>iE(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new By(((e,t)=>_v(e.canonicalString(),t.canonicalString())));for(const e of r){const t=dy(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),l.push(o.put(c)),l.push(i.put(t,fy))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),qv.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return vI(e).get(t).next((e=>e?(sv(e.userId===this.userId),SE(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?qv.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return vI(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(sv(t.batchId>=n),i=SE(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return vI(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vI(e).U("userMutationsIndex",t).next((e=>e.map((e=>SE(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=hy(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return yI(e).J({range:r},((n,r,o)=>{const[s,a,c]=n,l=ly(a);if(s===this.userId&&t.path.isEqual(l))return vI(e).get(c).next((e=>{if(!e)throw ov();sv(e.userId===this.userId),i.push(SE(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new By(_v);const r=[];return t.forEach((t=>{const i=hy(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=yI(e).J({range:o},((e,r,i)=>{const[o,s,a]=e,c=ly(s);o===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(s)})),qv.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=hy(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new By(_v);return yI(e).J({range:o},((e,t,i)=>{const[o,a,c]=e,l=ly(a);o===this.userId&&n.isPrefixOf(l)?l.length===r&&(s=s.add(c)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(vI(e).get(t).next((e=>{if(null===e)throw ov();sv(e.userId===this.userId),n.push(SE(this.serializer,e))})))})),qv.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return fI(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),qv.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return qv.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return yI(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=ly(e[1]);r.push(t)}else n.done()})).next((()=>{sv(0===r.length)}))}))}containsKey(e,t){return gI(e,this.userId,t)}xn(e){return wI(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function gI(e,t,n){const r=hy(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return yI(e).J({range:o,H:!0},((e,n,r)=>{const[o,a,c]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function vI(e){return Ly(e,"mutations")}function yI(e){return Ly(e,"documentMutations")}function wI(e){return Ly(e,"mutationQueues")}class bI{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new bI(0)}static Ln(){return new bI(-1)}}class _I{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new bI(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Tv.fromTimestamp(new Sv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>EI(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(sv(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return EI(e).J(((o,s)=>{const a=TE(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>qv.waitFor(i))).next((()=>r))}forEachTarget(e,t){return EI(e).J(((e,n)=>{const r=TE(n);t(r)}))}Bn(e){return II(e).get("targetGlobalKey").next((e=>(sv(null!==e),e)))}kn(e,t){return II(e).put("targetGlobalKey",t)}qn(e,t){return EI(e).put(kE(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Zw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return EI(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=TE(n);eb(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=SI(e);return t.forEach((t=>{const o=sy(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),qv.waitFor(r)}removeMatchingKeys(e,t,n){const r=SI(e);return qv.forEach(t,(t=>{const i=sy(t.path);return qv.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=SI(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=SI(e);let i=Db();return r.J({range:n,H:!0},((e,t,n)=>{const r=ly(e[1]),o=new Av(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=sy(t.path),r=IDBKeyRange.bound([n],[Iv(n)],!1,!0);let i=0;return SI(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return EI(e).get(t).next((e=>e?TE(e):null))}}function EI(e){return Ly(e,"targets")}function II(e){return Ly(e,"targetGlobal")}function SI(e){return Ly(e,"targetDocuments")}function TI(e,t){let[n,r]=e,[i,o]=t;const s=_v(n,i);return 0===s?_v(r,o):s}class kI{constructor(e){this.Kn=e,this.buffer=new By(TI),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();TI(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CI{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){tv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Jv(e)?tv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Bv(e)}await this.zn(3e5)}))}}class xI{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return qv.resolve(ny.oe);const n=new kI(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tv("LruGarbageCollector","Garbage collection skipped; disabled"),qv.resolve(hI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(tv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),hI):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(tv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),ev()<=Vl.DEBUG&&tv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),qv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function NI(e,t){return new xI(e,t)}class AI{constructor(e,t){this.db=e,this.garbageCollector=NI(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return PI(e,n)}removeReference(e,t,n){return PI(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return PI(e,t)}er(e,t){return function(e,t){let n=!1;return wI(e).Y((r=>gI(e,r,t).next((e=>(e&&(n=!0),qv.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Tv.min()),SI(e).delete(function(e){return[0,sy(e.path)]}(o)))))}));r.push(t)}})).next((()=>qv.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return PI(e,t)}Xn(e,t){const n=SI(e);let r,i=ny.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:c}=n;0===o?(i!==ny.oe&&t(new Av(ly(r)),i),i=c,r=a):i=ny.oe})).next((()=>{i!==ny.oe&&t(new Av(ly(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PI(e,t){return SI(e).put(function(e,t){return{targetId:0,path:sy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class RI{constructor(){this.changes=new Eb((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kw.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qv.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return FI(e).put(n)}removeEntry(e,t,n){return FI(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],_E(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=kw.newInvalidDocument(t);return FI(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(UI(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:kw.newInvalidDocument(t)};return FI(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(UI(t))},((e,r)=>{n={document:this.nr(t,r),size:pI(r)}})).next((()=>n))}getEntries(e,t){let n=Sb();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Sb(),r=new jy(Av.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,pI(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return qv.resolve();let r=new By(VI);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(UI(r.first()),UI(r.last())),o=r.getIterator();let s=o.getNext();return FI(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Av.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&VI(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.$(UI(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),_E(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return FI(e).U(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Sb();for(const i of e){const e=this.nr(Av.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(yb(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Sb();const o=jI(t,n),s=jI(t,Uv.max());return FI(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(Av.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new LI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return MI(e).get("remoteDocumentGlobalKey").next((e=>(sv(!!e),e)))}tr(e,t){return MI(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=rE(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Av.fromSegments(t.noDocument.path),r=IE(t.noDocument.readTime);n=kw.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ov();{const e=Av.fromSegments(t.unknownDocument.path),r=IE(t.unknownDocument.version);n=kw.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Sv(e[0],e[1]);return Tv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Tv.min()))return e}return kw.newInvalidDocument(e)}}function OI(e){return new DI(e)}class LI extends RI{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Eb((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new By(((e,t)=>_v(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=bE(this.ar.serializer,o);r=r.add(i.path.popLast());const c=pI(a);n+=c-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=bE(this.ar.serializer,o.convertToNoDocument(Tv.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),qv.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function MI(e){return Ly(e,"remoteDocumentGlobal")}function FI(e){return Ly(e,"remoteDocumentsV14")}function UI(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function jI(e,t){const n=t.documentKey.path.toArray();return[e,_E(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function VI(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=_v(n[o],r[o]),i)return i;return i=_v(n.length,r.length),i||(i=_v(n[n.length-2],r[r.length-2]),i||_v(n[n.length-1],r[r.length-1]))}class zI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BI{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&i_(n.mutation,e,Gy.empty(),Sv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Db()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Db();const r=xb();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=kb();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=xb();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Db())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Sb();const o=Ab(),s=Ab();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof c_)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),i_(s.mutation,t,s.mutation.getFieldMask(),Sv.now())):o.set(t.key,Gy.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new zI(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Ab();let r=new jy(((e,t)=>e-t)),i=Db();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Gy.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Db()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,c=r.value,l=Nb();c.forEach((e=>{if(!i.has(e)){const r=n_(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,l))}return qv.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Av.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):qv.resolve(xb());let s=-1,a=i;return o.next((t=>qv.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?qv.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Db()))).next((e=>({batchId:s,changes:Cb(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Av(t)).next((e=>{let t=kb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=kb();return this.indexManager.getCollectionParents(e,i).next((s=>qv.forEach(s,(s=>{const a=function(e,t){return new ob(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,kw.newInvalidDocument(r)))}));let n=kb();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&i_(o.mutation,r,Gy.empty(),Sv.now()),yb(t,r)&&(n=n.insert(e,r))})),n}))}}class qI{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return qv.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:H_(e.createTime)}}(t)),qv.resolve()}getNamedQuery(e,t){return qv.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:CE(e.bundledQuery),readTime:H_(e.readTime)}}(t)),qv.resolve()}}class KI{constructor(){this.overlays=new jy(Av.comparator),this.hr=new Map}getOverlay(e,t){return qv.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xb();return qv.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),qv.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),qv.resolve()}getOverlaysForCollection(e,t,n){const r=xb(),i=t.length+1,o=new Av(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return qv.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new jy(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xb(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=xb(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return qv.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new g_(t,n));let i=this.hr.get(t);void 0===i&&(i=Db(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class GI{constructor(){this.Pr=new By(HI.Ir),this.Tr=new By(HI.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new HI(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new HI(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Av(new Cv([])),n=new HI(t,e),r=new HI(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Av(new Cv([])),n=new HI(t,e),r=new HI(t,e+1);let i=Db();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new HI(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class HI{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Av.comparator(e.key,t.key)||_v(e.pr,t.pr)}static Er(e,t){return _v(e.pr,t.pr)||Av.comparator(e.key,t.key)}}class WI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new By(HI.Ir)}checkEmpty(e){return qv.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p_(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new HI(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return qv.resolve(o)}lookupMutationBatch(e,t){return qv.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return qv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return qv.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return qv.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new HI(t,0),r=new HI(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),qv.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new By(_v);return t.forEach((e=>{const t=new HI(e,0),r=new HI(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),qv.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Av.isDocumentKey(i)||(i=i.child(""));const o=new HI(new Av(i),0);let s=new By(_v);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),qv.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){sv(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return qv.forEach(t.mutations,(r=>{const i=new HI(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new HI(t,0),r=this.wr.firstAfterOrEqual(n);return qv.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,qv.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QI{constructor(e){this.vr=e,this.docs=new jy(Av.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qv.resolve(n?n.document.mutableCopy():kw.newInvalidDocument(t))}getEntries(e,t){let n=Sb();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():kw.newInvalidDocument(e))})),qv.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Sb();const o=t.path,s=new Av(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||jv(Fv(s),n)<=0||(r.has(s.key)||yb(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return qv.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ov()}Fr(e,t){return qv.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new JI(this)}getSize(e){return qv.resolve(this.size)}}class JI extends RI{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),qv.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class YI{constructor(e){this.persistence=e,this.Mr=new Eb((e=>Zw(e)),eb),this.lastRemoteSnapshotVersion=Tv.min(),this.highestTargetId=0,this.Or=0,this.Nr=new GI,this.targetCount=0,this.Lr=bI.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),qv.resolve()}getLastRemoteSnapshotVersion(e){return qv.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qv.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),qv.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),qv.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new bI(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,qv.resolve()}updateTargetData(e,t){return this.qn(t),qv.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,qv.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),qv.waitFor(i).next((()=>r))}getTargetCount(e){return qv.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return qv.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),qv.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),qv.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),qv.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return qv.resolve(n)}containsKey(e,t){return qv.resolve(this.Nr.containsKey(t))}}class $I{constructor(e,t){this.Br={},this.overlays={},this.kr=new ny(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new YI(this),this.indexManager=new nI,this.remoteDocumentCache=function(e){return new QI(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new wE(t),this.$r=new qI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new WI(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){tv("MemoryPersistence","Starting transaction:",e);const r=new XI(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return qv.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class XI extends zv{constructor(e){super(),this.currentSequenceNumber=e}}class ZI{constructor(e){this.persistence=e,this.zr=new GI,this.jr=null}static Hr(e){return new ZI(e)}get Jr(){if(this.jr)return this.jr;throw ov()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),qv.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),qv.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),qv.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qv.forEach(this.Jr,(n=>{const r=Av.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Tv.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return qv.or([()=>qv.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class eS{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Kv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uy,{unique:!0}),e.createObjectStore("documentMutations")}(e),tS(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=qv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tS(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uy,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return qv.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Ty});t.createIndex("collectionPathOverlayIndex",ky,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Cy,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:py});t.createIndex("documentKeyIndex",my),t.createIndex("collectionGroupIndex",gy)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:_y}).createIndex("sequenceNumberIndex",Ey,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Iy}).createIndex("documentKeyIndex",Sy,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),o}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=pI(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>qv.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>qv.forEach(n,(n=>{sv(n.userId===t.userId);const r=SE(this.serializer,n);return fI(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const o=new Cv(n),s=function(e){return[0,sy(e)]}(o);r.push(t.get(s).next((n=>n?qv.resolve():(n=>t.put({targetId:0,path:sy(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>qv.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:by});const n=t.store("collectionParents"),r=new rI,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:sy(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new Cv(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,o]=e;const s=ly(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=TE(n),i=kE(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Av(Cv.fromString(e.document.name).popFirst(5)):e.noDocument?Av.fromSegments(e.noDocument.path):e.unknownDocument?Av.fromSegments(e.unknownDocument.path):ov()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>qv.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=OI(this.serializer),i=new $I(ZI.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Db();SE(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),qv.forEach(n,((e,n)=>{const o=new $g(n),s=OE.lt(this.serializer,o),a=i.getIndexManager(o),c=mI.lt(o,this.serializer,a,i.referenceDelegate);return new BI(r,c,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Oy(t,ny.oe),e).next()}))}))}}function tS(e){e.createObjectStore("targetDocuments",{keyPath:yy}).createIndex("documentTargetsIndex",wy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vy,{unique:!0}),e.createObjectStore("targetGlobal")}const nS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rS{constructor(e,t,n,r,i,o,s,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!rS.D())throw new lv(cv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AI(this,r),this.Ti=t+"main",this.serializer=new wE(a),this.Ei=new Gv(this.Ti,this.ui,new eS(this.serializer)),this.Qr=new _I(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OI(this.serializer),this.$r=new PE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&nv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new lv(cv.FAILED_PRECONDITION,nS);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new ny(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>oS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Jv(e))return tv("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return iS(e).get("owner").next((e=>qv.resolve(this.Si(e))))}bi(e){return oS(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ly(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return qv.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?qv.resolve(!0):iS(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new lv(cv.FAILED_PRECONDITION,nS);return!1}}return!(!this.networkEnabled||!this.inForeground)||oS(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&tv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Oy(e,ny.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>oS(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return mI.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oI(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return OE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){tv("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Dy:15===e?Ry:14===e?Py:13===e?Ay:12===e?Ny:11===e?xy:void ov()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new Oy(r,this.kr?this.kr.next():ny.oe),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw nv("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new lv(cv.FAILED_PRECONDITION,Vv);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return iS(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new lv(cv.FAILED_PRECONDITION,nS)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iS(e).put("owner",t)}static D(){return Gv.D()}yi(e){const t=iS(e);return t.get("owner").next((e=>this.Si(e)?(tv("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qv.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(nv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;bl()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return tv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return nv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(yL){nv("Failed to set zombie client id.",yL)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(yL){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function iS(e){return Ly(e,"owner")}function oS(e){return Ly(e,"clientMetadata")}function sS(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class aS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Db(),r=Db();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new aS(e,t.fromCache,n,r)}}class cS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lS{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=bl()?8:Hv(fl())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new cS;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(ev()<=Vl.DEBUG&&tv("QueryEngine","SDK will not create cache indexes for query:",vb(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),qv.resolve()):(ev()<=Vl.DEBUG&&tv("QueryEngine","Query:",vb(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(ev()<=Vl.DEBUG&&tv("QueryEngine","The SDK decides to create cache indexes for query:",vb(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hb(t))):qv.resolve())}ji(e,t){if(cb(t))return qv.resolve(null);let n=hb(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=pb(t,null,"F"),n=hb(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Db(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,pb(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return cb(t)||r.isEqual(Tv.min())?qv.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?qv.resolve(null):(ev()<=Vl.DEBUG&&tv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vb(t)),this.es(e,o,t,Mv(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new By(bb(e));return t.forEach(((t,r)=>{yb(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return ev()<=Vl.DEBUG&&tv("QueryEngine","Using full collection scan to execute query:",vb(t)),this.zi.getDocumentsMatchingQuery(e,t,Uv.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class uS{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new jy(_v),this.rs=new Eb((e=>Zw(e)),eb),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BI(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function hS(e,t,n,r){return new uS(e,t,n,r)}async function dS(e,t){const n=av(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Db();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function fS(e){const t=av(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function pS(e,t,n){let r=Db(),i=Db();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Sb();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Tv.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):tv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function mS(e,t){const n=av(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function gS(e,t){const n=av(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,qv.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new yE(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function vS(e,t,n){const r=av(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Jv(e))throw e;tv("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function yS(e,t,n){const r=av(e);let i=Tv.min(),o=Db();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=av(e),i=r.rs.get(n);return void 0!==i?qv.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,hb(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Tv.min(),n?o:Db()))).next((e=>(_S(r,wb(t),e),{documents:e,hs:o})))))}function wS(e,t){const n=av(e),r=av(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function bS(e,t){const n=av(e),r=n.ss.get(t)||Tv.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Mv(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(_S(n,t,e),e)))}function _S(e,t,n){let r=e.ss.get(t)||Tv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function ES(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Db();const r=await gS(e,hb(CE(t.bundledQuery))),i=av(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=H_(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(Wy.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function IS(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function SS(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function TS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class kS{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new lv(r.error.code,r.error.message))),o?new kS(e,t,r.state,i):(nv("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CS{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new lv(n.error.code,n.error.message))),i?new CS(e,n.state,r):(nv("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Lb();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=oy(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new xS(e,i):(nv("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class NS{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new NS(t.clientId,t.onlineState):(nv("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class AS{constructor(){this.activeTargetIds=Lb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PS{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new jy(_v),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=IS(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new AS),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(IS(this.persistenceKey,n));if(e){const t=xS.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(TS(this.persistenceKey,e));if(n){const r=CS.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TS(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return tv("SharedClientState","READ",e,t),t}setItem(e,t){tv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){tv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(tv("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void nv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=ny.oe;if(null!=e)try{const n=JSON.parse(e);sv("number"==typeof n),t=n}catch(e){nv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ny.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new kS(this.currentUser,e,t,n),i=SS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=SS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=TS(this.persistenceKey,e),i=new CS(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return xS.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return kS.Es(new $g(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return CS.Es(r,t)}xs(e){return NS.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);tv("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Lb();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class RS{constructor(){this.no=new AS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new AS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DS{io(e){}shutdown(){}}class OS{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){tv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){tv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let LS=null;function MS(){return null===LS?LS=268435456+Math.round(2147483648*Math.random()):LS++,"0x"+LS.toString(16)}const FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class US{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const jS="WebChannelConnection";class VS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const o=MS(),s=this.vo(e,t.toUriEncodedString());tv("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,s,a,n).then((t=>(tv("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw rv("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}xo(e,t,n,r,i,o){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=FS[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=MS();return new Promise(((o,s)=>{const a=new jg;a.setWithCredentials(!0),a.listenOnce(Bg.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case qg.NO_ERROR:const t=a.getResponseJson();tv(jS,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case qg.TIMEOUT:tv(jS,"RPC '".concat(e,"' ").concat(i," timed out")),s(new lv(cv.DEADLINE_EXCEEDED,"Request time out"));break;case qg.HTTP_ERROR:const n=a.getStatus();if(tv(jS,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(cv).indexOf(t)>=0?t:cv.UNKNOWN}(t.status);s(new lv(e,t.message))}else s(new lv(cv.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new lv(cv.UNAVAILABLE,"Connection failed."));break;default:ov()}}finally{tv(jS,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);tv(jS,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Oo(e,t,n){const r=MS(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wg(),s=Hg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Vg({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");tv(jS,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=o.createWebChannel(l,a);let h=!1,d=!1;const f=new US({lo:t=>{d?tv(jS,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(tv(jS,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),tv(jS,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,zg.EventType.OPEN,(()=>{d||(tv(jS,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,zg.EventType.CLOSE,(()=>{d||(d=!0,tv(jS,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,zg.EventType.ERROR,(t=>{d||(d=!0,rv(jS,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new lv(cv.UNAVAILABLE,"The operation could not be completed")))})),p(u,zg.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];sv(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){tv(jS,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=y_[e];if(void 0!==t)return __(t)}(t),i=s.message;void 0===n&&(n=cv.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.po(new lv(n,i)),u.close()}else tv(jS,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(s,Gg.STAT_EVENT,(t=>{t.stat===Kg.PROXY?tv(jS,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Kg.NOPROXY&&tv(jS,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function zS(){return"undefined"!=typeof window?window:null}function BS(){return"undefined"!=typeof document?document:null}function qS(e){return new z_(e,!0)}class KS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&tv("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class GS{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new KS(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===cv.RESOURCE_EXHAUSTED?(nv(t.toString()),nv("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===cv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new lv(cv.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return tv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(tv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HS extends GS{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ov()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(sv(void 0===t||"string"==typeof t),Wy.fromBase64String(t||"")):(sv(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Wy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?cv.UNKNOWN:__(e.code);return new lv(t,e.message||"")}(s);n=new D_(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=$_(e,r.document.name),o=H_(r.document.updateTime),s=r.document.createTime?H_(r.document.createTime):Tv.min(),a=new Sw({mapValue:{fields:r.document.fields}}),c=kw.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new P_(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=$_(e,r.document),o=r.readTime?H_(r.readTime):Tv.min(),s=kw.newNoDocument(i,o),a=r.removedTargetIds||[];n=new P_([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=$_(e,r.document),o=r.removedTargetIds||[];n=new P_([],o,i,null)}else{if(!("filter"in t))return ov();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new v_(r,i),s=e.targetId;n=new R_(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Tv.min():t.readTime?H_(t.readTime):Tv.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=eE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=tb(r)?{documents:sE(e,r)}:{query:aE(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=K_(e,t.resumeToken);const r=B_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Tv.min())>0){n.readTime=q_(e,t.snapshotVersion.toTimestamp());const r=B_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ov()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=eE(this.serializer),t.removeTarget=e,this.i_(t)}}class WS extends GS{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(sv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(sv(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?H_(e.updateTime):H_(t);return n.isEqual(Tv.min())&&(n=H_(t)),new Xb(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=H_(e.commitTime);return this.listener.A_(n,t)}return sv(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=eE(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>iE(this.serializer,e)))};this.i_(t)}}class QS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new lv(cv.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,Q_(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===cv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new lv(cv.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.xo(e,Q_(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===cv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new lv(cv.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class JS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(nv(t),this.y_=!1):tv("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class YS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{oT(this)&&(tv("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=av(e);t.M_.add(4),await XS(t),t.N_.set("Unknown"),t.M_.delete(4),await $S(t)}(this))}))})),this.N_=new JS(n,r)}}async function $S(e){if(oT(e))for(const t of e.x_)await t(!0)}async function XS(e){for(const t of e.x_)await t(!1)}function ZS(e,t){const n=av(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),iT(n)?rT(n):ST(n).Xo()&&tT(n,t))}function eT(e,t){const n=av(e),r=ST(n);n.F_.delete(t),r.Xo()&&nT(n,t),0===n.F_.size&&(r.Xo()?r.n_():oT(n)&&n.N_.set("Unknown"))}function tT(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ST(e).P_(t)}function nT(e,t){e.L_.xe(t),ST(e).I_(t)}function rT(e){e.L_=new L_({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ST(e).start(),e.N_.w_()}function iT(e){return oT(e)&&!ST(e).Zo()&&e.F_.size>0}function oT(e){return 0===av(e).M_.size}function sT(e){e.L_=void 0}async function aT(e){e.N_.set("Online")}async function cT(e){e.F_.forEach(((t,n)=>{tT(e,t)}))}async function lT(e,t){sT(e),iT(e)?(e.N_.D_(t),rT(e)):e.N_.set("Unknown")}async function uT(e,t,n){if(e.N_.set("Online"),t instanceof D_&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){tv("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await hT(e,n)}else if(t instanceof P_?e.L_.Ke(t):t instanceof R_?e.L_.He(t):e.L_.We(t),!n.isEqual(Tv.min()))try{const t=await fS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Wy.EMPTY_BYTE_STRING,r.snapshotVersion)),nT(e,t);const i=new yE(r.target,t,n,r.sequenceNumber);tT(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){tv("RemoteStore","Failed to raise snapshot:",t),await hT(e,t)}}async function hT(e,t,n){if(!Jv(t))throw t;e.M_.add(1),await XS(e),e.N_.set("Offline"),n||(n=()=>fS(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{tv("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await $S(e)}))}function dT(e,t){return t().catch((n=>hT(e,n,t)))}async function fT(e){const t=av(e),n=TT(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;pT(t);)try{const e=await mS(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,mT(t,e)}catch(e){await hT(t,e)}gT(t)&&vT(t)}function pT(e){return oT(e)&&e.v_.length<10}function mT(e,t){e.v_.push(t);const n=TT(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function gT(e){return oT(e)&&!TT(e).Zo()&&e.v_.length>0}function vT(e){TT(e).start()}async function yT(e){TT(e).V_()}async function wT(e){const t=TT(e);for(const n of e.v_)t.d_(n.mutations)}async function bT(e,t,n){const r=e.v_.shift(),i=m_.from(r,t,n);await dT(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await fT(e)}async function _T(e,t){t&&TT(e).E_&&await async function(e,t){if(function(e){return b_(e)&&e!==cv.ABORTED}(t.code)){const n=e.v_.shift();TT(e).t_(),await dT(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await fT(e)}}(e,t),gT(e)&&vT(e)}async function ET(e,t){const n=av(e);n.asyncQueue.verifyOperationInProgress(),tv("RemoteStore","RemoteStore received new credentials");const r=oT(n);n.M_.add(3),await XS(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await $S(n)}async function IT(e,t){const n=av(e);t?(n.M_.delete(2),await $S(n)):t||(n.M_.add(2),await XS(n),n.N_.set("Unknown"))}function ST(e){return e.B_||(e.B_=function(e,t,n){const r=av(e);return r.f_(),new HS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:aT.bind(null,e),To:cT.bind(null,e),Ao:lT.bind(null,e),h_:uT.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),iT(e)?rT(e):e.N_.set("Unknown")):(await e.B_.stop(),sT(e))}))),e.B_}function TT(e){return e.k_||(e.k_=function(e,t,n){const r=av(e);return r.f_(),new WS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:yT.bind(null,e),Ao:_T.bind(null,e),R_:wT.bind(null,e),A_:bT.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await fT(e)):(await e.k_.stop(),e.v_.length>0&&(tv("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class kT{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new uv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new kT(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new lv(cv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CT(e,t){if(nv("AsyncQueue","".concat(t,": ").concat(e)),Jv(e))return new lv(cv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class xT{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Av.comparator(t.key,n.key):(e,t)=>Av.comparator(e.key,t.key),this.keyedMap=kb(),this.sortedSet=new jy(this.comparator)}static emptySet(e){return new xT(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xT))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new xT;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class NT{constructor(){this.q_=new jy(Av.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):ov():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class AT{constructor(e,t,n,r,i,o,s,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new AT(e,t,xT.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class PT{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class RT{constructor(){this.queries=new Eb((e=>gb(e)),mb),this.onlineState="Unknown",this.z_=new Set}}async function DT(e,t){const n=av(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.W_()&&t.G_()&&(r=2):(o=new PT,r=t.G_()?0:1);try{switch(r){case 0:o.K_=await n.onListen(i,!0);break;case 1:o.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=CT(e,"Initialization of query '".concat(vb(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.U_.push(t),t.j_(n.onlineState),o.K_&&t.H_(o.K_)&&FT(n)}async function OT(e,t){const n=av(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.U_.indexOf(t);e>=0&&(o.U_.splice(e,1),0===o.U_.length?i=t.G_()?0:1:!o.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LT(e,t){const n=av(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&FT(n)}function MT(e,t,n){const r=av(e),i=r.queries.get(t);if(i)for(const o of i.U_)o.onError(n);r.queries.delete(t)}function FT(e){e.z_.forEach((e=>{e.next()}))}var UT,jT;(jT=UT||(UT={})).J_="default",jT.Cache="cache";class VT{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new AT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=AT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==UT.Cache}}class zT{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class BT{constructor(e){this.serializer=e}Ps(e){return $_(this.serializer,e)}Is(e){return e.metadata.exists?rE(this.serializer,e.document,!1):kw.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return H_(e)}}class qT{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KT(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=Cv.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new BT(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Db()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=av(e);let o=Db(),s=Sb();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(o=o.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await gS(i,function(e){return hb(ab(Cv.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>pS(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new BT(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await ES(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function KT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class GT{constructor(e){this.key=e}}class HT{constructor(e){this.key=e}}class WT{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Db(),this.mutatedKeys=Db(),this.Ia=bb(e),this.Ta=new xT(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new NT,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=yb(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(s=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:o,Aa:n,Xi:s,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ov()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const s=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==o.length||c?{snapshot:new AT(this.query,e.Ta,i,o,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:s}:{fa:s}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new NT,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Db(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new HT(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new GT(n))})),t}pa(e){this.la=e.hs,this.Pa=Db();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return AT.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class QT{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class JT{constructor(e){this.key=e,this.wa=!1}}class YT{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Eb((e=>gb(e)),mb),this.Da=new Map,this.Ca=new Set,this.va=new jy(Av.comparator),this.Fa=new Map,this.Ma=new GI,this.xa={},this.Oa=new Map,this.Na=bI.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function $T(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=kk(e);let i;const o=r.ba.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=await ZT(r,t,n,!0),i}async function XT(e,t){const n=kk(e);await ZT(n,t,!0,!1)}async function ZT(e,t,n,r){const i=await gS(e.localStore,hb(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await ek(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&ZS(e.remoteStore,i),a}async function ek(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await yS(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return dk(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const o=await yS(e.localStore,t,!0),s=new WT(t,o.hs),a=s.da(o.documents),c=A_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=s.applyChanges(a,e.isPrimaryClient,c);dk(e,n,l.fa);const u=new QT(t,n,s);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function tk(e,t,n){const r=av(e),i=r.ba.get(t),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter((e=>!mb(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vS(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eT(r.remoteStore,i.targetId),uk(r,i.targetId)})).catch(Bv)):(uk(r,i.targetId),await vS(r.localStore,i.targetId,!0))}async function nk(e,t){const n=av(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eT(n.remoteStore,r.targetId))}async function rk(e,t){const n=av(e);try{const e=await function(e,t){const n=av(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const c=i.get(a);if(!c)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Wy.EMPTY_BYTE_STRING,Tv.min()).withLastLimboFreeSnapshotVersion(Tv.min()):o.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(o.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,o)&&s.push(n.Qr.updateTargetData(e,l))}));let a=Sb(),c=Db();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(pS(e,o,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(Tv.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return qv.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(sv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?sv(r.wa):e.removedDocuments.size>0&&(sv(r.wa),r.wa=!1))})),await mk(n,e,t)}catch(e){await Bv(e)}}function ik(e,t,n){const r=av(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=av(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&FT(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ok(e,t,n){const r=av(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),o=i&&i.key;if(o){let e=new jy(Av.comparator);e=e.insert(o,kw.newNoDocument(o,Tv.min()));const n=Db().add(o),i=new N_(Tv.min(),new Map,new jy(_v),e,n);await rk(r,i),r.va=r.va.remove(o),r.Fa.delete(t),pk(r)}else await vS(r.localStore,t,!1).then((()=>uk(r,t,n))).catch(Bv)}async function sk(e,t){const n=av(e),r=t.batch.batchId;try{const e=await function(e,t){const n=av(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=qv.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);sv(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Db();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);lk(n,r,null),ck(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mk(n,e)}catch(e){await Bv(e)}}async function ak(e,t,n){const r=av(e);try{const e=await function(e,t){const n=av(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(sv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);lk(r,t,n),ck(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mk(r,e)}catch(n){await Bv(n)}}function ck(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function lk(e,t,n){const r=av(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function uk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||hk(e,t)}))}function hk(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(eT(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),pk(e))}function dk(e,t,n){for(const r of n)r instanceof GT?(e.Ma.addReference(r.key,t),fk(e,r)):r instanceof HT?(tv("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||hk(e,r.key)):ov()}function fk(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(tv("SyncEngine","New document in limbo: "+n),e.Ca.add(r),pk(e))}function pk(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Av(Cv.fromString(t)),r=e.Na.next();e.Fa.set(r,new JT(n)),e.va=e.va.insert(n,r),ZS(e.remoteStore,new yE(hb(ab(n.path)),r,"TargetPurposeLimboResolution",ny.oe))}}async function mk(e,t,n){const r=av(e),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{s.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=aS.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Sa.h_(i),await async function(e,t){const n=av(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>qv.forEach(t,(t=>qv.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>qv.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Jv(e))throw e;tv("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function gk(e,t){const n=av(e);if(!n.currentUser.isEqual(t)){tv("SyncEngine","User change. New user:",t.toKey());const e=await dS(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new lv(cv.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mk(n,e.us)}}function vk(e,t){const n=av(e),r=n.Fa.get(t);if(r&&r.wa)return Db().add(r.key);{let e=Db();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function yk(e,t){const n=av(e),r=await yS(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&dk(n,t.targetId,i.fa),i}async function wk(e,t){const n=av(e);return bS(n.localStore,t).then((e=>mk(n,e)))}async function bk(e,t,n,r){const i=av(e),o=await function(e,t){const n=av(e),r=av(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):qv.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await fT(i.remoteStore):"acknowledged"===n||"rejected"===n?(lk(i,t,r||null),ck(i,t),function(e,t){av(av(e).mutationQueue).Mn(t)}(i.localStore,t)):ov(),await mk(i,o)):tv("SyncEngine","Cannot apply mutation batch with id: "+t)}async function _k(e,t,n){const r=av(e),i=[],o=[];for(const s of t){let e;const t=r.Da.get(s);if(t&&0!==t.length){e=await gS(r.localStore,hb(t[0]));for(const e of t){const t=r.ba.get(e),n=await yk(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await wS(r.localStore,s);e=await gS(r.localStore,t),await ek(r,Ek(t),s,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(o),i}function Ek(e){return sb(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ik(e){return function(e){return av(av(e).persistence).Bi()}(av(e).localStore)}async function Sk(e,t,n,r){const i=av(e);if(i.La)return void tv("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await bS(i.localStore,wb(o[0])),r=N_.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Wy.EMPTY_BYTE_STRING);await mk(i,e,r);break}case"rejected":await vS(i.localStore,t,!0),uk(i,t,r);break;default:ov()}}async function Tk(e,t,n){const r=kk(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){tv("SyncEngine","Adding an already active target "+e);continue}const t=await wS(r.localStore,e),n=await gS(r.localStore,t);await ek(r,Ek(t),n.targetId,!1,n.resumeToken),ZS(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await vS(r.localStore,e,!1).then((()=>{eT(r.remoteStore,e),uk(r,e)})).catch(Bv)}}function kk(e){const t=av(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ok.bind(null,t),t.Sa.h_=LT.bind(null,t.eventManager),t.Sa.ka=MT.bind(null,t.eventManager),t}function Ck(e){const t=av(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ak.bind(null,t),t}class xk{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=qS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hS(this.persistence,new lS,e.initialUser,this.serializer)}createPersistence(e){return new $I(ZI.Hr,this.serializer)}createSharedClientState(e){return new RS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Nk extends xk{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await Ck(this.Qa.syncEngine),await fT(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return hS(this.persistence,new lS,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new CI(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ty(t,this.persistence);return new ey(e.asyncQueue,n)}createPersistence(e){const t=sS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?dI.withCacheSize(this.cacheSizeBytes):dI.DEFAULT;return new rS(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zS(),BS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new RS}}class Ak extends Nk{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof PS&&(this.sharedClientState.syncEngine={Zs:bk.bind(null,t),Xs:Sk.bind(null,t),eo:Tk.bind(null,t),Bi:Ik.bind(null,t),Ys:wk.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=av(e);if(kk(n),Ck(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await _k(n,e.toArray());n.La=!0,await IT(n.remoteStore,!0);for(const r of t)ZS(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(uk(n,i),vS(n.localStore,i,!0)))),eT(n.remoteStore,i)})),await t,await _k(n,e),function(e){const t=av(e);t.Fa.forEach(((e,n)=>{eT(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new jy(Av.comparator)}(n),n.La=!1,await IT(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=zS();if(!PS.D(t))throw new lv(cv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=sS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new PS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Pk{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ik(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gk.bind(null,this.syncEngine),await IT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new RT}createDatastore(e){const t=qS(e.databaseInfo.databaseId),n=function(e){return new VS(e)}(e.databaseInfo);return function(e,t,n,r){return new QS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new YS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ik(this.syncEngine,e,0)),OS.D()?new OS:new DS)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new YT(e,t,n,r,i,o);return s&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=av(e);tv("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await XS(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Rk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Dk{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):nv("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Ok{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new uv,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new zT(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Lk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new lv(cv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=av(e),r={documents:t.map((e=>Y_(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,Cv.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){sv(!!t.found),t.found.name,t.found.updateTime;const n=$_(e,t.found.name),r=H_(t.found.updateTime),i=t.found.createTime?H_(t.found.createTime):Tv.min(),o=new Sw({mapValue:{fields:t.found.fields}});return kw.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){sv(!!t.missing),sv(!!t.readTime);const n=$_(e,t.missing),r=H_(t.readTime);return kw.newNoDocument(n,r)}(e,t):ov()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());sv(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new d_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Av.fromPath(t);this.mutations.push(new f_(n,this.precondition(n)))})),await async function(e,t){const n=av(e),r={writes:t.map((e=>iE(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,Cv.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ov();t=Tv.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new lv(cv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tv.min())?Zb.exists(!1):Zb.updateTime(t):Zb.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tv.min()))throw new lv(cv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zb.updateTime(t)}return Zb.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mk{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new KS(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new Lk(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!ry(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!b_(t)}return!1}}class Fk{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$g.UNAUTHENTICATED,this.clientId=bv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{tv("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(tv("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lv(cv.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=CT(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Uk(e,t){e.asyncQueue.verifyOperationInProgress(),tv("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await dS(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function jk(e,t){e.asyncQueue.verifyOperationInProgress();const n=await zk(e);tv("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ET(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ET(t.remoteStore,n))),e._onlineComponents=t}function Vk(e){return"FirebaseError"===e.name?e.code===cv.FAILED_PRECONDITION||e.code===cv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function zk(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tv("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uk(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Vk(n))throw n;rv("Error using user provided cache. Falling back to memory cache: "+n),await Uk(e,new xk)}}else tv("FirestoreClient","Using default OfflineComponentProvider"),await Uk(e,new xk);return e._offlineComponents}async function Bk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tv("FirestoreClient","Using user provided OnlineComponentProvider"),await jk(e,e._uninitializedComponentsProvider._online)):(tv("FirestoreClient","Using default OnlineComponentProvider"),await jk(e,new Pk))),e._onlineComponents}function qk(e){return zk(e).then((e=>e.persistence))}function Kk(e){return zk(e).then((e=>e.localStore))}function Gk(e){return Bk(e).then((e=>e.remoteStore))}function Hk(e){return Bk(e).then((e=>e.syncEngine))}function Wk(e){return Bk(e).then((e=>e.datastore))}async function Qk(e){const t=await Bk(e),n=t.eventManager;return n.onListen=$T.bind(null,t.syncEngine),n.onUnlisten=tk.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=XT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=nk.bind(null,t.syncEngine),n}function Jk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new uv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Dk({next:o=>{t.enqueueAndForget((()=>OT(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new lv(cv.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new lv(cv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new VT(ab(n.path),o,{includeMetadataChanges:!0,ra:!0});return DT(e,s)}(await Qk(e),e.asyncQueue,t,n,r))),r.promise}function Yk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new uv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Dk({next:n=>{t.enqueueAndForget((()=>OT(e,s))),n.fromCache&&"server"===r.source?i.reject(new lv(cv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new VT(n,o,{includeMetadataChanges:!0,ra:!0});return DT(e,s)}(await Qk(e),e.asyncQueue,t,n,r))),r.promise}function $k(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?I_().encode(e):e,function(e,t){return new Ok(e,t)}(function(e,t){if(e instanceof Uint8Array)return Rk(e,t);if(e instanceof ArrayBuffer)return Rk(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,qS(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=av(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=av(e),r=H_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(KT(r));const i=new qT(r,e.localStore,t.serializer);let o=await t.qa();for(;o;){const e=await i._a(o);e&&n._updateProgress(e),o=await t.qa()}const s=await i.complete();return await mk(e,s.ca,void 0),await function(e,t){const n=av(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ua)}catch(e){return rv("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Hk(e),i,r)}))}function Xk(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zk=new Map;function eC(e,t,n){if(!n)throw new lv(cv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function tC(e,t,n,r){if(!0===t&&!0===r)throw new lv(cv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function nC(e){if(!Av.isDocumentKey(e))throw new lv(cv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function rC(e){if(Av.isDocumentKey(e))throw new lv(cv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function iC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ov()}function oC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new lv(cv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iC(e);throw new lv(cv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function sC(e,t){if(t<=0)throw new lv(cv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class aC{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new lv(cv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new lv(cv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xk(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new lv(cv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new lv(cv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new lv(cv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cC{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lv(cv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new lv(cv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new dv;switch(e.type){case"firstParty":return new gv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new lv(cv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zk.get(e);t&&(tv("ComponentProvider","Removing Datastore"),Zk.delete(e),t.terminate())}(this),Promise.resolve()}}function lC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=oC(e,cC))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&rv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$g.MOCK_USER;else{t=dl(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new lv(cv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $g(o)}e._authCredentials=new fv(new hv(t,n))}}class uC{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uC(this.firestore,e,this._query)}}class hC{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hC(this.firestore,e,this._key)}}class dC extends uC{constructor(e,t,n){super(e,t,ab(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hC(this.firestore,null,new Av(e))}withConverter(e){return new dC(this.firestore,e,this._path)}}function fC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ol(e),eC("collection","path",t),e instanceof cC){const n=Cv.fromString(t,...r);return rC(n),new dC(e,null,n)}{if(!(e instanceof hC||e instanceof dC))throw new lv(cv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Cv.fromString(t,...r));return rC(n),new dC(e.firestore,null,n)}}function pC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ol(e),1===arguments.length&&(t=bv.newId()),eC("doc","path",t),e instanceof cC){const n=Cv.fromString(t,...r);return nC(n),new hC(e,null,new Av(n))}{if(!(e instanceof hC||e instanceof dC))throw new lv(cv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Cv.fromString(t,...r));return nC(n),new hC(e.firestore,e instanceof dC?e.converter:null,new Av(n))}}function mC(e,t){return e=Ol(e),t=Ol(t),(e instanceof hC||e instanceof dC)&&(t instanceof hC||t instanceof dC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gC(e,t){return e=Ol(e),t=Ol(t),e instanceof uC&&t instanceof uC&&e.firestore===t.firestore&&mb(e._query,t._query)&&e.converter===t.converter}class vC{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new KS(this,"async_queue_retry"),this.hu=()=>{const e=BS();e&&tv("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=BS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=BS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new uv;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(yL){if(!Jv(yL))throw yL;tv("AsyncQueue","Operation failed with retryable error: "+yL)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw nv("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=kT.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&ov()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function yC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class wC{constructor(){this._progressObserver={},this._taskCompletionResolver=new uv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class bC extends cC{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new vC,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||EC(this),this._firestoreClient.terminate()}}function _C(e){return e._firestoreClient||EC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function EC(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new tw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xk(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Fk(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function IC(e,t,n){const r=new uv;return e.asyncQueue.enqueue((async()=>{try{await Uk(e,n),await jk(e,t),r.resolve()}catch(e){const n=e;if(!Vk(n))throw n;rv("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function SC(e){return function(e){const t=new uv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=av(e);oT(n.remoteStore)||tv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=av(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=CT(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Hk(e),t))),t.promise}(_C(e=oC(e,bC)))}function TC(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await qk(e),n=await Gk(e);return t.setNetworkEnabled(!0),function(e){const t=av(e);return t.M_.delete(0),$S(t)}(n)}))}(_C(e=oC(e,bC)))}function kC(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await qk(e),n=await Gk(e);return t.setNetworkEnabled(!1),async function(e){const t=av(e);t.M_.add(0),await XS(t),t.N_.set("Offline")}(n)}))}(_C(e=oC(e,bC)))}function CC(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=av(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Kk(e),t)))}(_C(e=oC(e,bC)),t).then((t=>t?new uC(e,null,t.query):null))}function xC(e){if(e._initialized||e._terminated)throw new lv(cv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class NC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new NC(Wy.fromBase64String(e))}catch(e){throw new lv(cv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new NC(Wy.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class AC{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new lv(cv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nv(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class PC{constructor(e){this._methodName=e}}class RC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new lv(cv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new lv(cv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _v(this._lat,e._lat)||_v(this._long,e._long)}}const DC=/^__.*__$/;class OC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new c_(e,this.data,this.fieldMask,t,this.fieldTransforms):new a_(e,this.data,t,this.fieldTransforms)}}class LC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new c_(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ov()}}class FC{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new FC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return rx(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(MC(this.fu)&&DC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class UC{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qS(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new FC({fu:e,methodName:t,vu:n,path:Nv.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jC(e){const t=e._freezeSettings(),n=qS(e._databaseId);return new UC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function VC(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Fu(o.merge||o.mergeFields?2:0,t,n,i);ZC("Data must be an object, but it was:",s,r);const a=$C(r,s);let c,l;if(o.merge)c=new Gy(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=ex(t,r,n);if(!s.contains(i))throw new lv(cv.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ix(e,i)||e.push(i)}c=new Gy(e),l=s.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=s.fieldTransforms;return new OC(new Sw(a),c,l)}class zC extends PC{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zC}}function BC(e,t,n){return new FC({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class qC extends PC{_toFieldTransform(e){return new $b(e.path,new qb)}isEqual(e){return e instanceof qC}}class KC extends PC{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=BC(this,e,!0),n=this.Mu.map((e=>YC(e,t))),r=new Kb(n);return new $b(e.path,r)}isEqual(e){return e instanceof KC&&kl(this.Mu,e.Mu)}}class GC extends PC{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=BC(this,e,!0),n=this.Mu.map((e=>YC(e,t))),r=new Hb(n);return new $b(e.path,r)}isEqual(e){return e instanceof GC&&kl(this.Mu,e.Mu)}}class HC extends PC{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Qb(e.serializer,Ub(e.serializer,this.xu));return new $b(e.path,t)}isEqual(e){return e instanceof HC&&this.xu===e.xu}}function WC(e,t,n,r){const i=e.Fu(1,t,n);ZC("Data must be an object, but it was:",i,r);const o=[],s=Sw.empty();Fy(r,((e,r)=>{const a=nx(t,e,n);r=Ol(r);const c=i.Su(a);if(r instanceof zC)o.push(a);else{const e=YC(r,c);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Gy(o);return new LC(s,a,i.fieldTransforms)}function QC(e,t,n,r,i,o){const s=e.Fu(1,t,n),a=[ex(t,r,n)],c=[i];if(o.length%2!=0)throw new lv(cv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(ex(t,o[d])),c.push(o[d+1]);const l=[],u=Sw.empty();for(let d=a.length-1;d>=0;--d)if(!ix(l,a[d])){const e=a[d];let t=c[d];t=Ol(t);const n=s.Su(e);if(t instanceof zC)l.push(e);else{const r=YC(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new Gy(l);return new LC(u,h,s.fieldTransforms)}function JC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return YC(n,e.Fu(r?4:3,t))}function YC(e,t){if(XC(e=Ol(e)))return ZC("Unsupported field value:",t,e),$C(e,t);if(e instanceof PC)return function(e,t){if(!MC(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=YC(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ol(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ub(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Sv.fromDate(e);return{timestampValue:q_(t.serializer,n)}}if(e instanceof Sv){const n=new Sv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:q_(t.serializer,n)}}if(e instanceof RC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof NC)return{bytesValue:K_(t.serializer,e._byteString)};if(e instanceof hC){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:W_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(iC(e)))}(e,t)}function $C(e,t){const n={};return Uy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fy(e,((e,r)=>{const i=YC(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function XC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sv||e instanceof RC||e instanceof NC||e instanceof hC||e instanceof PC)}function ZC(e,t,n){if(!XC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=iC(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function ex(e,t,n){if((t=Ol(t))instanceof AC)return t._internalPath;if("string"==typeof t)return nx(e,t);throw rx("Field path arguments must be of type string or ",e,!1,void 0,n)}const tx=new RegExp("[~\\*/\\[\\]]");function nx(e,t,n){if(t.search(tx)>=0)throw rx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new AC(...t.split("."))._internalPath}catch(Gn){throw rx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function rx(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=" in field ".concat(r)),s&&(c+=" in document ".concat(i)),c+=")"),new lv(cv.INVALID_ARGUMENT,a+e+c)}function ix(e,t){return e.some((e=>e.isEqual(t)))}class ox{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hC(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ax("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sx extends ox{data(){return super.data()}}function ax(e,t){return"string"==typeof t?nx(e,t):t instanceof AC?t._internalPath:t._delegate._internalPath}function cx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new lv(cv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lx{}class ux extends lx{}function hx(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof lx&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof fx)).length,n=e.filter((e=>e instanceof dx)).length;if(t>1||t>0&&n>0)throw new lv(cv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class dx extends ux{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dx(e,t,n)}_apply(e){const t=this._parse(e);return _x(e._query,t),new uC(e.firestore,e.converter,fb(e._query,t))}_parse(e){const t=jC(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new lv(cv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){bx(s,o);const t=[];for(const n of s)t.push(wx(r,e,n));a={arrayValue:{values:t}}}else a=wx(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||bx(s,o),a=JC(n,t,s,"in"===o||"not-in"===o);return Dw.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class fx extends lx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fx(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ow.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)_x(n,i),n=fb(n,i)}(e._query,t),new uC(e.firestore,e.converter,fb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class px extends ux{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new px(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new lv(cv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new lv(cv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Aw(t,n)}(e._query,this._field,this._direction);return new uC(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ob(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class mx extends ux{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new mx(e,t,n)}_apply(e){return new uC(e.firestore,e.converter,pb(e._query,this._limit,this._limitType))}}class gx extends ux{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new gx(e,t,n)}_apply(e){const t=yx(e,this.type,this._docOrFields,this._inclusive);return new uC(e.firestore,e.converter,function(e,t){return new ob(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class vx extends ux{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new vx(e,t,n)}_apply(e){const t=yx(e,this.type,this._docOrFields,this._inclusive);return new uC(e.firestore,e.converter,function(e,t){return new ob(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function yx(e,t,n,r){if(n[0]=Ol(n[0]),n[0]instanceof ox)return function(e,t,n,r,i){if(!r)throw new lv(cv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of ub(e))if(s.field.isKeyField())o.push(dw(t,r.key));else{const e=r.data.field(s.field);if(Xy(e))throw new lv(cv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new lv(cv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Cw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=jC(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new lv(cv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const o=i[c];if(s[c].field.isKeyField()){if("string"!=typeof o)throw new lv(cv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!lb(e)&&-1!==o.indexOf("/"))throw new lv(cv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(Cv.fromString(o));if(!Av.isDocumentKey(n))throw new lv(cv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Av(n);a.push(dw(t,i))}else{const e=JC(n,r,o);a.push(e)}}return new Cw(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function wx(e,t,n){if("string"==typeof(n=Ol(n))){if(""===n)throw new lv(cv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lb(t)&&-1!==n.indexOf("/"))throw new lv(cv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Cv.fromString(n));if(!Av.isDocumentKey(r))throw new lv(cv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return dw(e,new Av(r))}if(n instanceof hC)return dw(e,n._key);throw new lv(cv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(iC(n),"."))}function bx(e,t){if(!Array.isArray(e)||0===e.length)throw new lv(cv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function _x(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new lv(cv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new lv(cv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ex{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ow(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($y(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ov()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fy(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new RC(Yy(e.latitude),Yy(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ew(e));default:return null}}convertTimestamp(e){const t=Jy(e);return new Sv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Cv.fromString(e);sv(vE(n));const r=new nw(n.get(1),n.get(3)),i=new Av(n.popFirst(5));return r.isEqual(t)||nv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ix(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Sx extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new NC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hC(this.firestore,null,t)}}class Tx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kx extends ox{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Cx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ax("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Cx extends kx{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class xx{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tx(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Cx(this._firestore,this._userDataWriter,n.key,n,new Tx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new lv(cv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Cx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Tx(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Cx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Nx(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Nx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ov()}}function Ax(e,t){return e instanceof kx&&t instanceof kx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof xx&&t instanceof xx&&e._firestore===t._firestore&&gC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Px extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new NC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hC(this.firestore,null,t)}}function Rx(e){e=oC(e,hC);const t=oC(e.firestore,bC),n=_C(t),r=new Px(t);return function(e,t){const n=new uv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=av(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new lv(cv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=CT(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Kk(e),t,n))),n.promise}(n,e._key).then((n=>new kx(t,r,e._key,n,new Tx(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Dx(e){e=oC(e,uC);const t=oC(e.firestore,bC),n=_C(t),r=new Px(t);return function(e,t){const n=new uv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await yS(e,t,!0),i=new WT(t,r.hs),o=i.da(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=CT(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Kk(e),t,n))),n.promise}(n,e._query).then((n=>new xx(t,r,e,n)))}function Ox(e,t,n){e=oC(e,hC);const r=oC(e.firestore,bC),i=Ix(e.converter,t,n);return Ux(r,[VC(jC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zb.none())])}function Lx(e,t,n){e=oC(e,hC);const r=oC(e.firestore,bC),i=jC(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];return o="string"==typeof(t=Ol(t))||t instanceof AC?QC(i,"updateDoc",e._key,t,n,a):WC(i,"updateDoc",e._key,t),Ux(r,[o.toMutation(e._key,Zb.exists(!0))])}function Mx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=Ol(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||yC(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(yC(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof hC)h=oC(e.firestore,bC),d=ab(e._key.path),u={next:t=>{n[c]&&n[c](jx(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=oC(e,uC);h=oC(t.firestore,bC),d=t._query;const r=new Px(h);u={next:e=>{n[c]&&n[c](new xx(h,r,t,e))},error:n[c+1],complete:n[c+2]},cx(e._query)}return function(e,t,n,r){const i=new Dk(r),o=new VT(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>DT(await Qk(e),o))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>OT(await Qk(e),o)))}}(_C(h),d,l,u)}function Fx(e,t){return function(e,t){const n=new Dk(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){av(e).z_.add(t),t.next()}(await Qk(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){av(e).z_.delete(t)}(await Qk(e),n)))}}(_C(e=oC(e,bC)),yC(t)?t:{next:t})}function Ux(e,t){return function(e,t){const n=new uv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Ck(e);try{const e=await function(e,t){const n=av(e),r=Sv.now(),i=t.reduce(((e,t)=>e.add(t.key)),Db());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Sb(),c=Db();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=o_(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new c_(e.key,t,Tw(t.value.mapValue),Zb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Cb(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new jy(_v)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await mk(r,e.changes),await fT(r.remoteStore)}catch(e){const t=CT(e,"Failed to persist write");n.reject(t)}}(await Hk(e),t,n))),n.promise}(_C(e),t)}function jx(e,t,n){const r=n.docs.get(t._key),i=new Px(e);return new kx(e,i,t._key,r,new Tx(n.hasPendingWrites,n.fromCache),t.converter)}const Vx={maxAttempts:5};class zx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jC(e)}set(e,t,n){this._verifyNotCommitted();const r=Bx(e,this._firestore),i=Ix(r.converter,t,n),o=VC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Zb.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Bx(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=Ol(t))||t instanceof AC?QC(this._dataReader,"WriteBatch.update",r._key,t,n,s):WC(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Zb.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bx(e,this._firestore);return this._mutations=this._mutations.concat(new d_(t._key,Zb.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new lv(cv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bx(e,t){if((e=Ol(e)).firestore!==t)throw new lv(cv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class qx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jC(e)}get(e){const t=Bx(e,this._firestore),n=new Sx(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return ov();const r=e[0];if(r.isFoundDocument())return new ox(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new ox(this._firestore,n,t._key,null,t.converter);throw ov()}))}set(e,t,n){const r=Bx(e,this._firestore),i=Ix(r.converter,t,n),o=VC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Bx(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=Ol(t))||t instanceof AC?QC(this._dataReader,"Transaction.update",r._key,t,n,s):WC(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Bx(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bx(e,this._firestore),n=new Px(this._firestore);return super.get(e).then((e=>new kx(this._firestore,n,t._key,e._document,new Tx(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Xg=e}(eh),Gu(new Ll("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new bC(new pv(e.getProvider("auth-internal")),new yv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new lv(cv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nw(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),sh(Yg,"4.6.4",e),sh(Yg,"4.6.4","esm2017")}();function Kx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new lv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Gx(){if("undefined"===typeof Uint8Array)throw new lv("unimplemented","Uint8Arrays are not available in this environment.")}function Hx(){if("undefined"==typeof atob)throw new lv("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Wx{constructor(e){this._delegate=e}static fromBase64String(e){return Hx(),new Wx(NC.fromBase64String(e))}static fromUint8Array(e){return Gx(),new Wx(NC.fromUint8Array(e))}toBase64(){return Hx(),this._delegate.toBase64()}toUint8Array(){return Gx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qx(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Jx{enableIndexedDbPersistence(e,t){return function(e,t){xC(e=oC(e,bC));const n=_C(e);if(n._uninitializedComponentsProvider)throw new lv(cv.FAILED_PRECONDITION,"SDK cache is already specified.");rv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Pk;return IC(n,i,new Nk(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){xC(e=oC(e,bC));const t=_C(e);if(t._uninitializedComponentsProvider)throw new lv(cv.FAILED_PRECONDITION,"SDK cache is already specified.");rv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Pk;return IC(t,r,new Ak(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new lv(cv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new uv;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Gv.D())return Promise.resolve();const t=e+"main";await Gv.delete(t)}(sS(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Yx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof nw||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||rv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};lC(this._delegate,e,t,n)}enableNetwork(){return TC(this._delegate)}disableNetwork(){return kC(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,tC("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return SC(this._delegate)}onSnapshotsInSync(e){return Fx(this._delegate,e)}get app(){if(!this._appCompat)throw new lv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uN(this,fC(this._delegate,e))}catch(yL){throw nN(yL,"collection()","Firestore.collection()")}}doc(e){try{return new tN(this,pC(this._delegate,e))}catch(yL){throw nN(yL,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new aN(this,function(e,t){if(e=oC(e,cC),eC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new lv(cv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new uC(e,null,function(e){return new ob(Cv.emptyPath(),e)}(t))}(this._delegate,e))}catch(yL){throw nN(yL,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=oC(e,bC);const r=Object.assign(Object.assign({},Vx),n);return function(e){if(e.maxAttempts<1)throw new lv(cv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new uv;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Wk(e);new Mk(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(_C(e),(n=>t(new qx(e,n))),r)}(this._delegate,(t=>e(new Xx(this,t))))}batch(){return _C(this._delegate),new Zx(new zx(this._delegate,(e=>Ux(this._delegate,e))))}loadBundle(e){return function(e,t){const n=_C(e=oC(e,bC)),r=new wC;return $k(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return CC(this._delegate,e).then((e=>e?new aN(this,e):null))}}class $x extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wx(new NC(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tN.forKey(t,this.firestore,null)}}class Xx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $x(e)}get(e){const t=hN(e);return this._delegate.get(t).then((e=>new oN(this._firestore,new kx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=hN(e);return n?(Kx("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=hN(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=hN(e);return this._delegate.delete(t),this}}class Zx{constructor(e){this._delegate=e}set(e,t,n){const r=hN(e);return n?(Kx("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=hN(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=hN(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class eN{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Cx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sN(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=eN.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new eN(e,new $x(e),t),r.set(t,i)),i}}eN.INSTANCES=new WeakMap;class tN{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $x(e)}static forPath(e,t,n){if(e.length%2!==0)throw new lv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new tN(t,new hC(t._delegate,n,new Av(e)))}static forKey(e,t,n){return new tN(t,new hC(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new uN(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uN(this.firestore,fC(this._delegate,e))}catch(yL){throw nN(yL,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ol(e))instanceof hC&&mC(this._delegate,e)}set(e,t){t=Kx("DocumentReference.set",t);try{return t?Ox(this._delegate,e,t):Ox(this._delegate,e)}catch(yL){throw nN(yL,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Lx(this._delegate,e):Lx(this._delegate,e,t,...r)}catch(yL){throw nN(yL,"updateDoc()","DocumentReference.update()")}}delete(){return Ux(oC((e=this._delegate).firestore,bC),[new d_(e._key,Zb.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rN(t),i=iN(t,(e=>new oN(this.firestore,new kx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Mx(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Rx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=oC(e,hC);const t=oC(e.firestore,bC);return Jk(_C(t),e._key,{source:"server"}).then((n=>jx(t,e,n)))}(this._delegate):function(e){e=oC(e,hC);const t=oC(e.firestore,bC);return Jk(_C(t),e._key).then((n=>jx(t,e,n)))}(this._delegate),t.then((e=>new oN(this.firestore,new kx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new tN(this.firestore,e?this._delegate.withConverter(eN.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nN(e,t,n){return e.message=e.message.replace(t,n),e}function rN(e){for(const t of e)if("object"===typeof t&&!Qx(t))return t;return{}}function iN(e,t){var n,r;let i;return i=Qx(e[0])?e[0]:Qx(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class oN{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tN(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ax(this._delegate,e._delegate)}}class sN extends oN{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||ov(),t}}class aN{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $x(e)}where(e,t,n){try{return new aN(this.firestore,hx(this._delegate,function(e,t,n){const r=t,i=ax("where",e);return dx._create(i,r,n)}(e,t,n)))}catch(yL){throw nN(yL,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new aN(this.firestore,hx(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ax("orderBy",e);return px._create(n,t)}(e,t)))}catch(yL){throw nN(yL,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new aN(this.firestore,hx(this._delegate,(sC("limit",t=e),mx._create("limit",t,"F"))))}catch(t){throw nN(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new aN(this.firestore,hx(this._delegate,(sC("limitToLast",t=e),mx._create("limitToLast",t,"L"))))}catch(t){throw nN(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new aN(this.firestore,hx(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gx._create("startAt",t,!0)}(...arguments)))}catch(yL){throw nN(yL,"startAt()","Query.startAt()")}}startAfter(){try{return new aN(this.firestore,hx(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gx._create("startAfter",t,!1)}(...arguments)))}catch(yL){throw nN(yL,"startAfter()","Query.startAfter()")}}endBefore(){try{return new aN(this.firestore,hx(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vx._create("endBefore",t,!1)}(...arguments)))}catch(yL){throw nN(yL,"endBefore()","Query.endBefore()")}}endAt(){try{return new aN(this.firestore,hx(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vx._create("endAt",t,!0)}(...arguments)))}catch(yL){throw nN(yL,"endAt()","Query.endAt()")}}isEqual(e){return gC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=oC(e,uC);const t=oC(e.firestore,bC),n=_C(t),r=new Px(t);return Yk(n,e._query,{source:"server"}).then((n=>new xx(t,r,e,n)))}(this._delegate):function(e){e=oC(e,uC);const t=oC(e.firestore,bC),n=_C(t),r=new Px(t);return cx(e._query),Yk(n,e._query).then((n=>new xx(t,r,e,n)))}(this._delegate),t.then((e=>new lN(this.firestore,new xx(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rN(t),i=iN(t,(e=>new lN(this.firestore,new xx(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Mx(this._delegate,r,i)}withConverter(e){return new aN(this.firestore,e?this._delegate.withConverter(eN.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class cN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sN(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new aN(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new sN(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new cN(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new sN(this._firestore,n))}))}isEqual(e){return Ax(this._delegate,e._delegate)}}class uN extends aN{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tN(this.firestore,e):null}doc(e){try{return new tN(this.firestore,void 0===e?pC(this._delegate):pC(this._delegate,e))}catch(yL){throw nN(yL,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=oC(e.firestore,bC),r=pC(e),i=Ix(e.converter,t);return Ux(n,[VC(jC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zb.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new tN(this.firestore,e)))}isEqual(e){return mC(this._delegate,e._delegate)}withConverter(e){return new uN(this.firestore,e?this._delegate.withConverter(eN.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hN(e){return oC(e,hC)}class dN{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new AC(...t)}static documentId(){return new dN(Nv.keyField().canonicalString())}isEqual(e){return(e=Ol(e))instanceof AC&&this._delegate._internalPath.isEqual(e._internalPath)}}class fN{constructor(e){this._delegate=e}static serverTimestamp(){const e=new qC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new fN(e)}static delete(){const e=new zC("deleteField");return e._methodName="FieldValue.delete",new fN(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new KC("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new fN(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new GC("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new fN(e)}static increment(e){const t=new HC("increment",e);return t._methodName="FieldValue.increment",new fN(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pN={Firestore:Yx,GeoPoint:RC,Timestamp:Sv,Blob:Wx,Transaction:Xx,WriteBatch:Zx,DocumentReference:tN,DocumentSnapshot:oN,Query:aN,QueryDocumentSnapshot:sN,QuerySnapshot:lN,CollectionReference:uN,FieldPath:dN,FieldValue:fN,setLogLevel:function(e){var t;t=e,Zg.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ll("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},pN)))}(e,((e,t)=>new Yx(e,t,new Jx))),e.registerVersion("@firebase/firestore-compat","0.3.33")}(Th);const mN="firebasestorage.googleapis.com",gN="storageBucket";class vN extends El{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(bN(e),"Firebase Storage: ".concat(t," (").concat(bN(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vN.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var yN,wN;function bN(e){return"storage/"+e}function _N(){return new vN(yN.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function EN(){return new vN(yN.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IN(){return new vN(yN.CANCELED,"User canceled the upload/download.")}function SN(){return new vN(yN.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TN(e){return new vN(yN.INVALID_ARGUMENT,e)}function kN(){return new vN(yN.APP_DELETED,"The Firebase app was deleted.")}function CN(e){return new vN(yN.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xN(e,t){return new vN(yN.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function NN(e){throw new vN(yN.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(yN||(yN={}));class AN{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=AN.makeFromUrl(e,t)}catch(yL){return new AN(e,"")}if(""===n.path)return n;throw r=e,new vN(yN.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===mN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new AN(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new vN(yN.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class PN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function RN(e){return"string"===typeof e||e instanceof String}function DN(e){return ON()&&e instanceof Blob}function ON(){return"undefined"!==typeof Blob}function LN(e,t,n,r){if(r<t)throw TN("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw TN("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function MN(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function FN(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function UN(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(wN||(wN={}));class jN{constructor(e,t,n,r,i,o,s,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new VN(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===wN.NO_ERROR,i=n.getStatus();if(!t||UN(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===wN.ABORT;return void e(!1,new VN(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new VN(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(yL){r(yL)}else if(null!==i){const e=_N();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?kN():IN())}else{r(EN())}};this.canceled_?t(0,new VN(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||s)return d(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class VN{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function zN(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function BN(){const e=zN();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ON())return new Blob(n);throw new vN(yN.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function qN(e){if("undefined"===typeof atob)throw t="base-64",new vN(yN.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const KN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class GN{constructor(e,t){this.data=e,this.contentType=t||null}}function HN(e,t){switch(e){case KN.RAW:return new GN(WN(t));case KN.BASE64:case KN.BASE64URL:return new GN(QN(e,t));case KN.DATA_URL:return new GN(function(e){const t=new JN(e);return t.base64?QN(KN.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(yL){throw xN(KN.DATA_URL,"Malformed data URL.")}return WN(t)}(t.rest)}(t),new JN(t).contentType)}throw _N()}function WN(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function QN(e,t){switch(e){case KN.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw xN(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case KN.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw xN(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qN(t)}catch(yL){if(yL.message.includes("polyfill"))throw yL;throw xN(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class JN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw xN(KN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class YN{constructor(e,t){let n=0,r="";DN(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(DN(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new YN(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new YN(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ON()){const e=t.map((e=>e instanceof YN?e.data_:e));return new YN(BN.apply(null,e))}{const e=t.map((e=>RN(e)?HN(KN.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new YN(r,!0)}}uploadData(){return this.data_}}function $N(e){let t;try{t=JSON.parse(e)}catch(yL){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function XN(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ZN(e,t){return t}class eA{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||ZN}}let tA=null;function nA(){if(tA)return tA;const e=[];e.push(new eA("bucket")),e.push(new eA("generation")),e.push(new eA("metageneration")),e.push(new eA("name","fullPath",!0));const t=new eA("name");t.xform=function(e,t){return function(e){return!RN(e)||e.length<2?e:XN(e)}(t)},e.push(t);const n=new eA("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new eA("timeCreated")),e.push(new eA("updated")),e.push(new eA("md5Hash",null,!0)),e.push(new eA("cacheControl",null,!0)),e.push(new eA("contentDisposition",null,!0)),e.push(new eA("contentEncoding",null,!0)),e.push(new eA("contentLanguage",null,!0)),e.push(new eA("contentType",null,!0)),e.push(new eA("metadata","customMetadata",!0)),tA=e,tA}function rA(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new AN(n,r);return t._makeStorageReference(i)}})}(r,e),r}function iA(e,t,n){const r=$N(t);if(null===r)return null;return rA(e,r,n)}function oA(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const sA="prefixes",aA="items";function cA(e,t,n){const r=$N(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[sA])for(const i of n[sA]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new AN(t,n));r.prefixes.push(o)}if(n[aA])for(const i of n[aA]){const n=e._makeStorageReference(new AN(t,i.name));r.items.push(n)}return r}(e,t,r)}class lA{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function uA(e){if(!e)throw _N()}function hA(e,t){return function(n,r){const i=iA(e,r,t);return uA(null!==i),i}}function dA(e,t){return function(n,r){const i=iA(e,r,t);return uA(null!==i),function(e,t,n,r){const i=$N(t);if(null===i)return null;if(!RN(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return MN("/b/"+s(i)+"/o/"+s(o),n,r)+FN({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function fA(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new vN(yN.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new vN(yN.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new vN(yN.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new vN(yN.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function pA(e){const t=fA(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new vN(yN.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function mA(e,t,n){const r=MN(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new lA(r,"GET",hA(e,n),i);return o.errorHandler=pA(t),o}function gA(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=MN(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new lA(s,"GET",function(e,t){return function(n,r){const i=cA(e,t,r);return uA(null!==i),i}}(e,t.bucket),a);return c.urlParams=o,c.errorHandler=fA(t),c}function vA(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function yA(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const c=vA(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+oA(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=YN.getBlob(l,r,u);if(null===h)throw SN();const d={name:c.fullPath},f=MN(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new lA(f,"POST",hA(e,n),p);return m.urlParams=d,m.headers=s,m.body=h.uploadData(),m.errorHandler=fA(t),m}class wA{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function bA(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(yL){uA(!1)}return uA(!!n&&-1!==(t||["active"]).indexOf(n)),n}const _A=262144;function EA(e,t,n,r,i,o,s,a){const c=new wA(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new vN(yN.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";f=0===u?"finalize":l===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(c.current)},m=r.slice(h,d);if(null===m)throw SN();const g=t.maxUploadRetryTime,v=new lA(n,"POST",(function(e,n){const i=bA(e,["active","final"]),s=c.current+u,a=r.size();let l;return l="final"===i?hA(t,o)(e,n):null,new wA(s,a,"final"===i,l)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=fA(e),v}const IA={STATE_CHANGED:"state_changed"},SA={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function TA(e){switch(e){case"running":case"pausing":case"canceling":return SA.RUNNING;case"paused":return SA.PAUSED;case"success":return SA.SUCCESS;case"canceled":return SA.CANCELED;default:return SA.ERROR}}class kA{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function CA(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let xA=null;class NA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wN.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=wN.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=wN.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw NN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw NN("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw NN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(yL){return-1}}getResponse(){if(!this.sent_)throw NN("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw NN("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class AA extends NA{initXhr(){this.xhr_.responseType="text"}}function PA(){return xA?xA():new AA}class RA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=nA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(yN.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(UN(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=EN()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(yN.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=vA(t,r,i),a={name:s.fullPath},c=MN(o,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},u=oA(s,n),h=e.maxUploadRetryTime,d=new lA(c,"POST",(function(e){let t;bA(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(yL){uA(!1)}return uA(RN(t)),t}),h);return d.urlParams=a,d.headers=l,d.body=u,d.errorHandler=fA(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,PA,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new lA(n,"POST",(function(e){const t=bA(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(yL){uA(!1)}n||uA(!1);const i=Number(n);return uA(!isNaN(i)),new wA(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=fA(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,PA,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=_A*this._chunkMultiplier,t=new wA(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=EA(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(yL){return this._error=yL,void this._transition("error")}const s=this._ref.storage._makeRequest(o,PA,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(_A*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=mA(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,PA,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=yA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,PA,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=IN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=TA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new kA(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(TA(this._state)){case SA.SUCCESS:CA(this._resolve.bind(null,this.snapshot))();break;case SA.CANCELED:case SA.ERROR:CA(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(TA(this._state)){case SA.RUNNING:case SA.PAUSED:e.next&&CA(e.next.bind(e,this.snapshot))();break;case SA.SUCCESS:e.complete&&CA(e.complete.bind(e))();break;default:e.error&&CA(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class DA{constructor(e,t){this._service=e,this._location=t instanceof AN?t:AN.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new DA(e,t)}get root(){const e=new AN(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XN(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new AN(this._location.bucket,e);return new DA(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw CN(e)}}function OA(e){const t={prefixes:[],items:[]};return LA(e,t).then((()=>t))}async function LA(e,t,n){const r={pageToken:n},i=await MA(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await LA(e,t,i.nextPageToken)}function MA(e,t){null!=t&&"number"===typeof t.maxResults&&LN("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=gA(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,PA)}function FA(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=MN(t.fullServerUrl(),e.host,e._protocol),o=oA(n,r),s=e.maxOperationRetryTime,a=new lA(i,"PATCH",hA(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=pA(t),a}(e.storage,e._location,t,nA());return e.storage.makeRequestWithTokens(n,PA)}function UA(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=MN(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new lA(r,"GET",dA(e,n),i);return o.errorHandler=pA(t),o}(e.storage,e._location,nA());return e.storage.makeRequestWithTokens(t,PA).then((e=>{if(null===e)throw new vN(yN.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function jA(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=MN(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new lA(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=pA(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,PA)}function VA(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new AN(e._location.bucket,n);return new DA(e.storage,r)}function zA(e,t){if(e instanceof KA){const n=e;if(null==n._bucket)throw new vN(yN.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gN+"' property when initializing the app?");const r=new DA(n,n._bucket);return null!=t?zA(r,t):r}return void 0!==t?VA(e,t):e}function BA(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof KA)return new DA(e,t);throw TN("To use ref(service, url), the first argument must be a Storage instance.")}return zA(e,t)}function qA(e,t){const n=null===t||void 0===t?void 0:t[gN];return null==n?null:AN.makeFromBucketSpec(n,e)}class KA{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=mN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?AN.makeFromBucketSpec(r,this._host):qA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=AN.makeFromBucketSpec(this._url,e):this._bucket=qA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new DA(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new PN(kN());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=FN(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new jN(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const GA="@firebase/storage",HA="0.12.6",WA="storage";function QA(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new RA(e,new YN(t),n)}(e=Ol(e),t,n)}function JA(e){return function(e){e._throwIfRoot("getMetadata");const t=mA(e.storage,e._location,nA());return e.storage.makeRequestWithTokens(t,PA)}(e=Ol(e))}function YA(e,t){return BA(e=Ol(e),t)}function $A(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:dl(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function XA(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new KA(r,i,o,n,eh)}Gu(new Ll(WA,XA,"PUBLIC").setMultipleInstances(!0)),sh(GA,HA,""),sh(GA,HA,"esm2017");class ZA{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class eP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ZA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new ZA(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new ZA(e,this,this._ref)):{next:t.next?e=>t.next(new ZA(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class tP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new nP(e,this._service)))}get items(){return this._delegate.items.map((e=>new nP(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nP{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return VA(e,t)}(this._delegate,e);return new nP(t,this.storage)}get root(){return new nP(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nP(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new eP(QA(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KN.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=HN(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new eP(new RA(this._delegate,new YN(r.data,!0),i),this)}listAll(){return function(e){return OA(e=Ol(e))}(this._delegate).then((e=>new tP(e,this.storage)))}list(e){return function(e,t){return MA(e=Ol(e),t)}(this._delegate,e||void 0).then((e=>new tP(e,this.storage)))}getMetadata(){return JA(this._delegate)}updateMetadata(e){return function(e,t){return FA(e=Ol(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return UA(e=Ol(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return jA(e=Ol(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw CN(e)}}class rP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(iP(e))throw TN("ref() expected a child path but got a URL, use refFromURL instead.");return new nP(YA(this._delegate,e),this)}refFromURL(e){if(!iP(e))throw TN("refFromURL() expected a full URL but got a child path, use ref() instead.");try{AN.makeFromUrl(e,this._delegate.host)}catch(yL){throw TN("refFromUrl() expected a valid full URL but got an invalid one.")}return new nP(YA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$A(this._delegate,e,t,n)}}function iP(e){return/^[A-Za-z]+:\/\//.test(e)}function oP(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new rP(r,i)}!function(e){const t={TaskState:SA,TaskEvent:IA,StringFormat:KN,Storage:rP,Reference:nP};e.INTERNAL.registerComponent(new Ll("storage-compat",oP,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.9")}(Th);Th.initializeApp({apiKey:"AIzaSyA2GHgPlH8jTli_7HGe9nLySebPPgv_n2M",authDomain:"cool-6f593.firebaseapp.com",projectId:"cool-6f593",storageBucket:"cool-6f593.appspot.com",messagingSenderId:"554312178402",appId:"1:554312178402:web:cf8965d66e306da8111cbb"});const sP=Th;var aP=n(579);const cP=function(e){let{user:t}=e;return(0,aP.jsxs)(Ji,{children:[(0,aP.jsx)(Ji.Item,{as:Zc,to:"/posts",children:"cool"}),(0,aP.jsx)(Ji.Item,{children:(0,aP.jsx)(Pa,{})}),(0,aP.jsx)(Ji.Menu,{position:"right",children:t?(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsx)(Ji.Item,{as:Zc,to:"/new-post",children:"\u767c\u8868\u6587\u7ae0"}),(0,aP.jsx)(Ji.Item,{as:Zc,to:"/my/posts",children:"\u6703\u54e1"}),(0,aP.jsx)(Ji.Item,{onClick:()=>sP.auth().signOut(),children:"\u767b\u51fa"})]}):(0,aP.jsx)(Ji.Item,{as:Zc,to:"/signin",children:"\u8a3b\u518a/\u767b\u5165"})})]})};function lP(e){var n=e.children,r=e.className,i=e.content,s=e.fluid,a=e.text,c=e.textAlign,l=Hn("ui",Jn(a,"text"),Jn(s,"fluid"),Zn(c),"container",r),u=nr(lP,e),h=rr(lP,e);return t.createElement(h,o({},u,{className:l}),ar(n)?i:n)}lP.handledProps=["as","children","className","content","fluid","text","textAlign"],lP.propTypes={};const uP=lP;const hP=function(e,t,n){"__proto__"==t&&Un?Un(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var dP=Object.prototype.hasOwnProperty;const fP=function(e,t,n){var r=e[t];dP.call(e,t)&&u(r,n)&&(void 0!==n||t in e)||hP(e,t,n)};const pP=function(e,t,n,r){if(!M(e))return e;for(var i=-1,o=(t=dn(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var c=fn(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var u=a[c];void 0===(l=r?r(u,c,a):void 0)&&(l=M(u)?u:tt(t[i+1])?[]:{})}fP(a,c,l),a=a[c]}return e};const mP=function(e,t,n){return null==e?e:pP(e,t,n)};var gP=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).inputRef=(0,t.createRef)(),n.labelRef=(0,t.createRef)(),n.canToggle=function(){var e=n.props,t=e.disabled,r=e.radio,i=e.readOnly,o=n.state.checked;return!t&&!i&&!(r&&o)},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return Pr(r)?t?-1:0:r},n.handleClick=function(e){var t=n.props.id,r=n.state,i=r.checked,s=r.indeterminate,a=Kn(n.inputRef.current,"contains",e.target),c=Kn(n.labelRef.current,"contains",e.target),l=!c&&!a,u=!Pr(t);c&&u||Kn(n.props,"onClick",e,o({},n.props,{checked:!i,indeterminate:!!s})),n.isClickFromMouse&&(n.isClickFromMouse=!1,c&&!u&&n.handleChange(e),l&&n.handleChange(e),c&&u&&e.stopPropagation())},n.handleChange=function(e){var t=n.state.checked;n.canToggle()&&(Kn(n.props,"onChange",e,o({},n.props,{checked:!t,indeterminate:!1})),n.setState({checked:!t,indeterminate:!1}))},n.handleMouseDown=function(e){var t=n.state,r=t.checked,i=t.indeterminate;Kn(n.props,"onMouseDown",e,o({},n.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||Kn(n.inputRef.current,"focus"),e.preventDefault()},n.handleMouseUp=function(e){var t=n.state,r=t.checked,i=t.indeterminate;n.isClickFromMouse=!0,Kn(n.props,"onMouseUp",e,o({},n.props,{checked:!!r,indeterminate:!!i}))},n.setIndeterminate=function(){var e=n.state.indeterminate;mP(n.inputRef,"current.indeterminate",!!e)},n}a(n,e);var r=n.prototype;return r.componentDidMount=function(){this.setIndeterminate()},r.componentDidUpdate=function(){this.setIndeterminate()},r.render=function(){var e=this.props,r=e.className,i=e.disabled,s=e.label,a=e.id,c=e.name,l=e.radio,u=e.readOnly,h=e.slider,d=e.toggle,f=e.type,p=e.value,m=this.state,g=m.checked,v=m.indeterminate,y=Hn("ui",Jn(g,"checked"),Jn(i,"disabled"),Jn(v,"indeterminate"),Jn(Pr(s),"fitted"),Jn(l,"radio"),Jn(u,"read-only"),Jn(h,"slider"),Jn(d,"toggle"),"checkbox",r),w=nr(n,this.props),b=rr(n,this.props),_=Ms(w,{htmlProps:Ds}),E=_[0],I=_[1],S=Mr(s,{defaultProps:{htmlFor:a},autoGenerateKey:!1})||t.createElement("label",{htmlFor:a});return t.createElement(b,o({},I,{className:y,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),t.createElement(Gs,{innerRef:this.inputRef},t.createElement("input",o({},E,{checked:g,className:"hidden",disabled:i,id:a,name:c,readOnly:!0,tabIndex:this.computeTabIndex(),type:f,value:p}))),t.createElement(Gs,{innerRef:this.labelRef},S))},n}(lr);function vP(e){var n=e.slider,r=e.toggle,i=e.type,s=nr(vP,e),a=!(n||r)||void 0;return t.createElement(gP,o({},s,{type:i,radio:a,slider:n,toggle:r}))}gP.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],gP.propTypes={},gP.defaultProps={type:"checkbox"},gP.autoControlledProps=["checked","indeterminate"],vP.handledProps=["slider","toggle","type"],vP.propTypes={},vP.defaultProps={type:"radio"};const yP=vP;function wP(e){var n=e.children,r=e.className,i=e.content,s=e.control,a=e.disabled,c=e.error,l=e.inline,u=e.label,h=e.required,d=e.type,f=e.width,p=e.id,m=Hn(Jn(a,"disabled"),Jn(c,"error"),Jn(l,"inline"),Jn(h,"required"),tr(f,"wide"),"field",r),g=nr(wP,e),v=rr(wP,e),y=mn(c,"pointing","above"),w=ua.create(c,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:y,id:p?p+"-error-message":void 0,role:"alert","aria-atomic":!0}}),b=("below"===y||"right"===y)&&w,_=("above"===y||"left"===y)&&w;if(Pr(s))return Pr(u)?t.createElement(v,o({},g,{className:m,id:p}),ar(n)?i:n):t.createElement(v,o({},g,{className:m,id:p}),b,Mr(u,{autoGenerateKey:!1}),_);var E={"aria-describedby":p&&c?p+"-error-message":null,"aria-invalid":!!c||void 0},I=o({},g,{content:i,children:n,disabled:a,required:h,type:d,id:p});return"input"!==s||"checkbox"!==d&&"radio"!==d?s===gP||s===yP?t.createElement(v,{className:m},b,(0,t.createElement)(s,o({},E,I,{label:u})),_):t.createElement(v,{className:m},Mr(u,{defaultProps:{htmlFor:p},autoGenerateKey:!1}),b,(0,t.createElement)(s,o({},E,I)),_):t.createElement(v,{className:m},t.createElement("label",null,b,(0,t.createElement)(s,o({},E,I))," ",u,_))}wP.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],wP.propTypes={};const bP=wP;function _P(e){var n=e.control,r=nr(_P,e),i=rr(_P,e);return t.createElement(i,o({},r,{control:n}))}_P.handledProps=["as","control"],_P.propTypes={},_P.defaultProps={as:bP,control:ya};const EP=_P;function IP(e){var n=e.control,r=nr(IP,e),i=rr(IP,e);return t.createElement(i,o({},r,{control:n}))}IP.handledProps=["as","control"],IP.propTypes={},IP.defaultProps={as:bP,control:gP};const SP=IP;const TP=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i};const kP=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};const CP=function(e,t){var n=!0;return Cn(e,(function(e,r,i){return n=!!t(e,r,i)})),n};const xP=function(e,t,n){var r=Le(e)?kP:CP;return n&&or(e,t,n)&&(t=void 0),r(e,Sn(t,3))};const NP=function(e,t,n,r){var i=-1,o=pr,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;n&&(t=c(t,ot(n))),r?(o=mr,s=!1):t.length>=200&&(o=ke,s=!1,t=new Se(t));e:for(;++i<a;){var h=e[i],d=null==n?h:n(h);if(h=r||0!==h?h:0,s&&d===d){for(var f=u;f--;)if(t[f]===d)continue e;l.push(h)}else o(t,d,r)||l.push(h)}return l};const AP=function(e){return qe(e)&&bt(e)};var PP=qn((function(e,t){return AP(e)?NP(e,t):[]}));const RP=PP;const DP=function(e){return function(t,n,r){var i=Object(t);if(!bt(t)){var o=Sn(n,3);t=_t(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}};var OP=Math.max;const LP=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ss(n);return i<0&&(i=OP(r+i,0)),ur(e,Sn(t,3),i)};const MP=DP(LP);const FP=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:ss(t),Rn(e,0,(t=r-t)<0?0:t)):[]};const UP=_n("length");var jP="\\ud800-\\udfff",VP="["+jP+"]",zP="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",BP="\\ud83c[\\udffb-\\udfff]",qP="[^"+jP+"]",KP="(?:\\ud83c[\\udde6-\\uddff]){2}",GP="[\\ud800-\\udbff][\\udc00-\\udfff]",HP="(?:"+zP+"|"+BP+")"+"?",WP="[\\ufe0e\\ufe0f]?",QP=WP+HP+("(?:\\u200d(?:"+[qP,KP,GP].join("|")+")"+WP+HP+")*"),JP="(?:"+[qP+zP+"?",zP,KP,GP,VP].join("|")+")",YP=RegExp(BP+"(?="+BP+")|"+JP+QP,"g");const $P=function(e){for(var t=YP.lastIndex=0;YP.test(e);)++t;return t};const XP=function(e){return Ii(e)?$P(e):UP(e)};const ZP=function(e){if(null==e)return 0;if(bt(e))return Nr(e)?XP(e):e.length;var t=Vt(e);return"[object Map]"==t||"[object Set]"==t?e.size:wt(e).length};var eR=k?k.isConcatSpreadable:void 0;const tR=function(e){return Le(e)||Qe(e)||!!(eR&&e&&e[eR])};const nR=function e(t,n,r,i,o){var s=-1,a=t.length;for(r||(r=tR),o||(o=[]);++s<a;){var c=t[s];n>0&&r(c)?n>1?e(c,n-1,r,i,o):Oe(o,c):i||(o[o.length]=c)}return o};var rR=qn((function(e,t){return AP(e)?NP(e,nR(t,1,AP,!0)):[]}));const iR=rR;const oR=qn((function(e){return wr(nR(e,1,AP,!0))}));const sR=function(e,t){return Ht(e,t)};const aR=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=pn(e,s);n(a,s)&&pP(o,dn(s,e),a)}return o};const cR=function(e,t){return aR(e,t,(function(t,n){return yn(e,n)}))};const lR=function(e){return(null==e?0:e.length)?nR(e,1):[]};const uR=function(e){return Bn(Mn(e,void 0,lR),e+"")}((function(e,t){return null==e?{}:cR(e,t)}));var hR=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.className,i=e.name,s=Hn(i,"flag",r),a=nr(n,this.props),c=rr(n,this.props);return t.createElement(c,o({},a,{className:s}))},n}(t.PureComponent);hR.handledProps=["as","className","name"],hR.propTypes={},hR.defaultProps={as:"i"},hR.create=Dr(hR,(function(e){return{name:e}}));const dR=hR;function fR(e){var n=e.className,r=Hn("divider",n),i=nr(fR,e),s=rr(fR,e);return t.createElement(s,o({},i,{className:r}))}fR.handledProps=["as","className"],fR.propTypes={};const pR=fR;var mR=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){Kn(t.props,"onClick",e,t.props)},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.children,s=e.className,a=e.content,c=e.disabled,l=e.description,u=e.flag,h=e.icon,d=e.image,f=e.label,p=e.selected,m=e.text,g=Hn(Jn(r,"active"),Jn(c,"disabled"),Jn(p,"selected"),"item",s),v=Pr(h)?function(e,n){return sr(t.Children.toArray(e),{type:n})}(i,"DropdownMenu")&&"dropdown":h,y=nr(n,this.props),w=rr(n,this.props),b={role:"option","aria-disabled":c,"aria-checked":r,"aria-selected":p};if(!ar(i))return t.createElement(w,o({},y,b,{className:g,onClick:this.handleClick}),i);var _=dR.create(u,{autoGenerateKey:!1}),E=Ki.create(v,{autoGenerateKey:!1}),I=oa.create(d,{autoGenerateKey:!1}),S=ua.create(f,{autoGenerateKey:!1}),T=Rr("span",(function(e){return{children:e}}),l,{defaultProps:{className:"description"},autoGenerateKey:!1}),k=Rr("span",(function(e){return{children:e}}),ar(a)?m:a,{defaultProps:{className:"text"},autoGenerateKey:!1});return t.createElement(w,o({},y,b,{className:g,onClick:this.handleClick}),I,E,_,S,T,k)},n}(t.Component);mR.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],mR.propTypes={},mR.create=Dr(mR,(function(e){return e}));const gR=mR;function vR(e){var n=e.children,r=e.className,i=e.content,s=e.icon,a=Hn("header",r),c=nr(vR,e),l=rr(vR,e);return ar(n)?t.createElement(l,o({},c,{className:a}),Ki.create(s,{autoGenerateKey:!1}),i):t.createElement(l,o({},c,{className:a}),n)}vR.handledProps=["as","children","className","content","icon"],vR.propTypes={},vR.create=Dr(vR,(function(e){return{content:e}}));const yR=vR;function wR(e){var n=e.children,r=e.className,i=e.content,s=e.direction,a=e.open,c=e.scrolling,l=Hn(s,Jn(a,"visible"),Jn(c,"scrolling"),"menu transition",r),u=nr(wR,e),h=rr(wR,e);return t.createElement(h,o({},u,{className:l}),ar(n)?i:n)}wR.handledProps=["as","children","className","content","direction","open","scrolling"],wR.propTypes={};const bR=wR;var _R=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=mn(e,"target.value");Kn(t.props,"onChange",e,o({},t.props,{value:n}))},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.autoComplete,i=e.className,s=e.tabIndex,a=e.type,c=e.value,l=Hn("search",i),u=nr(n,this.props);return t.createElement("input",o({},u,{"aria-autocomplete":"list",autoComplete:r,className:l,onChange:this.handleChange,tabIndex:s,type:a,value:c}))},n}(t.Component);_R.handledProps=["as","autoComplete","className","tabIndex","type","value"],_R.propTypes={},_R.defaultProps={autoComplete:"off",type:"text"},_R.create=Dr(_R,(function(e){return{type:e}}));const ER=_R;function IR(e){var n=e.children,r=e.className,i=e.content,s=Hn("divider",r),a=nr(IR,e),c=rr(IR,e);return t.createElement(c,o({"aria-atomic":!0,"aria-live":"polite",role:"alert"},a,{className:s}),ar(n)?i:n)}IR.handledProps=["as","children","className","content"],IR.propTypes={},IR.create=Dr(IR,(function(e){return{content:e}}));const SR=IR;var TR=/[\\^$.*+?()[\]{}|]/g,kR=RegExp(TR.source);const CR=function(e){return(e=hn(e))&&kR.test(e)?e.replace(TR,"\\$&"):e};const xR=function(e,t){var n=[];return Cn(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};const NR=function(e,t){return(Le(e)?Fe:xR)(e,Sn(t,3))};function AR(e){var n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,o=e.deburr,s=e.multiple,a=e.options,c=e.search,l=e.searchQuery,u=e.value,h=a;if(s&&(h=NR(h,(function(e){return!As(u,e.value)}))),c&&l)if(F(c))h=c(h,l);else{var d=o?Kr(l):l,f=new RegExp(CR(d),"i");h=NR(h,(function(e){return f.test(o?Kr(e.text):e.text)}))}if(i&&c&&l&&!sr(h,{text:l})){var p={key:"addition",text:[t.isValidElement(n)?t.cloneElement(n,{key:"addition-label"}):n||"",t.createElement("b",{key:"addition-query"},l)],value:l,className:"addition","data-additional":!0};"top"===r?h.unshift(p):h.push(p)}return h}function PR(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,o=e.deburr,s=e.multiple,a=e.options,c=e.search,l=e.searchQuery,u=e.selectedIndex,h=e.value,d=AR({value:h,options:a,searchQuery:l,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:o,multiple:s,search:c}),f=gs(d,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!u||u<0){var p=f[0];t=s?p:LP(d,["value",h])||f[0]}else if(s)t=MP(f,(function(e){return e>=u})),u>=d.length-1&&(t=f[f.length-1]);else{var m=LP(d,["value",h]);t=As(f,m)?m:void 0}return(!t||t<0)&&(t=f[0]),t}AR.handledProps=[];var RR=function(e,t){return Pr(e)?t:e},DR=function(e){return e?e.map((function(e){return uR(e,["key","value"])})):e};function OR(e){var n=e.flag,r=e.image,i=e.text;return F(i)?i:{content:t.createElement(t.Fragment,null,dR.create(n),oa.create(r),i)}}var LR=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).searchRef=(0,t.createRef)(),n.sizerRef=(0,t.createRef)(),n.ref=(0,t.createRef)(),n.handleChange=function(e,t){Kn(n.props,"onChange",e,o({},n.props,{value:t}))},n.closeOnChange=function(e){var t=n.props,r=t.closeOnChange,i=t.multiple;(cr(r)?!i:r)&&n.close(e,gr)},n.closeOnEscape=function(e){n.props.closeOnEscape&&ys().getCode(e)===ys().Escape&&(e.preventDefault(),n.close(e))},n.moveSelectionOnKeyDown=function(e){var t,r=n.props,i=r.multiple,o=r.selectOnNavigation;if(n.state.open){var s=((t={})[ys().ArrowDown]=1,t[ys().ArrowUp]=-1,t)[ys().getCode(e)];if(void 0!==s){e.preventDefault();var a=n.getSelectedIndexAfterMove(s);!i&&o&&n.makeSelectedItemActive(e,a),n.setState({selectedIndex:a})}}},n.openOnSpace=function(e){var t,r,i,o=n.state.focus&&!n.state.open&&ys().getCode(e)===ys().Spacebar,s="INPUT"!==(null==(t=e.target)?void 0:t.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);o&&(s&&e.preventDefault(),n.open(e))},n.openOnArrow=function(e){var t=n.state,r=t.focus,i=t.open;if(r&&!i){var o=ys().getCode(e);o!==ys().ArrowDown&&o!==ys().ArrowUp||(e.preventDefault(),n.open(e))}},n.makeSelectedItemActive=function(e,t){var r=n.state,i=r.open,s=r.value,a=n.props.multiple,c=n.getSelectedItem(t),l=mn(c,"value"),u=mn(c,"disabled");if(Pr(l)||!i||u)return s;var h=a?oR(s,[l]):l;return(a?!!iR(h,s).length:h!==s)&&(n.setState({value:h}),n.handleChange(e,h),c["data-additional"]&&Kn(n.props,"onAddItem",e,o({},n.props,{value:l}))),s},n.selectItemOnEnter=function(e){var t=n.props.search,r=n.state,i=r.open,o=r.selectedIndex;if(i&&(ys().getCode(e)===ys().Enter||!t&&ys().getCode(e)===ys().Spacebar)){e.preventDefault();var s=ZP(AR({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search}));if(!t||0!==s){var a=n.makeSelectedItemActive(e,o);n.setState({selectedIndex:PR({additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search,selectedIndex:o,value:a,options:n.props.options,searchQuery:""})}),n.closeOnChange(e),n.clearSearchQuery(),t&&Kn(n.searchRef.current,"focus")}}},n.removeItemOnBackspace=function(e){var t=n.props,r=t.multiple,i=t.search,o=n.state,s=o.searchQuery,a=o.value;if(ys().getCode(e)===ys().Backspace&&!s&&i&&r&&!Xi(a)){e.preventDefault();var c=FP(a);n.setState({value:c}),n.handleChange(e,c)}},n.closeOnDocumentClick=function(e){n.props.closeOnBlur&&(n.ref.current&&Ws(n.ref.current,e)||n.close())},n.handleMouseDown=function(e){n.isMouseDown=!0,Kn(n.props,"onMouseDown",e,n.props),document.addEventListener("mouseup",n.handleDocumentMouseUp)},n.handleDocumentMouseUp=function(){n.isMouseDown=!1,document.removeEventListener("mouseup",n.handleDocumentMouseUp)},n.handleClick=function(e){var t=n.props,r=t.minCharacters,i=t.search,o=n.state,s=o.open,a=o.searchQuery;if(Kn(n.props,"onClick",e,n.props),e.stopPropagation(),!i)return n.toggle(e);s?Kn(n.searchRef.current,"focus"):a.length>=r||1===r?n.open(e):Kn(n.searchRef.current,"focus")},n.handleIconClick=function(e){var t=n.props.clearable,r=n.hasValue();Kn(n.props,"onClick",e,n.props),e.stopPropagation(),t&&r?n.clearValue(e):n.toggle(e)},n.handleItemClick=function(e,t){var r=n.props,i=r.multiple,s=r.search,a=n.state.value,c=t.value;if(e.stopPropagation(),(i||t.disabled)&&e.nativeEvent.stopImmediatePropagation(),!t.disabled){var l=t["data-additional"],u=i?oR(n.state.value,[c]):c;(i?!!iR(u,a).length:u!==a)&&(n.setState({value:u}),n.handleChange(e,u)),n.clearSearchQuery(),Kn(s?n.searchRef.current:n.ref.current,"focus"),n.closeOnChange(e),l&&Kn(n.props,"onAddItem",e,o({},n.props,{value:c}))}},n.handleFocus=function(e){n.state.focus||(Kn(n.props,"onFocus",e,n.props),n.setState({focus:!0}))},n.handleBlur=function(e){var t=mn(e,"currentTarget");if(!t||!t.contains(document.activeElement)){var r=n.props,i=r.closeOnBlur,o=r.multiple,s=r.selectOnBlur;n.isMouseDown||(Kn(n.props,"onBlur",e,n.props),s&&!o&&(n.makeSelectedItemActive(e,n.state.selectedIndex),i&&n.close()),n.setState({focus:!1}),n.clearSearchQuery())}},n.handleSearchChange=function(e,t){var r=t.value;e.stopPropagation();var i=n.props.minCharacters,s=n.state.open,a=r;Kn(n.props,"onSearchChange",e,o({},n.props,{searchQuery:a})),n.setState({searchQuery:a,selectedIndex:0}),!s&&a.length>=i?n.open():s&&1!==i&&a.length<i&&n.close()},n.handleKeyDown=function(e){n.moveSelectionOnKeyDown(e),n.openOnArrow(e),n.openOnSpace(e),n.selectItemOnEnter(e),Kn(n.props,"onKeyDown",e)},n.getSelectedItem=function(e){var t=AR({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search});return mn(t,"["+e+"]")},n.getItemByValue=function(e){var t=n.props.options;return MP(t,{value:e})},n.getDropdownAriaOptions=function(){var e=n.props,t=e.loading,r=e.disabled,i=e.search,o=e.multiple,s={role:i?"combobox":"listbox","aria-busy":t,"aria-disabled":r,"aria-expanded":!!n.state.open};return"listbox"===s.role&&(s["aria-multiselectable"]=o),s},n.clearSearchQuery=function(){var e=n.state.searchQuery;void 0!==e&&""!==e&&n.setState({searchQuery:""})},n.handleLabelClick=function(e,t){e.stopPropagation(),n.setState({selectedLabel:t.value}),Kn(n.props,"onLabelClick",e,t)},n.handleLabelRemove=function(e,t){e.stopPropagation();var r=n.state.value,i=RP(r,t.value);n.setState({value:i}),n.handleChange(e,i)},n.getSelectedIndexAfterMove=function(e,t){void 0===t&&(t=n.state.selectedIndex);var r=AR({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search});if(void 0!==r&&!xP(r,"disabled")){var i=r.length-1,o=t+e;return!n.props.wrapSelection&&(o>i||o<0)?o=t:o>i?o=0:o<0&&(o=i),r[o].disabled?n.getSelectedIndexAfterMove(e,o):o}},n.handleIconOverrides=function(e){var t=n.props.clearable;return{className:Hn(t&&n.hasValue()&&"clear",e.className),onClick:function(t){Kn(e,"onClick",t,e),n.handleIconClick(t)}}},n.clearValue=function(e){var t=n.props.multiple?[]:"";n.setState({value:t}),n.handleChange(e,t)},n.computeSearchInputTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return Pr(r)?t?-1:0:r},n.computeSearchInputWidth=function(){var e=n.state.searchQuery;if(n.sizerRef.current&&e){n.sizerRef.current.style.display="inline",n.sizerRef.current.textContent=e;var t=Math.ceil(n.sizerRef.current.getBoundingClientRect().width);return n.sizerRef.current.style.removeProperty("display"),t}},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.search,i=e.tabIndex;if(!r)return t?-1:Pr(i)?0:i},n.handleSearchInputOverrides=function(e){return{onChange:function(t,r){Kn(e,"onChange",t,r),n.handleSearchChange(t,r)}}},n.hasValue=function(){var e=n.props.multiple,t=n.state.value;return e?!Xi(t):!Pr(t)&&""!==t},n.scrollSelectedItemIntoView=function(){if(n.ref.current){var e=n.ref.current.querySelector(".menu.visible");if(e){var t=e.querySelector(".item.selected");if(t){var r=t.offsetTop<e.scrollTop,i=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=t.offsetTop:i&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},n.setOpenDirection=function(){if(n.ref.current){var e=n.ref.current.querySelector(".menu.visible");if(e){var t=n.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-t.top-t.height-r,o=t.top-r,s=i<0&&o>i;!s!==!n.state.upward&&n.setState({upward:s})}}},n.open=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0);var r=n.props,i=r.disabled,o=r.search;i||(o&&Kn(n.searchRef.current,"focus"),Kn(n.props,"onOpen",e,n.props),t&&n.setState({open:!0}),n.scrollSelectedItemIntoView())},n.close=function(e,t){void 0===t&&(t=n.handleClose),n.state.open&&(Kn(n.props,"onClose",e,n.props),n.setState({open:!1},t))},n.handleClose=function(){var e=document.activeElement===n.searchRef.current;!e&&n.ref.current&&n.ref.current.blur();var t=document.activeElement===n.ref.current,r=e||t;n.setState({focus:r})},n.toggle=function(e){return n.state.open?n.close(e):n.open(e)},n.renderText=function(){var e,t=n.props,r=t.multiple,i=t.placeholder,o=t.search,s=t.text,a=n.state,c=a.searchQuery,l=a.selectedIndex,u=a.value,h=a.open,d=n.hasValue(),f=Hn(i&&!d&&"default","text",o&&c&&"filtered"),p=i;return s?p=s:h&&!r?e=n.getSelectedItem(l):d&&(e=n.getItemByValue(u)),SR.create(e?OR(e):p,{defaultProps:{className:f}})},n.renderSearchInput=function(){var e=n.props,r=e.search,i=e.searchInput,o=n.state.searchQuery;return r&&t.createElement(Gs,{innerRef:n.searchRef},ER.create(i,{defaultProps:{style:{width:n.computeSearchInputWidth()},tabIndex:n.computeSearchInputTabIndex(),value:o},overrideProps:n.handleSearchInputOverrides}))},n.renderSearchSizer=function(){var e=n.props,r=e.search,i=e.multiple;return r&&i&&t.createElement("span",{className:"sizer",ref:n.sizerRef})},n.renderLabels=function(){var e=n.props,t=e.multiple,r=e.renderLabel,i=n.state,o=i.selectedLabel,s=i.value;if(t&&!Xi(s)){var a=Nn(s,n.getItemByValue);return Nn(TP(a),(function(e,t){var i={active:e.value===o,as:"a",key:RR(e.key,e.value),onClick:n.handleLabelClick,onRemove:n.handleLabelRemove,value:e.value};return ua.create(r(e,t,i),{defaultProps:i})}))}},n.renderOptions=function(){var e=n.props,r=e.lazyLoad,i=e.multiple,s=e.search,a=e.noResultsMessage,c=n.state,l=c.open,u=c.selectedIndex,h=c.value;if(r&&!l)return null;var d=AR({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search});if(null!==a&&s&&Xi(d))return t.createElement("div",{className:"message"},a);var f=i?function(e){return As(h,e)}:function(e){return e===h};return Nn(d,(function(e,t){return gR.create(o({active:f(e.value),selected:u===t},e,{key:RR(e.key,e.value),style:o({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(t,r){null==e.onClick||e.onClick(t,r),n.handleItemClick(t,r)}}}})}))},n.renderMenu=function(){var e=n.props,r=e.children,i=e.direction,s=e.header,a=n.state.open,c=n.getDropdownMenuAriaOptions();if(!ar(r)){var l=t.Children.only(r),u=Hn(i,Jn(a,"visible"),l.props.className);return(0,t.cloneElement)(l,o({className:u},c))}return t.createElement(bR,o({},c,{direction:i,open:a}),yR.create(s,{autoGenerateKey:!1}),n.renderOptions())},n}a(n,e);var r=n.prototype;return r.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},n.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!bs()(n.__value,t.value)||!sR(DR(e.options),DR(n.__options)))&&(r.selectedIndex=PR({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},r.componentDidMount=function(){this.state.open&&this.open(null,!1)},r.shouldComponentUpdate=function(e,t){return!bs()(e,this.props)||!bs()(t,this.state)},r.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,o=n.openOnFocus,s=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var a=!s||s&&1===i&&!this.state.open;o&&a&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},r.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},r.render=function(){var e=this.props,r=e.basic,i=e.button,s=e.className,a=e.compact,c=e.disabled,l=e.error,u=e.fluid,h=e.floating,d=e.icon,f=e.inline,p=e.item,m=e.labeled,g=e.loading,v=e.multiple,y=e.pointing,w=e.search,b=e.selection,_=e.scrolling,E=e.simple,I=e.trigger,S=this.state,T=S.focus,k=S.open,C=S.upward,x=Hn("ui",Jn(k,"active visible"),Jn(c,"disabled"),Jn(l,"error"),Jn(g,"loading"),Jn(r,"basic"),Jn(i,"button"),Jn(a,"compact"),Jn(u,"fluid"),Jn(h,"floating"),Jn(f,"inline"),Jn(m,"labeled"),Jn(p,"item"),Jn(v,"multiple"),Jn(w,"search"),Jn(b,"selection"),Jn(E,"simple"),Jn(_,"scrolling"),Jn(C,"upward"),$n(y,"pointing"),"dropdown",s),N=nr(n,this.props),A=rr(n,this.props),P=this.getDropdownAriaOptions(A,this.props);return t.createElement(Gs,{innerRef:this.ref},t.createElement(A,o({},N,P,{className:x,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),I||this.renderText(),Ki.create(d,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),k&&t.createElement(Es(),{name:"keydown",on:this.closeOnEscape}),k&&t.createElement(Es(),{name:"click",on:this.closeOnDocumentClick}),T&&t.createElement(Es(),{name:"keydown",on:this.removeItemOnBackspace})))},n}(lr);function MR(e){var n=e.control,r=nr(MR,e),i=rr(MR,e);return t.createElement(i,o({},r,{control:n}))}LR.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],LR.propTypes={},LR.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:OR,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},LR.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],LR.Divider=pR,LR.Header=yR,LR.Item=gR,LR.Menu=bR,LR.SearchInput=ER,LR.Text=SR,MR.handledProps=["as","control"],MR.propTypes={},MR.defaultProps={as:bP,control:LR};const FR=MR;function UR(e){var n=e.children,r=e.className,i=e.grouped,s=e.inline,a=e.unstackable,c=e.widths,l=Hn(Jn(i,"grouped"),Jn(s,"inline"),Jn(a,"unstackable"),tr(c,null,!0),"fields",r),u=nr(UR,e),h=rr(UR,e);return t.createElement(h,o({},u,{className:l}),n)}UR.handledProps=["as","children","className","grouped","inline","unstackable","widths"],UR.propTypes={};const jR=UR;function VR(e){var n=e.control,r=nr(VR,e),i=rr(VR,e);return t.createElement(i,o({},r,{control:n}))}VR.handledProps=["as","control"],VR.propTypes={},VR.defaultProps={as:bP,control:ba};const zR=VR;function BR(e){var n=e.control,r=nr(BR,e),i=rr(BR,e);return t.createElement(i,o({},r,{control:n}))}BR.handledProps=["as","control"],BR.propTypes={},BR.defaultProps={as:bP,control:yP};const qR=BR;function KR(e){return t.createElement(LR,o({},e,{selection:!0}))}KR.handledProps=["options"],KR.propTypes={},KR.Divider=LR.Divider,KR.Header=LR.Header,KR.Item=LR.Item,KR.Menu=LR.Menu;const GR=KR;function HR(e){var n=e.control,r=e.options,i=nr(HR,e),s=rr(HR,e);return t.createElement(s,o({},i,{control:n,options:r}))}HR.handledProps=["as","control","options"],HR.propTypes={},HR.defaultProps={as:bP,control:GR};const WR=HR;var QR=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).ref=(0,t.createRef)(),n.focus=function(){return n.ref.current.focus()},n.handleChange=function(e){var t=mn(e,"target.value");Kn(n.props,"onChange",e,o({},n.props,{value:t}))},n.handleInput=function(e){var t=mn(e,"target.value");Kn(n.props,"onInput",e,o({},n.props,{value:t}))},n}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.rows,i=e.value,s=nr(n,this.props),a=rr(n,this.props);return t.createElement(Gs,{innerRef:this.ref},t.createElement(a,o({},s,{onChange:this.handleChange,onInput:this.handleInput,rows:r,value:i})))},n}(t.Component);QR.handledProps=["as","onChange","onInput","rows","value"],QR.propTypes={},QR.defaultProps={as:"textarea",rows:3};const JR=QR;function YR(e){var n=e.control,r=nr(YR,e),i=rr(YR,e);return t.createElement(i,o({},r,{control:n}))}YR.handledProps=["as","control"],YR.propTypes={},YR.defaultProps={as:bP,control:JR};const $R=YR;var XR=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&Kn(e,"preventDefault");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Kn.apply(void 0,[t.props,"onSubmit",e,t.props].concat(r))},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.action,i=e.children,s=e.className,a=e.error,c=e.inverted,l=e.loading,u=e.reply,h=e.size,d=e.success,f=e.unstackable,p=e.warning,m=e.widths,g=Hn("ui",h,Jn(a,"error"),Jn(c,"inverted"),Jn(l,"loading"),Jn(u,"reply"),Jn(d,"success"),Jn(f,"unstackable"),Jn(p,"warning"),tr(m,null,!0),"form",s),v=nr(n,this.props),y=rr(n,this.props);return t.createElement(y,o({},v,{action:r,className:g,onSubmit:this.handleSubmit}),i)},n}(t.Component);XR.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],XR.propTypes={},XR.defaultProps={as:"form"},XR.Field=bP,XR.Button=EP,XR.Checkbox=SP,XR.Dropdown=FR,XR.Group=jR,XR.Input=zR,XR.Radio=qR,XR.Select=WR,XR.TextArea=$R;const ZR=XR;function eD(e){var n=e.children,r=e.className,i=e.content,s=Hn("content",r),a=nr(eD,e),c=rr(eD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}eD.handledProps=["as","children","className","content"],eD.propTypes={};const tD=eD;function nD(e){var n=e.children,r=e.className,i=e.content,s=Hn("header",r),a=nr(nD,e),c=rr(nD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}nD.handledProps=["as","children","className","content"],nD.propTypes={},nD.create=Dr(nD,(function(e){return{content:e}}));const rD=nD;function iD(e){var n=e.children,r=e.className,i=e.content,s=Hn("content",r),a=nr(iD,e),c=rr(iD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}iD.handledProps=["as","children","className","content"],iD.propTypes={},iD.defaultProps={as:"li"},iD.create=Dr(iD,(function(e){return{content:e}}));const oD=iD;function sD(e){var n=e.children,r=e.className,i=e.items,s=Hn("list",r),a=nr(sD,e),c=rr(sD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?Nn(i,oD.create):n)}sD.handledProps=["as","children","className","items"],sD.propTypes={},sD.defaultProps={as:"ul"},sD.create=Dr(sD,(function(e){return{items:e}}));const aD=sD;var cD=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.attached,i=e.children,s=e.className,a=e.color,c=e.compact,l=e.content,u=e.error,h=e.floating,d=e.header,f=e.hidden,p=e.icon,m=e.info,g=e.list,v=e.negative,y=e.onDismiss,w=e.positive,b=e.size,_=e.success,E=e.visible,I=e.warning,S=Hn("ui",a,b,Jn(c,"compact"),Jn(u,"error"),Jn(h,"floating"),Jn(f,"hidden"),Jn(p,"icon"),Jn(m,"info"),Jn(v,"negative"),Jn(w,"positive"),Jn(_,"success"),Jn(E,"visible"),Jn(I,"warning"),$n(r,"attached"),"message",s),T=y&&t.createElement(Ki,{name:"close",onClick:this.handleDismiss}),k=nr(n,this.props),C=rr(n,this.props);return ar(i)?t.createElement(C,o({},k,{className:S}),T,Ki.create(p,{autoGenerateKey:!1}),(!Pr(d)||!Pr(l)||!Pr(g))&&t.createElement(tD,null,rD.create(d,{autoGenerateKey:!1}),aD.create(g,{autoGenerateKey:!1}),Fr(l,{autoGenerateKey:!1}))):t.createElement(C,o({},k,{className:S}),T,i)},n}(t.Component);cD.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],cD.propTypes={},cD.Content=tD,cD.Header=rD,cD.List=aD,cD.Item=oD;const lD=function(){const e=Tc(),[n,r]=(0,t.useState)("register"),[i,o]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[c,l]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1);return(0,aP.jsxs)(uP,{children:[(0,aP.jsxs)(Ji,{widths:"2",children:[(0,aP.jsx)(Ji.Item,{active:"register"===n,onClick:()=>{l(""),r("register")},children:"\u8a3b\u518a"}),(0,aP.jsx)(Ji.Item,{active:"signin"===n,onClick:()=>{l(""),r("signin")},children:"\u767b\u5165"})]}),(0,aP.jsxs)(ZR,{onSubmit:function(){h(!0),"register"===n?sP.auth().createUserWithEmailAndPassword(i,s).then((()=>{e("/posts"),h(!1)})).catch((e=>{switch(e.code){case"auth/email-already-in-use":l("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":l("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":l("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3")}h(!1)})):"signin"===n&&sP.auth().signInWithEmailAndPassword(i,s).then((()=>{e("/posts"),h(!1)})).catch((e=>{switch(e.code){case"auth/user-not-found":l("\u4fe1\u7bb1\u4e0d\u5b58\u5728");break;case"auth/invalid-email":l("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/wrong-password":l("\u5bc6\u78bc\u932f\u8aa4")}h(!1)}))},children:[(0,aP.jsx)(ZR.Input,{label:"\u4fe1\u7bb1",value:i,placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1",onChange:e=>o(e.target.value)}),(0,aP.jsx)(ZR.Input,{label:"\u5bc6\u78bc",value:s,placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",onChange:e=>a(e.target.value),type:"password"}),c&&(0,aP.jsx)(cD,{negative:!0,children:c}),(0,aP.jsxs)(ZR.Button,{loading:u,children:["register"===n&&"\u8a3b\u518a","signin"===n&&"\u767b\u5165"]})]})]})};function uD(e){var n=e.children,r=e.className,i=e.content,s=Hn("header",r),a=nr(uD,e),c=rr(uD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}uD.handledProps=["as","children","className","content"],uD.propTypes={},uD.create=Dr(uD,(function(e){return{content:e}}));const hD=uD;function dD(e){var n=e.children,r=e.className,i=e.content,s=Hn("description",r),a=nr(dD,e),c=rr(dD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}dD.handledProps=["as","children","className","content"],dD.propTypes={},dD.create=Dr(dD,(function(e){return{content:e}}));const fD=dD;function pD(e){var n=e.children,r=e.className,i=e.content,s=Hn("extra",r),a=nr(pD,e),c=rr(pD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}pD.handledProps=["as","children","className","content"],pD.propTypes={},pD.create=Dr(pD,(function(e){return{content:e}}));const mD=pD;function gD(e){var n=e.children,r=e.className,i=e.content,s=Hn("meta",r),a=nr(gD,e),c=rr(gD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}gD.handledProps=["as","children","className","content"],gD.propTypes={},gD.create=Dr(gD,(function(e){return{content:e}}));const vD=gD;function yD(e){var n=e.children,r=e.className,i=e.content,s=e.description,a=e.extra,c=e.header,l=e.meta,u=e.verticalAlign,h=Hn(er(u),"content",r),d=nr(yD,e),f=rr(yD,e);return ar(n)?t.createElement(f,o({},d,{className:h}),hD.create(c,{autoGenerateKey:!1}),vD.create(l,{autoGenerateKey:!1}),fD.create(s,{autoGenerateKey:!1}),mD.create(a,{autoGenerateKey:!1}),i):t.createElement(f,o({},d,{className:h}),n)}yD.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],yD.propTypes={};const wD=yD;function bD(e){var n=e.children,r=e.className,i=e.content,s=e.divided,a=e.items,c=e.link,l=e.relaxed,u=e.unstackable,h=Hn("ui",Jn(s,"divided"),Jn(c,"link"),Jn(u,"unstackable"),$n(l,"relaxed"),"items",r),d=nr(bD,e),f=rr(bD,e);if(!ar(n))return t.createElement(f,o({},d,{className:h}),n);if(!ar(i))return t.createElement(f,o({},d,{className:h}),i);var p=Nn(a,(function(e){var n=e.childKey,r=Yi(e,["childKey"]),i=null!=n?n:[r.content,r.description,r.header,r.meta].join("-");return t.createElement(TD,o({},r,{key:i}))}));return t.createElement(f,o({},d,{className:h}),p)}bD.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],bD.propTypes={};const _D=bD;function ED(e){var n=e.size,r=nr(ED,e);return t.createElement(oa,o({},r,{size:n,ui:!!n,wrapped:!0}))}ED.handledProps=["size"],ED.propTypes={},ED.create=Dr(ED,(function(e){return{src:e}}));const ID=ED;function SD(e){var n=e.children,r=e.className,i=e.content,s=e.description,a=e.extra,c=e.header,l=e.image,u=e.meta,h=Hn("item",r),d=nr(SD,e),f=rr(SD,e);return ar(n)?t.createElement(f,o({},d,{className:h}),ID.create(l,{autoGenerateKey:!1}),t.createElement(wD,{content:i,description:s,extra:a,header:c,meta:u})):t.createElement(f,o({},d,{className:h}),n)}SD.handledProps=["as","children","className","content","description","extra","header","image","meta"],SD.Content=wD,SD.Description=fD,SD.Extra=mD,SD.Group=_D,SD.Header=hD,SD.Image=ID,SD.Meta=vD,SD.propTypes={};const TD=SD;function kD(e){var t;let{post:n}=e;return(0,aP.jsxs)(TD,{as:Zc,to:"/posts/".concat(n.id),children:[(0,aP.jsx)(TD.Image,{src:n.imageUrl||"https://react.semantic-ui.com/images/wireframe/image.png"}),(0,aP.jsxs)(TD.Content,{children:[(0,aP.jsxs)(TD.Meta,{children:[n.author.photoURL?(0,aP.jsx)(oa,{src:n.author.photoURL,avatar:!0}):(0,aP.jsx)(Ki,{name:"user circle"})," ",n.topic," ",n.author.displayName||"\u4f7f\u7528\u8005"]}),(0,aP.jsx)(TD.Header,{children:n.title}),(0,aP.jsx)(TD.Description,{children:n.content}),(0,aP.jsxs)(TD.Extra,{children:["\u7559\u8a00 ",n.commentsCount||0," \u8b9a ",(null===(t=n.likedBy)||void 0===t?void 0:t.length)||0]})]})]})}var CD=!("undefined"===typeof window||!window.document||!window.document.createElement);var xD=void 0;function ND(){return void 0===xD&&(xD=function(){if(!CD)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t)}catch(yL){}return e}()),xD}function AD(e){e.handlers===e.nextHandlers&&(e.nextHandlers=e.handlers.slice())}function PD(e){this.target=e,this.events={}}PD.prototype.getEventHandlers=function(e,t){var n,r=String(e)+" "+String((n=t)?!0===n?100:(0|n.capture)+(n.passive<<1)+(n.once<<2):0);return this.events[r]||(this.events[r]={handlers:[],handleEvent:void 0},this.events[r].nextHandlers=this.events[r].handlers),this.events[r]},PD.prototype.handleEvent=function(e,t,n){var r=this.getEventHandlers(e,t);r.handlers=r.nextHandlers,r.handlers.forEach((function(e){e&&e(n)}))},PD.prototype.add=function(e,t,n){var r=this,i=this.getEventHandlers(e,n);AD(i),0===i.nextHandlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.nextHandlers.push(t);var o=!0;return function(){if(o){o=!1,AD(i);var s=i.nextHandlers.indexOf(t);i.nextHandlers.splice(s,1),0===i.nextHandlers.length&&(r.target&&r.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}};var RD="__consolidated_events_handlers__";function DD(e,t,n,r){e[RD]||(e[RD]=new PD(e));var i=function(e){if(e)return ND()?e:!!e.capture}(r);return e[RD].add(t,n,i)}var OD=n(86);function LD(e,t){var n,r=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"===typeof r)return r;var i=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}(e);return"number"===typeof i?i*t:void 0}var MD="above",FD="inside",UD="below",jD="invisible";function VD(e){return"string"===typeof e.type}var zD;var BD=[];function qD(e){BD.push(e),zD||(zD=setTimeout((function(){var e;for(zD=null;e=BD.shift();)e()}),0));var t=!0;return function(){if(t){t=!1;var n=BD.indexOf(e);-1!==n&&(BD.splice(n,1),!BD.length&&zD&&(clearTimeout(zD),zD=null))}}}var KD="undefined"!==typeof window,GD={debug:!1,scrollableAncestor:void 0,children:void 0,topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},HD=function(e){function r(t){var n;return(n=e.call(this,t)||this).refElement=function(e){n._ref=e},n}a(r,e);var i=r.prototype;return i.componentDidMount=function(){var e=this;KD&&(this.cancelOnNextTick=qD((function(){e.cancelOnNextTick=null;var t=e.props,n=t.children;t.debug;!function(e,t){if(e&&!VD(e)&&!t)throw new Error("<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.")}(n,e._ref),e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=DD(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=DD(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)})))},i.componentDidUpdate=function(){var e=this;KD&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=qD((function(){e.cancelOnNextTick=null,e._handleScroll(null)}))))},i.componentWillUnmount=function(){KD&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())},i._findScrollableAncestor=function(){var e=this.props,t=e.horizontal,r=e.scrollableAncestor;if(r)return function(e){return"window"===e?n.g.window:e}(r);for(var i=this._ref;i.parentNode;){if((i=i.parentNode)===document.body)return window;var o=window.getComputedStyle(i),s=(t?o.getPropertyValue("overflow-x"):o.getPropertyValue("overflow-y"))||o.getPropertyValue("overflow");if("auto"===s||"scroll"===s||"overlay"===s)return i}return window},i._handleScroll=function(e){if(this._ref){var t=this._getBounds(),n=function(e){return e.viewportBottom-e.viewportTop===0?jD:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom||e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom||e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?FD:e.viewportBottom<e.waypointTop?UD:e.waypointTop<e.viewportTop?MD:jD}(t),r=this._previousPosition,i=this.props,o=(i.debug,i.onPositionChange),s=i.onEnter,a=i.onLeave,c=i.fireOnRapidScroll;if(this._previousPosition=n,r!==n){var l={currentPosition:n,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};o.call(this,l),n===FD?s.call(this,l):r===FD&&a.call(this,l),c&&(r===UD&&n===MD||r===MD&&n===UD)&&(s.call(this,{currentPosition:FD,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),a.call(this,{currentPosition:n,previousPosition:FD,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}},i._getBounds=function(){var e,t,n=this.props,r=n.horizontal,i=(n.debug,this._ref.getBoundingClientRect()),o=i.left,s=i.top,a=i.right,c=i.bottom,l=r?o:s,u=r?a:c;this.scrollableAncestor===window?(e=r?window.innerWidth:window.innerHeight,t=0):(e=r?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,t=r?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var h=this.props,d=h.bottomOffset;return{waypointTop:l,waypointBottom:u,viewportTop:t+LD(h.topOffset,e),viewportBottom:t+e-LD(d,e)}},i.render=function(){var e=this,n=this.props.children;if(!n)return t.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(VD(n)||(0,OD.isForwardRef)(n)){return t.cloneElement(n,{ref:function(t){e.refElement(t),n.ref&&("function"===typeof n.ref?n.ref(t):n.ref.current=t)}})}return t.cloneElement(n,{innerRef:this.refElement})},r}(t.PureComponent);HD.above=MD,HD.below=UD,HD.inside=FD,HD.invisible=jD,HD.defaultProps=GD,HD.displayName="Waypoint";const WD=function(){const e=Ic(),n=new URLSearchParams(e.search).get("topic"),[r,i]=(0,t.useState)([]),o=(0,t.useRef)();return(0,t.useEffect)((()=>{n?sP.firestore().collection("posts").where("topic","==",n).orderBy("createdAt","desc").limit(5).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));o.current=e.docs[e.docs.length-1],i(t)})):sP.firestore().collection("posts").orderBy("createdAt","desc").limit(5).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));o.current=e.docs[e.docs.length-1],i(t)}))}),[n]),(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsx)(TD.Group,{children:r.map((e=>(0,aP.jsx)(kD,{post:e},e.id)))}),(0,aP.jsx)(HD,{onEnter:()=>{o.current&&(n?sP.firestore().collection("posts").where("topic","==",n).orderBy("createdAt","desc").startAfter(o.current).limit(5).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));o.current=e.docs[e.docs.length-1],i([...r,...t])})):sP.firestore().collection("posts").orderBy("createdAt","desc").startAfter(o.current).limit(5).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));o.current=e.docs[e.docs.length-1],i([...r,...t])})))}})]})};function QD(e){var n=e.children,r=e.className,i=e.content,s=Hn("sub header",r),a=nr(QD,e),c=rr(QD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}QD.handledProps=["as","children","className","content"],QD.propTypes={},QD.create=Dr(QD,(function(e){return{content:e}}));const JD=QD;function YD(e){var n=e.children,r=e.className,i=e.content,s=Hn("content",r),a=nr(YD,e),c=rr(YD,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}YD.handledProps=["as","children","className","content"],YD.propTypes={};const $D=YD;function XD(e){var n=e.attached,r=e.block,i=e.children,s=e.className,a=e.color,c=e.content,l=e.disabled,u=e.dividing,h=e.floated,d=e.icon,f=e.image,p=e.inverted,m=e.size,g=e.sub,v=e.subheader,y=e.textAlign,w=Hn("ui",a,m,Jn(r,"block"),Jn(l,"disabled"),Jn(u,"dividing"),Yn(h,"floated"),Jn(!0===d,"icon"),Jn(!0===f,"image"),Jn(p,"inverted"),Jn(g,"sub"),$n(n,"attached"),Zn(y),"header",s),b=nr(XD,e),_=rr(XD,e);if(!ar(i))return t.createElement(_,o({},b,{className:w}),i);var E=Ki.create(d,{autoGenerateKey:!1}),I=oa.create(f,{autoGenerateKey:!1}),S=JD.create(v,{autoGenerateKey:!1});return E||I?t.createElement(_,o({},b,{className:w}),E||I,(c||S)&&t.createElement($D,null,c,S)):t.createElement(_,o({},b,{className:w}),c,S)}XD.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],XD.propTypes={},XD.Content=$D,XD.Subheader=JD;const ZD=XD;const eO=function(){const e=Tc(),[n,r]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[s,a]=(0,t.useState)([]),[c,l]=(0,t.useState)(""),[u,h]=(0,t.useState)(null),[d,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{sP.firestore().collection("topics").get().then((e=>{const t=e.docs.map((e=>e.data()));a(t)}))}),[]);const p=s.map((e=>({text:e.name,value:e.name}))),m=u?URL.createObjectURL(u):"https://react.semantic-ui.com/images/wireframe/image.png";function g(t,r){t.set({title:n,content:i,topic:c,createdAt:sP.firestore.Timestamp.now(),author:{displayName:sP.auth().currentUser.displayName||"",photoURL:sP.auth().currentUser.photoURL||"",uid:sP.auth().currentUser.uid,email:sP.auth().currentUser.email},imageUrl:r||""}).then((()=>{f(!1),e("/posts")})).catch((e=>{console.error("Error saving post: ",e),f(!1)}))}return(0,aP.jsxs)(uP,{children:[(0,aP.jsx)(ZD,{children:"\u767c\u8868\u6587\u7ae0"}),(0,aP.jsxs)(ZR,{onSubmit:function(){f(!0);const e=sP.firestore().collection("posts").doc();if(!u)return void g(e,null);const t=sP.storage().ref("post-images/"+e.id),n={contentType:u.type};t.put(u,n).then((()=>t.getDownloadURL())).then((t=>{g(e,t)})).catch((e=>{console.error("Error uploading image: ",e),f(!1)}))},children:[(0,aP.jsx)(oa,{src:m,size:"small",floated:"left"}),(0,aP.jsx)(ya,{basic:!0,as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3\u6587\u7ae0\u5716\u7247"}),(0,aP.jsx)(ZR.Input,{type:"file",id:"post-image",style:{display:"none"},onChange:e=>h(e.target.files[0])}),(0,aP.jsx)(ZR.Input,{placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",value:n,onChange:e=>r(e.target.value)}),(0,aP.jsx)(ZR.TextArea,{placeholder:"\u8f38\u5165\u6587\u7ae0\u5167\u5bb9",value:i,onChange:e=>o(e.target.value)}),(0,aP.jsx)(ZR.Dropdown,{placeholder:"\u9078\u64c7\u6587\u7ae0\u4e3b\u984c",options:p,selection:!0,value:c,onChange:(e,t)=>{let{value:n}=t;return l(n)}}),(0,aP.jsx)(ZR.Button,{loading:d,children:"\u9001\u51fa"})]})]})};function tO(e){var n=e.children,r=e.className,i=e.compact,s=e.content,a=e.horizontal,c=e.piled,l=e.raised,u=e.size,h=e.stacked,d=Hn("ui",u,Jn(i,"compact"),Jn(a,"horizontal"),Jn(c,"piled"),Jn(l,"raised"),Jn(h,"stacked"),"segments",r),f=nr(tO,e),p=rr(tO,e);return t.createElement(p,o({},f,{className:d}),ar(n)?s:n)}tO.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],tO.propTypes={};const nO=tO;function rO(e){var n=e.children,r=e.className,i=e.content,s=Hn("inline",r),a=nr(rO,e),c=rr(rO,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}rO.handledProps=["as","children","className","content"],rO.propTypes={};const iO=rO;function oO(e){var n=e.attached,r=e.basic,i=e.children,s=e.circular,a=e.className,c=e.clearing,l=e.color,u=e.compact,h=e.content,d=e.disabled,f=e.floated,p=e.inverted,m=e.loading,g=e.placeholder,v=e.padded,y=e.piled,w=e.raised,b=e.secondary,_=e.size,E=e.stacked,I=e.tertiary,S=e.textAlign,T=e.vertical,k=Hn("ui",l,_,Jn(r,"basic"),Jn(s,"circular"),Jn(c,"clearing"),Jn(u,"compact"),Jn(d,"disabled"),Jn(p,"inverted"),Jn(m,"loading"),Jn(g,"placeholder"),Jn(y,"piled"),Jn(w,"raised"),Jn(b,"secondary"),Jn(E,"stacked"),Jn(I,"tertiary"),Jn(T,"vertical"),$n(n,"attached"),$n(v,"padded"),Zn(S),Yn(f,"floated"),"segment",a),C=nr(oO,e),x=rr(oO,e);return t.createElement(x,o({},C,{className:k}),ar(i)?h:i)}oO.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],oO.Group=nO,oO.Inline=iO,oO.propTypes={};const sO=oO;function aO(e){var n=e.active,r=e.className,i=e.children,s=e.content,a=Hn(Jn(n,"active"),r),c=nr(aO,e),l=rr(aO,e);return t.createElement(l,o({},c,{className:a}),ar(i)?s:i)}aO.handledProps=["active","as","children","className","content"],aO.defaultProps={as:"a"},aO.propTypes={};const cO=aO;function lO(e){var n=e.className,r=e.children,i=e.content,s=Hn("actions",n),a=nr(lO,e),c=rr(lO,e);return t.createElement(c,o({},a,{className:s}),ar(r)?i:r)}lO.handledProps=["as","children","className","content"],lO.propTypes={};const uO=lO;function hO(e){var n=e.className,r=e.children,i=e.content,s=Hn("author",n),a=nr(hO,e),c=rr(hO,e);return t.createElement(c,o({},a,{className:s}),ar(r)?i:r)}hO.handledProps=["as","children","className","content"],hO.propTypes={};const dO=hO;function fO(e){var n=e.className,r=e.src,i=Hn("avatar",n),s=nr(fO,e),a=Ms(s,{htmlProps:Ls}),c=a[0],l=a[1],u=rr(fO,e);return t.createElement(u,o({},l,{className:i}),Or(r,{autoGenerateKey:!1,defaultProps:c}))}fO.handledProps=["as","className","src"],fO.propTypes={};const pO=fO;function mO(e){var n=e.className,r=e.children,i=e.content,s=Hn(n,"content"),a=nr(mO,e),c=rr(mO,e);return t.createElement(c,o({},a,{className:s}),ar(r)?i:r)}mO.handledProps=["as","children","className","content"],mO.propTypes={};const gO=mO;function vO(e){var n=e.className,r=e.children,i=e.collapsed,s=e.content,a=e.minimal,c=e.size,l=e.threaded,u=Hn("ui",c,Jn(i,"collapsed"),Jn(a,"minimal"),Jn(l,"threaded"),"comments",n),h=nr(vO,e),d=rr(vO,e);return t.createElement(d,o({},h,{className:u}),ar(r)?s:r)}vO.handledProps=["as","children","className","collapsed","content","minimal","size","threaded"],vO.propTypes={};const yO=vO;function wO(e){var n=e.className,r=e.children,i=e.content,s=Hn("metadata",n),a=nr(wO,e),c=rr(wO,e);return t.createElement(c,o({},a,{className:s}),ar(r)?i:r)}wO.handledProps=["as","children","className","content"],wO.propTypes={};const bO=wO;function _O(e){var n=e.className,r=e.children,i=e.content,s=Hn(n,"text"),a=nr(_O,e),c=rr(_O,e);return t.createElement(c,o({},a,{className:s}),ar(r)?i:r)}_O.handledProps=["as","children","className","content"],_O.propTypes={};const EO=_O;function IO(e){var n=e.className,r=e.children,i=e.collapsed,s=e.content,a=Hn(Jn(i,"collapsed"),"comment",n),c=nr(IO,e),l=rr(IO,e);return t.createElement(l,o({},c,{className:a}),ar(r)?s:r)}IO.handledProps=["as","children","className","collapsed","content"],IO.propTypes={},IO.Author=dO,IO.Action=cO,IO.Actions=uO,IO.Avatar=pO,IO.Content=gO,IO.Group=yO,IO.Metadata=bO,IO.Text=EO;const SO=IO;function TO(){var e,n,r,i;const{postId:o}=function(){let{matches:e}=t.useContext(bc),n=e[e.length-1];return n?n.params:{}}(),[s,a]=(0,t.useState)({author:{}}),[c,l]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),[d,f]=(0,t.useState)([]);function p(e,t){const n=sP.auth().currentUser.uid;sP.firestore().collection("posts").doc(o).update({[t]:e?sP.firestore.FieldValue.arrayRemove(n):sP.firestore.FieldValue.arrayUnion(n)})}(0,t.useEffect)((()=>{sP.firestore().collection("posts").doc(o).onSnapshot((e=>{const t=e.data();a(t)}))}),[]),(0,t.useEffect)((()=>{sP.firestore().collection("posts").doc(o).collection("comments").orderBy("createdAt","desc").onSnapshot((e=>{const t=e.docs.map((e=>e.data()));f(t)}))}),[]);const m=null===(e=s.collectedBy)||void 0===e?void 0:e.includes(sP.auth().currentUser.uid),g=null===(n=s.likedBy)||void 0===n?void 0:n.includes(sP.auth().currentUser.uid);return(0,aP.jsxs)(aP.Fragment,{children:[s.author.photoURL?(0,aP.jsx)(oa,{src:s.author.photoURL,avatar:!0}):(0,aP.jsx)(Ki,{name:"user circle"}),s.author.displayName||"\u4f7f\u7528\u8005",(0,aP.jsxs)(ZD,{children:[s.title,(0,aP.jsxs)(ZD.Subheader,{children:[s.topic,".",null===(r=s.createdAt)||void 0===r?void 0:r.toDate().toLocaleDateString()]})]}),(0,aP.jsx)(oa,{src:s.imageUrl}),(0,aP.jsx)(sO,{basic:!0,vertical:!0,children:s.content}),(0,aP.jsxs)(sO,{basic:!0,vertical:!0,children:["\u7559\u8a00 ",s.commentsCount||0,"\uff0e\u8b9a ",(null===(i=s.likedBy)||void 0===i?void 0:i.length)||0,"\uff0e",(0,aP.jsx)(Ki,{name:"thumbs up".concat(g?"":" outline"),color:g?"yellow":"grey",link:!0,onClick:()=>p(g,"likedBy")}),"\uff0e",(0,aP.jsx)(Ki,{name:"bookmark".concat(m?"":" outline"," "),color:m?"blue":"grey",link:!0,onClick:()=>p(m,"collectedBy")})]}),(0,aP.jsxs)(SO.Group,{children:[(0,aP.jsxs)(ZR,{reply:!0,children:[(0,aP.jsx)(ZR.TextArea,{value:c,onChange:e=>l(e.target.value)}),(0,aP.jsx)(ZR.Button,{onClick:function(){h(!0);const e=sP.firestore(),t=e.batch(),n=e.collection("posts").doc(o);t.update(n,{commentsCount:sP.firestore.FieldValue.increment(1)});const r=n.collection("comments").doc();t.set(r,{content:c,createdAt:sP.firestore.Timestamp.now(),author:{uid:sP.auth().currentUser.uid,displayName:sP.auth().currentUser.displayName||"",photoURL:sP.auth().currentUser.photoURL||""}}),t.commit().then((()=>{l(""),h(!1)}))},loading:u,children:"\u7559\u8a00"})]}),(0,aP.jsxs)(ZD,{children:["\u5171 ",s.commentsCount||0," \u5247\u7559\u8a00"]}),d.map((e=>(0,aP.jsxs)(SO,{children:[(0,aP.jsx)(SO.Avatar,{src:e.author.photoURL}),(0,aP.jsxs)(SO.Content,{children:[(0,aP.jsx)(SO.Author,{as:"span",children:e.author.displayName||"\u4f7f\u7528\u8005"}),(0,aP.jsx)(SO.Metadata,{children:e.createdAt.toDate().toLocaleString()}),(0,aP.jsx)(SO.Text,{children:e.content})]})]},s.id)))]})]})}const kO=function(){const[e,n]=(0,t.useState)([]);(0,t.useEffect)((()=>{r()}),[]);const r=()=>{sP.firestore().collection("posts").where("author.uid","==",sP.auth().currentUser.uid).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));n(t)}))};return(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsx)(ZD,{children:"\u6211\u7684\u6587\u7ae0"}),(0,aP.jsx)(TD.Group,{children:e.map((t=>(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsx)(kD,{post:t},t.id),(0,aP.jsx)(ya,{negative:!0,onClick:()=>(async t=>{try{const r=sP.firestore().collection("posts").doc(t);console.log("Document reference:",r),await r.delete(),console.log("Post deleted successfully"),n(e.filter((e=>e.id!==t)))}catch(r){console.error("\u522a\u9664\u6587\u7ae0\u6642\u767c\u751f\u932f\u8aa4:",r)}})(t.id),children:"\u522a\u9664\u6587\u7ae0"})]})))})]})};const CO=function(){const[e,n]=(0,t.useState)([]);return(0,t.useEffect)((()=>{sP.firestore().collection("posts").where("collectedBy","array-contains",sP.auth().currentUser.uid).get().then((e=>{const t=e.docs.map((e=>{const t=e.id;return{...e.data(),id:t}}));n(t)}))}),[]),(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsx)(ZD,{children:"\u6211\u7684\u6536\u85cf"}),(0,aP.jsx)(TD.Group,{children:e.map((e=>(0,aP.jsx)(kD,{post:e},e.id)))})]})};var xO=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleButtonOverrides=function(e){return{onClick:function(n,r){Kn(e,"onClick",n,r),Kn(t.props,"onActionClick",n,r)}}},t}return a(n,e),n.prototype.render=function(){var e=this,r=this.props,i=r.actions,s=r.children,a=r.className,c=r.content,l=Hn("actions",a),u=nr(n,this.props),h=rr(n,this.props);return ar(s)?ar(c)?t.createElement(h,o({},u,{className:l}),Nn(i,(function(t){return ya.create(t,{overrideProps:e.handleButtonOverrides})}))):t.createElement(h,o({},u,{className:l}),c):t.createElement(h,o({},u,{className:l}),s)},n}(t.Component);function NO(e){var n=e.children,r=e.className,i=e.content,s=e.image,a=e.scrolling,c=Hn(r,Jn(s,"image"),Jn(a,"scrolling"),"content"),l=nr(NO,e),u=rr(NO,e);return t.createElement(u,o({},l,{className:c}),ar(n)?i:n)}xO.handledProps=["actions","as","children","className","content","onActionClick"],xO.propTypes={},xO.create=Dr(xO,(function(e){return{actions:e}})),NO.handledProps=["as","children","className","content","image","scrolling"],NO.propTypes={},NO.create=Dr(NO,(function(e){return{content:e}}));const AO=NO;function PO(e){var n=e.children,r=e.className,i=e.content,s=Hn("description",r),a=nr(PO,e),c=rr(PO,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}PO.handledProps=["as","children","className","content"],PO.propTypes={};const RO=PO;const DO=ks()?t.useLayoutEffect:t.useEffect;var OO=/\s+/;var LO=new Map,MO=function(e,t){var n=function(e){var t=[];return e?(e.forEach((function(e){"string"===typeof e.current&&e.current.split(OO).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))):[]}(t),r=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}(LO.get(e)||[],n),i=r[0],o=r[1];e&&(i.forEach((function(t){return e.classList.add(t)})),o.forEach((function(t){return e.classList.remove(t)}))),LO.set(e,n)},FO=new function(){var e=this;this.add=function(t,n){if(e.nodes.has(t)){e.nodes.get(t).add(n)}else{var r=new Set;r.add(n),e.nodes.set(t,r)}},this.del=function(t,n){if(e.nodes.has(t)){var r=e.nodes.get(t);1!==r.size?r.delete(n):e.nodes.delete(t)}},this.emit=function(t,n){n(t,e.nodes.get(t))},this.nodes=new Map};function UO(e){var n=e.blurring,r=e.children,i=e.className,s=e.centered,a=e.content,c=e.inverted,l=e.mountNode,u=e.scrolling,h=t.useRef(),d=Hn("ui",Jn(c,"inverted"),Jn(!s,"top aligned"),"page modals dimmer transition visible active",i),f=Hn("dimmable dimmed",Jn(n,"blurring"),Jn(u,"scrolling")),p=nr(UO,e),m=rr(UO,e);return function(e,n){var r=t.useRef(),i=t.useRef(!1);DO((function(){if(r.current=n,i.current){var t=Us(e)?e.current:e;FO.emit(t,MO)}i.current=!0}),[n]),DO((function(){var t=Us(e)?e.current:e;return FO.add(t,r),FO.emit(t,MO),function(){FO.del(t,r),FO.emit(t,MO)}}),[e])}(l,f),t.useEffect((function(){h.current&&h.current.style&&h.current.style.setProperty("display","flex","important")}),[]),t.createElement(Gs,{innerRef:h},t.createElement(m,o({},p,{className:d}),ar(r)?a:r))}UO.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],UO.propTypes={},UO.create=Dr(UO,(function(e){return{content:e}}));const jO=UO;function VO(e){var n=e.children,r=e.className,i=e.content,s=Hn("header",r),a=nr(VO,e),c=rr(VO,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}VO.handledProps=["as","children","className","content"],VO.propTypes={},VO.create=Dr(VO,(function(e){return{content:e}}));const zO=VO;var BO=function(e){function n(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(r=e.call.apply(e,[this].concat(s))||this).legacy=ks()&&!window.ActiveXObject&&"ActiveXObject"in window,r.ref=(0,t.createRef)(),r.dimmerRef=(0,t.createRef)(),r.latestDocumentMouseDownEvent=null,r.getMountNode=function(){return ks()?r.props.mountNode||document.body:null},r.handleActionsOverrides=function(e){return{onActionClick:function(t,n){Kn(e,"onActionClick",t,n),Kn(r.props,"onActionClick",t,r.props),r.handleClose(t)}}},r.handleClose=function(e){r.setState({open:!1}),Kn(r.props,"onClose",e,o({},r.props,{open:!1}))},r.handleDocumentMouseDown=function(e){r.latestDocumentMouseDownEvent=e},r.handleDocumentClick=function(e){var t=r.props.closeOnDimmerClick,n=r.latestDocumentMouseDownEvent;r.latestDocumentMouseDownEvent=null,!t||Ws(r.ref.current,n)||Ws(r.ref.current,e)||(r.setState({open:!1}),Kn(r.props,"onClose",e,o({},r.props,{open:!1})))},r.handleIconOverrides=function(e){return{onClick:function(t){Kn(e,"onClick",t),r.handleClose(t)}}},r.handleOpen=function(e){Kn(r.props,"onOpen",e,o({},r.props,{open:!0})),r.setState({open:!0})},r.handlePortalMount=function(e){var t=r.props.eventPool;r.setState({scrolling:!1}),r.setPositionAndClassNames(),Is.sub("mousedown",r.handleDocumentMouseDown,{pool:t,target:r.dimmerRef.current}),Is.sub("click",r.handleDocumentClick,{pool:t,target:r.dimmerRef.current}),Kn(r.props,"onMount",e,r.props)},r.handlePortalUnmount=function(e){var t=r.props.eventPool;cancelAnimationFrame(r.animationRequestId),Is.unsub("mousedown",r.handleDocumentMouseDown,{pool:t,target:r.dimmerRef.current}),Is.unsub("click",r.handleDocumentClick,{pool:t,target:r.dimmerRef.current}),Kn(r.props,"onUnmount",e,r.props)},r.setPositionAndClassNames=function(){var e,t=r.props.centered,n={};if(r.ref.current){var i=r.ref.current.getBoundingClientRect(),o=function(e){var t=e.height+0,n=e.height+0,r=window.innerHeight;return r/2+-n/2+t+50<r}(i);e=!o;var s=r.legacy?function(e,t,n){var r=t&&e?-n.height/2:0;return{marginLeft:-n.width/2,marginTop:r}}(o,t,i):{};bs()(r.state.legacyStyles,s)||(n.legacyStyles=s),r.state.scrolling!==e&&(n.scrolling=e)}Xi(n)||r.setState(n),r.animationRequestId=requestAnimationFrame(r.setPositionAndClassNames)},r.renderContent=function(e){var i=r.props,s=i.actions,a=i.basic,c=i.children,l=i.className,u=i.closeIcon,h=i.content,d=i.header,f=i.size,p=i.style,m=r.state,g=m.legacyStyles,v=m.scrolling,y=Hn("ui",f,Jn(a,"basic"),Jn(r.legacy,"legacy"),Jn(v,"scrolling"),"modal transition visible active",l),w=rr(n,r.props),b=!0===u?"close":u,_=Ki.create(b,{overrideProps:r.handleIconOverrides});return t.createElement(Gs,{innerRef:r.ref},t.createElement(w,o({},e,{className:y,style:o({},g,p)}),_,ar(c)?t.createElement(t.Fragment,null,zO.create(d,{autoGenerateKey:!1}),AO.create(h,{autoGenerateKey:!1}),xO.create(s,{overrideProps:r.handleActionsOverrides})):c))},r}a(n,e);var r=n.prototype;return r.componentWillUnmount=function(){this.handlePortalUnmount()},r.render=function(){var e=this.props,r=e.centered,i=e.closeOnDocumentClick,s=e.dimmer,a=e.eventPool,c=e.trigger,l=this.state,u=l.open,h=l.scrolling,d=this.getMountNode();if(!ks())return(0,t.isValidElement)(c)?c:null;var f=nr(n,this.props),p=$s.handledProps,m=gs(f,(function(e,t,n){return As(p,n)||(e[n]=t),e}),{}),g=uR(f,p);return t.createElement($s,o({closeOnDocumentClick:i},g,{trigger:c,eventPool:a,mountNode:d,open:u,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),t.createElement(Gs,{innerRef:this.dimmerRef},jO.create(Cr(s)?s:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===s,inverted:"inverted"===s},overrideProps:{children:this.renderContent(m),centered:r,mountNode:d,scrolling:h}})))},n}(lr);BO.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],BO.propTypes={},BO.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},BO.autoControlledProps=["open"],BO.Actions=xO,BO.Content=AO,BO.Description=RO,BO.Dimmer=jO,BO.Header=zO;const qO=BO;function KO(e){let{user:n}=e;const[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(!1);return(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsxs)(ZD,{size:"small",children:["\u6703\u54e1\u540d\u7a31",(0,aP.jsx)(ya,{floated:"right",onClick:()=>i(!0),children:"\u4fee\u6539"})]}),(0,aP.jsx)(sO,{vertical:!0,children:n.displayName}),(0,aP.jsxs)(qO,{open:r,size:"mini",children:[(0,aP.jsx)(qO.Header,{children:"\u4fee\u6539\u6703\u54e1\u540d\u7a31"}),(0,aP.jsx)(qO.Content,{children:(0,aP.jsx)(ba,{placeholder:"\u8acb\u8f38\u5165\u6703\u54e1\u540d\u7a31",value:o,onChange:e=>s(e.target.value),fluid:!0})}),(0,aP.jsxs)(qO.Actions,{children:[(0,aP.jsx)(ya,{onClick:()=>i(!1),children:"\u53d6\u6d88"}),(0,aP.jsx)(ya,{onClick:function(){c(!0),n.updateProfile({displayName:o}).then((()=>{c(!1),s(""),i(!1)}))},loading:a,children:"\u4fee\u6539"})]})]})]})}function GO(e){let{user:n}=e;const[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(!1),[a,c]=(0,t.useState)(null),l=a?URL.createObjectURL(a):n.photoURL;return(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsxs)(ZD,{size:"small",children:["\u6703\u54e1\u7167\u7247",(0,aP.jsx)(ya,{floated:"right",onClick:()=>i(!0),children:"\u4fee\u6539"})]}),(0,aP.jsx)(sO,{vertical:!0,children:(0,aP.jsx)(oa,{src:l,avatar:!0})}),(0,aP.jsxs)(qO,{open:r,size:"mini",children:[(0,aP.jsx)(qO.Header,{children:"\u4fee\u6539\u6703\u54e1\u7167\u7247"}),(0,aP.jsxs)(qO.Content,{image:!0,children:[(0,aP.jsx)(oa,{src:l,avatar:!0,wrapped:!0}),(0,aP.jsxs)(qO.Description,{children:[(0,aP.jsx)(ya,{as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3"}),(0,aP.jsx)(ba,{type:"file",id:"post-image",style:{display:"none"},onChange:e=>c(e.target.files[0])})]})]}),(0,aP.jsxs)(qO.Actions,{children:[(0,aP.jsx)(ya,{onClick:()=>i(!1),children:"\u53d6\u6d88"}),(0,aP.jsx)(ya,{loading:o,onClick:function(){s(!0);const e=sP.storage().ref("user-photos/"+n.uid),t={contentType:a.type};e.put(a,t).then((()=>{e.getDownloadURL().then((e=>{n.updateProfile({photoURL:e}).then((()=>{s(!1),c(null),i(!1)}))}))}))},children:"\u4fee\u6539"})]})]})]})}function HO(e){let{user:n}=e;const[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(""),[a,c]=(0,t.useState)(""),[l,u]=(0,t.useState)(!1);return(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsxs)(ZD,{size:"small",children:["\u6703\u54e1\u5bc6\u78bc",(0,aP.jsx)(ya,{floated:"right",onClick:()=>i(!0),children:"\u4fee\u6539"})]}),(0,aP.jsx)(sO,{vertical:!0,children:"******"}),(0,aP.jsxs)(qO,{open:r,size:"mini",children:[(0,aP.jsx)(qO.Header,{children:"\u4fee\u6539\u6703\u54e1\u5bc6\u78bc"}),(0,aP.jsxs)(qO.Content,{children:[(0,aP.jsx)(ZD,{size:"small",children:"\u76ee\u524d\u5bc6\u78bc"}),(0,aP.jsx)(ba,{placeholder:"\u8acb\u8f38\u5165\u820a\u5bc6\u78bc",value:o,onChange:e=>s(e.target.value),fluid:!0}),(0,aP.jsx)(ZD,{size:"small",children:"\u65b0\u5bc6\u78bc"}),(0,aP.jsx)(ba,{placeholder:"\u8acb\u8f38\u5165\u65b0\u5bc6\u78bc",value:a,onChange:e=>c(e.target.value),fluid:!0})]}),(0,aP.jsxs)(qO.Actions,{children:[(0,aP.jsx)(ya,{onClick:()=>i(!1),children:"\u53d6\u6d88"}),(0,aP.jsx)(ya,{onClick:function(){u(!0);const e=sP.auth.EmailAuthProvider.credential(n.email,o);n.reauthenticateWithCredential(e).then((()=>{n.updatePassword(a).then((()=>{u(!1),i(!1),s(""),c("")}))})),n.updatePassword(a)},loading:l,children:"\u4fee\u6539"})]})]})]})}function WO(e){let{user:t}=e;return(0,aP.jsxs)(aP.Fragment,{children:[(0,aP.jsx)(ZD,{children:"\u6703\u54e1\u8cc7\u6599"}),(0,aP.jsx)(KO,{user:t}),(0,aP.jsx)(GO,{user:t}),(0,aP.jsx)(HO,{user:t})]})}function QO(e){var n=e.children,r=e.className,i=e.content,s=Hn(r,"description"),a=nr(QO,e),c=rr(QO,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}QO.handledProps=["as","children","className","content"],QO.propTypes={},QO.create=Dr(QO,(function(e){return{content:e}}));const JO=QO;function YO(e){var n=e.children,r=e.className,i=e.content,s=Hn("header",r),a=nr(YO,e),c=rr(YO,e);return t.createElement(c,o({},a,{className:s}),ar(n)?i:n)}YO.handledProps=["as","children","className","content"],YO.propTypes={},YO.create=Dr(YO,(function(e){return{content:e}}));const $O=YO;function XO(e){var n=e.children,r=e.className,i=e.content,s=e.description,a=e.floated,c=e.header,l=e.verticalAlign,u=Hn(Yn(a,"floated"),er(l),"content",r),h=nr(XO,e),d=rr(XO,e);return ar(n)?t.createElement(d,o({},h,{className:u}),$O.create(c),JO.create(s),i):t.createElement(d,o({},h,{className:u}),n)}XO.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],XO.propTypes={},XO.create=Dr(XO,(function(e){return{content:e}}));const ZO=XO;function eL(e){var n=e.className,r=e.verticalAlign,i=Hn(er(r),n),s=nr(eL,e);return t.createElement(Ki,o({},s,{className:i}))}eL.handledProps=["className","verticalAlign"],eL.propTypes={},eL.create=Dr(eL,(function(e){return{name:e}}));const tL=eL;var nL=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Kn(t.props,"onClick",e,t.props)},t}return a(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.children,s=e.className,a=e.content,c=e.description,l=e.disabled,u=e.header,h=e.icon,d=e.image,f=e.value,p=rr(n,this.props),m=Hn(Jn(r,"active"),Jn(l,"disabled"),Jn("li"!==p,"item"),s),g=nr(n,this.props),v="li"===p?{value:f}:{"data-value":f};if(!ar(i))return t.createElement(p,o({},v,{role:"listitem",className:m,onClick:this.handleClick},g),i);var y=tL.create(h,{autoGenerateKey:!1}),w=oa.create(d,{autoGenerateKey:!1});if(!(0,t.isValidElement)(a)&&Cr(a))return t.createElement(p,o({},v,{role:"listitem",className:m,onClick:this.handleClick},g),y||w,ZO.create(a,{autoGenerateKey:!1,defaultProps:{header:u,description:c}}));var b=$O.create(u,{autoGenerateKey:!1}),_=JO.create(c,{autoGenerateKey:!1});return y||w?t.createElement(p,o({},v,{role:"listitem",className:m,onClick:this.handleClick},g),y||w,(a||b||_)&&t.createElement(ZO,null,b,_,a)):t.createElement(p,o({},v,{role:"listitem",className:m,onClick:this.handleClick},g),b,_,a)},n}(t.Component);nL.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],nL.propTypes={},nL.create=Dr(nL,(function(e){return{content:e}}));const rL=nL;function iL(e){var n=e.children,r=e.className,i=e.content,s=nr(iL,e),a=rr(iL,e),c=Hn(Jn("ul"!==a&&"ol"!==a,"list"),r);return t.createElement(a,o({},s,{className:c}),ar(n)?i:n)}iL.handledProps=["as","children","className","content"],iL.propTypes={};const oL=iL;var sL=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){Kn(e,"onClick",n,r),Kn(t.props,"onItemClick",n,r)}}},t}return a(n,e),n.prototype.render=function(){var e=this,r=this.props,i=r.animated,s=r.bulleted,a=r.celled,c=r.children,l=r.className,u=r.content,h=r.divided,d=r.floated,f=r.horizontal,p=r.inverted,m=r.items,g=r.link,v=r.ordered,y=r.relaxed,w=r.selection,b=r.size,_=r.verticalAlign,E=Hn("ui",b,Jn(i,"animated"),Jn(s,"bulleted"),Jn(a,"celled"),Jn(h,"divided"),Jn(f,"horizontal"),Jn(p,"inverted"),Jn(g,"link"),Jn(v,"ordered"),Jn(w,"selection"),$n(y,"relaxed"),Yn(d,"floated"),er(_),"list",l),I=nr(n,this.props),S=rr(n,this.props);return ar(c)?ar(u)?t.createElement(S,o({role:"list",className:E},I),Nn(m,(function(t){return rL.create(t,{overrideProps:e.handleItemOverrides})}))):t.createElement(S,o({role:"list",className:E},I),u):t.createElement(S,o({role:"list",className:E},I),c)},n}(t.Component);sL.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],sL.propTypes={},sL.Content=ZO,sL.Description=JO,sL.Header=$O,sL.Icon=tL,sL.Item=rL,sL.List=oL;const aL=sL;const cL=function(){const e=Ic(),n=new URLSearchParams(e.search).get("topic"),[r,i]=(0,t.useState)([]);return(0,t.useEffect)((()=>{sP.firestore().collection("topics").get().then((e=>{const t=e.docs.map((e=>e.data()));i(t)}))}),[]),(0,aP.jsx)(aL,{animated:!0,selection:!0,children:r.map((e=>(0,aP.jsx)(aL.Item,{as:Zc,to:"/posts?topic=".concat(e.name),active:n===e.name,children:e.name},e.name)))})};function lL(e){var n=e.children,r=e.className,i=e.computer,s=e.color,a=e.floated,c=e.largeScreen,l=e.mobile,u=e.only,h=e.stretched,d=e.tablet,f=e.textAlign,p=e.verticalAlign,m=e.widescreen,g=e.width,v=Hn(s,Jn(h,"stretched"),Xn(u,"only"),Zn(f),Yn(a,"floated"),er(p),tr(i,"wide computer"),tr(c,"wide large screen"),tr(l,"wide mobile"),tr(d,"wide tablet"),tr(m,"wide widescreen"),tr(g,"wide"),"column",r),y=nr(lL,e),w=rr(lL,e);return t.createElement(w,o({},y,{className:v}),n)}lL.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],lL.propTypes={},lL.create=Dr(lL,(function(e){return{children:e}}));const uL=lL;function hL(e){var n=e.centered,r=e.children,i=e.className,s=e.color,a=e.columns,c=e.divided,l=e.only,u=e.reversed,h=e.stretched,d=e.textAlign,f=e.verticalAlign,p=Hn(s,Jn(n,"centered"),Jn(c,"divided"),Jn(h,"stretched"),Xn(l,"only"),Xn(u,"reversed"),Zn(d),er(f),tr(a,"column",!0),"row",i),m=nr(hL,e),g=rr(hL,e);return t.createElement(g,o({},m,{className:p}),r)}hL.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],hL.propTypes={};const dL=hL;function fL(e){var n=e.celled,r=e.centered,i=e.children,s=e.className,a=e.columns,c=e.container,l=e.divided,u=e.doubling,h=e.inverted,d=e.padded,f=e.relaxed,p=e.reversed,m=e.stackable,g=e.stretched,v=e.textAlign,y=e.verticalAlign,w=Hn("ui",Jn(r,"centered"),Jn(c,"container"),Jn(u,"doubling"),Jn(h,"inverted"),Jn(m,"stackable"),Jn(g,"stretched"),$n(n,"celled"),$n(l,"divided"),$n(d,"padded"),$n(f,"relaxed"),Xn(p,"reversed"),Zn(v),er(y),tr(a,"column",!0),"grid",s),b=nr(fL,e),_=rr(fL,e);return t.createElement(_,o({},b,{className:w}),i)}fL.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],fL.Column=uL,fL.Row=dL,fL.propTypes={};const pL=fL;const mL=function(){const e=Ic();return(0,aP.jsx)(aL,{animated:!0,selection:!0,children:[{name:"\u6211\u7684\u6587\u7ae0",path:"/my/posts"},{name:"\u6211\u7684\u6536\u85cf",path:"/my/collections"},{name:"\u6703\u54e1\u8cc7\u6599",path:"/my/settings"}].map((t=>(0,aP.jsx)(aL.Item,{as:Zc,to:t.path,active:t.path===e.pathname,children:t.name},t.name)))})};const gL=function(){const[e,n]=(0,t.useState)();return(0,t.useEffect)((()=>{sP.auth().onAuthStateChanged((e=>{n(e)}))}),[]),(0,aP.jsxs)(Yc,{children:[(0,aP.jsx)(cP,{user:e}),(0,aP.jsxs)(Kc,{children:[(0,aP.jsxs)(Bc,{path:"/posts",element:(0,aP.jsx)(uP,{children:(0,aP.jsx)(pL,{children:(0,aP.jsxs)(pL.Row,{children:[(0,aP.jsx)(pL.Column,{width:3,children:(0,aP.jsx)(cL,{})}),(0,aP.jsx)(pL.Column,{width:10,children:(0,aP.jsx)(zc,{})}),(0,aP.jsx)(pL.Column,{width:3})]})})}),children:[(0,aP.jsx)(Bc,{index:!0,element:(0,aP.jsx)(WD,{})}),(0,aP.jsx)(Bc,{path:":postId",element:null!==e?(0,aP.jsx)(TO,{}):(0,aP.jsx)(Vc,{to:"/posts"})})]}),(0,aP.jsxs)(Bc,{path:"/my",element:null!==e?(0,aP.jsx)(uP,{children:(0,aP.jsx)(pL,{children:(0,aP.jsxs)(pL.Row,{children:[(0,aP.jsx)(pL.Column,{width:3,children:(0,aP.jsx)(mL,{})}),(0,aP.jsx)(pL.Column,{width:10,children:(0,aP.jsx)(zc,{})}),(0,aP.jsx)(pL.Column,{width:3})]})})}):(0,aP.jsx)(Vc,{to:"/posts"}),children:[(0,aP.jsx)(Bc,{path:"posts",element:(0,aP.jsx)(kO,{})}),(0,aP.jsx)(Bc,{path:"collections",element:(0,aP.jsx)(CO,{})}),(0,aP.jsx)(Bc,{path:"settings",element:(0,aP.jsx)(WO,{user:e})})]}),(0,aP.jsx)(Bc,{path:"/signin",element:null!==e?(0,aP.jsx)(Vc,{to:"/posts"}):(0,aP.jsx)(lD,{})}),(0,aP.jsx)(Bc,{path:"/new-post",element:null!==e?(0,aP.jsx)(eO,{}):(0,aP.jsx)(Vc,{to:"/posts"})})]})]})},vL=document.getElementById("root");(0,i.H)(vL).render((0,aP.jsx)(gL,{}))})()})();
//# sourceMappingURL=main.a7e21a64.js.map